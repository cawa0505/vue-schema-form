{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/schema-form/antd/upload.vue?d58e","webpack:///./src/uform/utils/schema.ts","webpack:///./src/uform/utils/index.ts","webpack:///./src/uform/utils/case.ts","webpack:///./src/schema-form/utils/destruct.ts","webpack:///./src/schema-form/utils/field.ts","webpack:///./src/schema-form/internal/base-form.tsx","webpack:///./src/uform/utils/array.ts","webpack:///./src/uform/utils/lru.ts","webpack:///./src/schema-form/internal/form.tsx","webpack:///./src/schema-form/antd/upload.vue?93e7","webpack:///./src/schema-form/antd/upload.vue?bc2f","webpack:///./src/schema-form/antd/upload.vue?32d4","webpack:///./src/schema-form/antd/upload.vue","webpack:///./src/schema-form/display/plain-display-field.tsx","webpack:///./src/schema-form/display/select-display-field.tsx","webpack:///./src/schema-form/display/time-display-field.tsx","webpack:///./src/schema-form/element/base-option-component.tsx","webpack:///./src/schema-form/element/checkbox-group.tsx","webpack:///./src/schema-form/element/radio-group.tsx","webpack:///./src/schema-form/element/select.tsx","webpack:///./src/schema-form/empty.tsx","webpack:///./src/schema-form/utils.tsx","webpack:///external \"Vue\"","webpack:///./src/uform/utils/globalThis.ts","webpack:///./src/uform/utils/accessor.ts","webpack:///./src/mixins/emitter.ts","webpack:///./src/schema-form/array-wrapper.tsx","webpack:///./src/schema-form/field.tsx","webpack:///./src/uform/utils/compare.ts","webpack:///./src/views/demo/index.vue?0174","webpack:///./src/views/demo/index.vue?455f","webpack:///./src/views/demo/index.vue?2b33","webpack:///./src/views/demo/index.vue","webpack:///./src/router.ts","webpack:///./src/store.ts","webpack:///./src/views/index.vue?2937","webpack:///./src/views/index.vue?4f33","webpack:///./src/views/index.vue?3317","webpack:///./src/views/index.vue","webpack:///./src/main.ts","webpack:///./src/uform/utils/isEmpty.ts","webpack:///./src/views/index.vue?d3e6","webpack:///./src/uform/types/index.ts","webpack:///./src/uform/types/types.ts","webpack:///./src/schema-form/form.tsx","webpack:///./src/schema-form/index.ts","webpack:///./src/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","getStructValue","parentValue","struct","Array","isArray","map","keys","forEach","destructValue","setStructValue","structValue","index","field","v","processor","setValue","destructPath","destruct","getValue","getPropertyValueByPath","currentValue","fields","this","$emit","definition","array","concat","buildExtraProperties","$forceUpdate","tmpValue","fieldDef","copy","splits","split","$set","createField","realFields","includes","setDefaultValue","$slots","header","renderTitle","renderFields","renderAddFormButton","renderButtons","footer","props","ButtonComponent","btns","platform","hasListener","isDisabled","isLoading","okProps","onOk","okText","cancelProps","cancelText","resetProps","resetText","title","form","validate","valid","some","it","$message","groups","spanGroups","lastHasSpan","vnode","renderField","span","depends","condition","matchCondition","visible","compareValue","operator","toString","parseFloat","substr","lastIndexOf","effects","iField","buildFieldPath","slot","renderSingleFields","FormComponent","getGroups","formProps","getFormProps","$listeners","prepend","isDesktop","inline","reduce","a","b","group","wrapGroup","renderDeleteSubFormButton","append","block","icon","disabled","addSubItem","Number","isInteger","arrayIndex","textAlign","RowComponent","isMobile","gutter","plainPath","join","existsField","display","editable","isReadonly","observable","enum","path","buildArrayPath","assign","calcShowState","required","effectErrors","errors","hiddenFromParent","initialValue","initialize","invalid","justifyContent","color","cursor","isFormDisabled","pathPrefix","filter","$refs","loading","readonly","String","default","Boolean","deep","immediate","toArr","val","each","iterator","revert","res","item","every","NEWER","OLDER","LRUMap","limit","entries","copyEntries","copyLimit","size","oldest","newest","_keymap","Map","Entry","EntryIterator","oldestEntry","entry","KeyIterator","ValueIterator","_markEntryAsUsed","MAX_VALUE","clear","itv","next","done","set","delete","find","has","ent","values","fun","thisObj","copyThisObj","toJSON","_vm","_h","$createElement","_c","_self","listType","_g","_b","attrs","fileList","staticClass","_v","$attrs","_e","_t","class","domProps","_s","hint","staticRenderFns","extend","multiple","computed","component","options","selected","valueProperty","LabelProperty","labelProperty","format","render","InputComponent","OptionComponent","optionComponent","option","labelProp","getOptionProperty","valueProp","mixins","button","Mode","TYPES","ASchemaForm","store","desktop","mobile","edit","DESKTOP","MOBILE","formComponent","rowComponent","colComponent","buttonComponent","alertComponent","confirmFunction","SchemaFormComponentDefinitions","DisplayComponentDefinitions","registerDisplay","forArray","getProps","addComponent","register","types","platforms","forDisplay","def","labelNumber","typeDef","registerAntd","info","daterange","string","url","text","date","year","month","datetime","toLowerCase","time","double","integer","number","boolean","select","dropdownMatchSelectWidth","upload","expandSelect","rate","transfer","dataSource","label","description","range","registerElement","registerAntdMobile","EmptyDefinition","_","searchStore","getComponent","getDisplayComponent","getDefaultValue","getFormComponent","getRowComponent","getColComponent","getButtonComponent","getAlertComponent","addRule","rules","rule","validateType","getConfirmFunction","Vue","globalThisPolyfill","self","global","Function","whitespace","PathCache","getPathSegments","cached","pathArr","parts","DestructTokenizer","handlers","state","processNameStart","declareNameStart","declareNameEnd","nbraceCount","nbracketCount","char","prev","charAt","EOF","substring","processDestructStart","destructKey","destructKeyStart","destructObjectEnd","destructArrayEnd","destructObjectStart","destructArrayStart","processDestructKey","getName","processName","parseDestruct","str","lastDestruct","root","stack","token","realKey","readyReplace","tail","pop","parse","traverse","obj","callback","internalTraverse","internalObj","newPath","mapReduce","parseDestructPath","lastKey","startPath","parsePaths","parsed","internalPath","endPath","resolveGetIn","cache","ast","mapPath","resolveUpdateIn","update","internalGetIn","getSchema","paths","resolveExistIn","_getIn","copyPath","copyObj","propertyIsEnumerable","_setIn","test","schema","_deleteIn","_existIn","getIn","setIn","componentName","eventName","params","$children","child","$options","parent","$parent","$root","ColComponent","buttonStyle","addBtnProps","width","onAddClick","addBtnText","subForm","margin","cellSpan","content","renderAddButton","onChange","dispatch","inputFieldDef","componentType","InputFieldComponent","displayValue","addArrayItem","itemProps","confirmFunc","onArrayItemInput","onInput","renderInputComponent","FormItemComponent","formItemComponent","formItem","getFormItemProps","renderNotice","style","staticStyle","min","max","AlertComponent","notice","help","hasFeedback","validateStatus","validateFields","catch","getRules","validator","model","firstFields","invalidFields","warn","demoRoutes","meta","routes","children","use","Store","mutations","actions","on","$event","to","_l","items","route","$router","router","h","$mount","isEmpty","isType","isFn","isArr","isPlainObj","isStr","isNum","isObj","context","hide","show","setEnum","setFieldProps","onFieldChange","subscribe","createContext","$on","prop","indexOf","registerComponent","registerDisplayComponent","Field","install"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAGnBC,EAAqB,CACxB,IAAO,GAMJjB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASa,EAAe7B,GACvB,OAAOyB,EAAoBK,EAAI,OAAS,GAAG9B,IAAUA,GAAW,IAAM,CAAC,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,YAAYA,GAAW,MAI5d,SAASyB,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAUgC,QAGnC,IAAIC,EAASL,EAAiB5B,GAAY,CACzCK,EAAGL,EACHkC,GAAG,EACHF,QAAS,IAUV,OANAlB,EAAQd,GAAUW,KAAKsB,EAAOD,QAASC,EAAQA,EAAOD,QAASN,GAG/DO,EAAOC,GAAI,EAGJD,EAAOD,QAKfN,EAAoBS,EAAI,SAAuBlC,GAC9C,IAAImC,EAAW,GAIXC,EAAY,CAAC,iBAAiB,GAC/BR,EAAmB5B,GAAUmC,EAASvB,KAAKgB,EAAmB5B,IACzB,IAAhC4B,EAAmB5B,IAAkBoC,EAAUpC,IACtDmC,EAASvB,KAAKgB,EAAmB5B,GAAW,IAAIqC,QAAQ,SAASC,EAASC,GAIzE,IAHA,IAAIC,EAAO,QAAU,GAAGxC,IAAUA,GAAW,IAAM,CAAC,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,YAAYA,GAAW,OACpcyC,EAAWhB,EAAoBK,EAAIU,EACnCE,EAAmBC,SAASC,qBAAqB,QAC7CxC,EAAI,EAAGA,EAAIsC,EAAiBpC,OAAQF,IAAK,CAChD,IAAIyC,EAAMH,EAAiBtC,GACvB0C,EAAWD,EAAIE,aAAa,cAAgBF,EAAIE,aAAa,QACjE,GAAe,eAAZF,EAAIG,MAAyBF,IAAaN,GAAQM,IAAaL,GAAW,OAAOH,IAErF,IAAIW,EAAoBN,SAASC,qBAAqB,SACtD,IAAQxC,EAAI,EAAGA,EAAI6C,EAAkB3C,OAAQF,IAAK,CAC7CyC,EAAMI,EAAkB7C,GACxB0C,EAAWD,EAAIE,aAAa,aAChC,GAAGD,IAAaN,GAAQM,IAAaL,EAAU,OAAOH,IAEvD,IAAIY,EAAUP,SAASQ,cAAc,QACrCD,EAAQF,IAAM,aACdE,EAAQE,KAAO,WACfF,EAAQG,OAASf,EACjBY,EAAQI,QAAU,SAASC,GAC1B,IAAIC,EAAUD,GAASA,EAAME,QAAUF,EAAME,OAAOC,KAAOjB,EACvDkB,EAAM,IAAIC,MAAM,qBAAuB5D,EAAU,cAAgBwD,EAAU,KAC/EG,EAAIE,KAAO,wBACXF,EAAIH,QAAUA,SACP5B,EAAmB5B,GAC1BkD,EAAQY,WAAWC,YAAYb,GAC/BX,EAAOoB,IAERT,EAAQV,KAAOC,EAEf,IAAIuB,EAAOrB,SAASC,qBAAqB,QAAQ,GACjDoB,EAAKC,YAAYf,KACfgB,KAAK,WACPtC,EAAmB5B,GAAW,KAMhC,IAAImE,EAAqBxD,EAAgBX,GACzC,GAA0B,IAAvBmE,EAGF,GAAGA,EACFhC,EAASvB,KAAKuD,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAI/B,QAAQ,SAASC,EAASC,GAC3C4B,EAAqBxD,EAAgBX,GAAW,CAACsC,EAASC,KAE3DJ,EAASvB,KAAKuD,EAAmB,GAAKC,GAGtC,IACIC,EADAC,EAAS3B,SAASQ,cAAc,UAGpCmB,EAAOC,QAAU,QACjBD,EAAOE,QAAU,IACb/C,EAAoBgD,IACvBH,EAAOI,aAAa,QAASjD,EAAoBgD,IAElDH,EAAOZ,IAAM7B,EAAe7B,GAG5B,IAAI2E,EAAQ,IAAIf,MAChBS,EAAmB,SAAUd,GAE5Be,EAAOhB,QAAUgB,EAAOjB,OAAS,KACjCuB,aAAaJ,GACb,IAAIK,EAAQlE,EAAgBX,GAC5B,GAAa,IAAV6E,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYvB,IAAyB,SAAfA,EAAMH,KAAkB,UAAYG,EAAMH,MAChE2B,EAAUxB,GAASA,EAAME,QAAUF,EAAME,OAAOC,IACpDiB,EAAMK,QAAU,iBAAmBhF,EAAU,cAAgB8E,EAAY,KAAOC,EAAU,IAC1FJ,EAAMM,KAAO,iBACbN,EAAMvB,KAAO0B,EACbH,EAAMnB,QAAUuB,EAChBF,EAAM,GAAGF,GAEVhE,EAAgBX,QAAWkF,IAG7B,IAAIV,EAAUW,WAAW,WACxBd,EAAiB,CAAEjB,KAAM,UAAWK,OAAQa,KAC1C,MACHA,EAAOhB,QAAUgB,EAAOjB,OAASgB,EACjC1B,SAASqB,KAAKC,YAAYK,GAG5B,OAAOjC,QAAQ+C,IAAIjD,IAIpBV,EAAoB4D,EAAIxE,EAGxBY,EAAoB6D,EAAI3D,EAGxBF,EAAoB8D,EAAI,SAASxD,EAASkD,EAAMO,GAC3C/D,EAAoBgE,EAAE1D,EAASkD,IAClC1E,OAAOmF,eAAe3D,EAASkD,EAAM,CAAEU,YAAY,EAAMC,IAAKJ,KAKhE/D,EAAoBoE,EAAI,SAAS9D,GACX,qBAAX+D,QAA0BA,OAAOC,aAC1CxF,OAAOmF,eAAe3D,EAAS+D,OAAOC,YAAa,CAAEC,MAAO,WAE7DzF,OAAOmF,eAAe3D,EAAS,aAAc,CAAEiE,OAAO,KAQvDvE,EAAoBwE,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQvE,EAAoBuE,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAK7F,OAAO8F,OAAO,MAGvB,GAFA5E,EAAoBoE,EAAEO,GACtB7F,OAAOmF,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOvE,EAAoB8D,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR3E,EAAoB+E,EAAI,SAASxE,GAChC,IAAIwD,EAASxD,GAAUA,EAAOmE,WAC7B,WAAwB,OAAOnE,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAP,EAAoB8D,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR/D,EAAoBgE,EAAI,SAASgB,EAAQC,GAAY,OAAOnG,OAAOC,UAAUC,eAAeC,KAAK+F,EAAQC,IAGzGjF,EAAoBK,EAAI,IAGxBL,EAAoBkF,GAAK,SAAShD,GAA2B,MAApBiD,QAAQjC,MAAMhB,GAAYA,GAEnE,IAAIkD,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAWjG,KAAK2F,KAAKM,GAC5CA,EAAWjG,KAAOf,EAClBgH,EAAaA,EAAWG,QACxB,IAAI,IAAI5G,EAAI,EAAGA,EAAIyG,EAAWvG,OAAQF,IAAKP,EAAqBgH,EAAWzG,IAC3E,IAAIU,EAAsBiG,EAI1B/F,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,2JC1QT,yBAAiiB,EAAG,G,oCCApiB,yC,2DCAA,8L,oCCAA,W,2RCAM,SAAU+F,EAAeC,EAAqBC,GAClD,GAAIC,MAAMC,QAAQF,GAChB,OAAOA,EAAOG,IAAI,SAAAhB,GAAG,OAAIW,EAAeC,EAAaZ,KAChD,GAAsB,kBAAXa,EAChB,OAAOD,GAAeA,EAAYC,GAC7B,GAAsB,WAAlB,eAAOA,GAAqB,CACrC,IAAMnB,EAAQ,GASd,OARAzF,OAAOgH,KAAKJ,GAAQK,QAAQ,SAAAlB,GAC1B,IAAMmB,EAAgBN,EAAOb,GAE3BN,EAAMM,GADqB,kBAAlBmB,EACIP,GAAeA,EAAYO,GAE3BR,EAAeC,EAAaO,KAGtCzB,GAKL,SAAU0B,EAAeR,EAAqBC,EAAiCQ,GAC7D,kBAAXR,EACTD,EAAYC,GAAUQ,EACbP,MAAMC,QAAQF,GACvBA,EAAOK,QAAQ,SAAClB,EAAKsB,GACnBV,EAAYZ,GAAOqB,EAAYC,KAGjCrH,OAAOgH,KAAKJ,GAAQK,QAAQ,SAAAlB,GAC1B,IAAMmB,EAAgBN,EAAOb,GACA,kBAAlBmB,EACTP,EAAYO,GAAiBE,EAAYrB,GAEzCoB,EAAeR,EAAaO,EAAeE,EAAYrB,MC9BxD,IAAM,EAAgB,SAACY,EAAqBW,EAAeC,GAC5DD,EAAME,UACRF,EAAME,UAAUC,SAASd,EAAaW,EAAOC,GAE7CJ,EAAeR,EAAaW,EAAMI,aAAaC,UAAYL,EAAM5C,KAAM6C,IAI9D,EAAgB,SAAC9B,EAAY6B,GACxC,OAAIA,EAAME,UACDF,EAAME,UAAUI,SAASnC,EAAO6B,GAEhCZ,EAAejB,EAAO6B,EAAMI,aAAaC,UAAYL,EAAM5C,O,wHCQtE,SAASmD,EAAuB1B,EAAkB2B,GAChD,OAAO,IAAIA,EAAc3B,GAO3B,IAAqB,EAArB,YAHA,iD,+DA2BS,EAAA2B,aAAuE,KACvE,EAAAC,OAAgB,GA5BzB,EAGA,uFA4B6BD,GACzBE,KAAKC,MAAM,QAASH,GACpBE,KAAKC,MAAM,SAAUH,KA9BzB,2CAmCI,IAAMA,EAAeE,KAAKF,aACpBrC,EAAQuC,KAAKvC,MACfuC,KAAKE,WAAWC,MACd,IAAWL,EAAuBrC,GACnC2C,OAAO,IAAW3C,EAAgBqC,IAAwB/H,OAAS,GACpEiI,KAAKK,uBAEG,IAAGP,EAAcrC,IAC3BuC,KAAKK,yBA3CX,wCAiDIL,KAAKM,iBAjDT,mCAqDsB7C,GAClB,GAAIA,IAAUuC,KAAKF,aAAc,CAC/B,IAAMA,EAAeE,KAAKF,aACtBE,KAAKE,WAAWC,MACd,IAAWL,EAAuBrC,GACnC2C,OAAO,IAAW3C,EAAgBqC,IAAwB/H,OAAS,IACpEiI,KAAKF,aAAerC,GAAS,GAC7BuC,KAAKK,wBAEG,IAAGP,EAAcrC,KAC3BuC,KAAKF,aAAerC,GAAS,GAC7BuC,KAAKK,6BAEG5C,IACVuC,KAAKF,aAAe,GACpBE,KAAKK,0BApEX,gCAyEQL,KAAKvC,MACHuC,KAAKE,WAAWC,MACdH,KAAKvC,MAAM1F,OACbiI,KAAKF,aAAeE,KAAKvC,MAEzBuC,KAAKF,aAAe,CAAC,IAGvBE,KAAKF,aAAeE,KAAKvC,MAG3BuC,KAAKF,aAAeE,KAAKE,WAAWC,MAAQ,CAAC,IAAM,GAErDH,KAAKK,yBAtFT,sCAuGyBlC,EAAUoC,EAAUC,GAAQ,WAC7CC,EAAOF,EACLG,EAASvC,EAASwC,MAAM,KAC9BD,EAAOzB,QAAQ,SAACvC,EAAM2C,GAChBA,EAAQqB,EAAO3I,OAAS,GACrB0I,EAAK/D,IACR,EAAKkE,KAAKH,EAAM/D,EAAM,IAExB+D,EAAOA,EAAK/D,IAEZ+D,EAAK/D,GAAQ,eAAgB,EAAKmE,YAAYL,QAjHtD,6CAsH6B,WAClB/C,EAASuC,KAATvC,MACHqC,EAAeE,KAAKF,aACxBE,KAAKc,WAAW7B,QAAQ,SAAAuB,GACtB,IAAMlB,EAAQ,EAAKuB,YAAYL,GAC/B,GAA2C,kBAAhClB,EAAMI,aAAaC,SAAuB,CACnD,IAAMxB,EAAWqC,EAASrC,SAC1B,GAAI,EAAK+B,WAAWC,MACbL,GAAiBjB,MAAMC,QAAQgB,KAClCA,EAAe,IAEjBA,EAAab,QAAQ,SAAAsB,GACfpC,EAAS4C,SAAS,KACpB,EAAKC,gBAAgB7C,EAAUoC,EAAUC,GAEpCD,QAAmC5D,IAAvB4D,EAASpC,GAEfV,GAASA,EAAM1F,QACxB,EAAK6I,KAAKL,EAAUpC,EAAUV,EAAM,GAAG+C,EAASrC,WAFhD,EAAKyC,KAAKL,EAAUpC,EAAU,eAAgBmB,UAM/C,CACL,IAAMiB,EAAWT,EACb3B,EAAS4C,SAAS,KACpB,EAAKC,gBAAgB7C,EAAUoC,EAAUC,GAEpCD,QAAmC5D,IAAvB4D,EAASpC,GAEfV,GACT,EAAKmD,KAAKL,EAAUpC,EAAUV,EAAM+C,EAASrC,WAF7C,EAAKyC,KAAKL,EAAUpC,EAAU,eAAgBmB,UAlJ5D,+BA4Je,mBACX,sBAAkB,eAAlB,CACGU,KAAKiB,OAAOC,OACZlB,KAAKE,WAAWC,MAAQH,KAAKmB,cAAgB,KAC7CnB,KAAKoB,eACLpB,KAAKqB,sBACLrB,KAAKsB,gBACLtB,KAAKiB,OAAOM,WAnKnB,sCA2KuB,iCACZC,EAASxB,KAATwB,MACDC,EAAkB,iBACxB,GAAID,GAAuB,SAAdxB,KAAKrC,KAChB,OAAIqC,KAAKiB,OAAOS,KACP1B,KAAKiB,OAAOS,KAEC,WAAlB1B,KAAK2B,SACP,eAAkB,eAAlB,CACG3B,KAAK4B,YAAY,MAAjB,mBAA4C,KAC5C5B,KAAK4B,YAAY,MAAjB,+BAAwC,UAAxC,SAC6C5B,KAAK6B,WADlD,QAE4C7B,KAAK8B,YAFjD,OAG0CN,GAASA,EAAMO,SAHzD,WAI4C,WACP,EAAKC,YAL1C,CAOER,GAASA,EAAMS,QAAU,OACd,KACbjC,KAAK4B,YAAY,UAAjB,mBAAgD,KAChD5B,KAAK4B,YAAY,UAAjB,mCACW5B,KAAK6B,YAAc7B,KAAK6B,YADnC,UAEU,WACP,EAAK5B,MAAM,aAHd,OAKQuB,GAASA,EAAMU,eALvB,CAMEV,GAASA,EAAMW,YAAc,OAClB,KACbnC,KAAK4B,YAAY,SAAjB,mBAA+C,KAC/C5B,KAAK4B,YAAY,SAAjB,mCACW5B,KAAK6B,YAAc7B,KAAK8B,UADnC,KAEM,SAFN,UAGU,WACP,EAAK7B,MAAM,YAJd,OAMQuB,GAASA,EAAMY,cANvB,CAOEZ,GAASA,EAAMa,WAAa,OACjB,OAGhB,eAAkB,eAAlB,CACGrC,KAAK4B,YAAY,UAAjB,0BAAwD5B,KAAK6B,YAAc7B,KAAK8B,WAAhF,UACuD,WACP,EAAK7B,MAAM,YAF3D,MAIoD,cAJpD,OAKqDuB,GAASA,EAAMU,eALpE,CAMEV,GAASA,EAAMW,YAAc,OACX,KACpBnC,KAAK4B,YAAY,MAAjB,sBAA+C,UAA/C,SACoD5B,KAAK6B,WADzD,QAEmD7B,KAAK8B,WAFxD,MAGgD,eAHhD,OAIiDN,GAASA,EAAMO,SAJhE,WAKmD,WACP,EAAKC,YANjD,CAQER,GAASA,EAAMS,QAAU,OACP,KACpBjC,KAAK4B,YAAY,SAAjB,sBAAkD,SAAlD,SAEuD5B,KAAK6B,YAAc7B,KAAK8B,WAF/E,MACmD,aADnD,OAGoDN,GAASA,EAAMY,YAHnE,WAIsD,WACP,EAAKnC,MAAM,QAAS,EAAKH,mBALxE,CAOE0B,GAASA,EAAMa,WAAa,OACV,SA9O/B,oCAoPqB,0BACjB,OAAIrC,KAAKiB,OAAOqB,MACPtC,KAAKiB,OAAOqB,MACVtC,KAAKwB,OAASxB,KAAKsC,MAC5B,cAAiB,cAAjB,CAA+BtC,KAAKsC,aAD/B,IAvPX,6B,gKA6PQtC,KAAK4B,YAAY,M,oBACf5B,KAAKuC,OAAQvC,KAAKuC,KAAKC,S,gBACX,O,SAAMxC,KAAKwC,W,OAAnBC,E,OACFA,EAAMC,KAAK,SAAAC,GAAE,OAAKA,IACpB3C,KAAK4C,SAASxG,MAAM,cAEpB4D,KAAKC,MAAM,KAAMD,KAAKF,c,sBAGxBE,KAAKC,MAAM,KAAMD,KAAKF,c,gDAtQ9B,gCA2QoBA,GAAgE,WAC1E+C,EAAS,GACTC,EAAa,GACfC,GAAc,EAkBlB,OAjBA/C,KAAKc,WAAW7B,QAAQ,SAACK,EAAOD,GAC9B,IAAM2D,EAAQ,EAAKC,YAAY3D,EAAOQ,EAAcT,GAChDC,EAAM4D,MACJH,GACFD,EAAWA,EAAW/K,OAAS,GAAGM,KAAKiH,EAAM4D,MAC7CL,EAAOA,EAAO9K,OAAS,GAAGM,KAAK2K,KAE/BF,EAAWzK,KAAK,CAACiH,EAAM4D,OACvBL,EAAOxK,KAAK,CAAC2K,KAEfD,GAAc,IAEdA,GAAc,EACdD,EAAWzK,KAAK,IAChBwK,EAAOxK,KAAK,CAAC2K,OAGVH,IAhSX,oCAmSuB3C,GAA2B,WAC9C,OAAKA,EAAWiD,QAGoB,oBAAvBjD,EAAWiD,QACbjD,EAAWiD,QAAQnD,KAAKF,eAEvBI,EAAWiD,QAChBpE,IAAI,SAAAqE,GAAS,OAAI,EAAKC,eAAeD,KACrCV,KAAK,SAAAC,GAAE,OAAKA,IAPVzC,EAAWoD,SAAkC,OAAvBpD,EAAWoD,cAA2C3G,IAAvBuD,EAAWoD,UArS7E,qCAiTyBF,GACrB,IAAKpD,KAAKF,aACR,OAAO,EAEP,IAAMA,EAAeE,KAAKF,aAAasD,EAAUjF,UAC3CoF,EAAeH,EAAU3F,MAC/B,GAAqB,OAAjBqC,QAA0CnD,IAAjBmD,EAA4B,CACvD,OAAQsD,EAAUI,UAChB,IAAK,KACH,OAAOD,EAAaxC,SAASjB,GAC/B,IAAK,QACH,OAAQyD,EAAaxC,SAASjB,GAElC,OAAO,EAEP,OAAQsD,EAAUI,UAChB,IAAK,IACH,OAAOD,EAAaE,aAAe3D,EAAa2D,WAClD,IAAK,IACH,OAAOC,WAAW5D,GAAgB4D,WAAWH,GAC/C,IAAK,IACH,OAAOG,WAAW5D,GAAgB4D,WAAWH,GAC/C,IAAK,KACH,OAAOG,WAAW5D,IAAiB4D,WAAWH,GAChD,IAAK,KACH,OAAOG,WAAW5D,IAAiB4D,WAAWH,GAChD,IAAK,KACH,OAAOA,EAAaxC,SAASjB,GAC/B,IAAK,QACH,OAAQyD,EAAaxC,SAASjB,GAItC,OAAO,IAlVX,kCAqVsBR,EAAwBQ,EAAkET,GAAa,0BAClHsC,EAAY3B,KAAZ2B,SACHlE,EAAQ,KAEVA,EADE6B,EAAMnB,SAAS4C,SAAS,KAClBlB,EAAuBP,EAAMnB,SAASwF,OAAO,EAAGrE,EAAMnB,SAASyF,YAAY,MAAO9D,GAElFA,EAENR,EAAMzE,OAAS,OAAMqD,SAClBoB,EAAMkC,MAGTlC,EAAMkC,MAAMA,MAAQxB,KAAKwB,MAFzBlC,EAAMkC,MAAQ,CAACA,MAAOxB,KAAKwB,OAI7BlC,EAAMkC,MAAMqC,QAAU7D,KAAK6D,SAE7B,IAAMC,EAAS9D,KAAKa,YAAYvB,GAEhC,8BACS,EAAc7B,EAAOqG,GAD9B,MAKSA,EALT,KAMQ9D,KAAK+D,eAAezE,GAN5B,QAOyB,YAAdU,KAAKrC,KAPhB,SAQYqC,KAAK6B,WARjB,QASW7B,KAAKiB,OAAO3B,EAAM0E,MAT7B,WAUc1E,EAVd,UAYaQ,EAZb,SAaY6B,GAbZ,UAEW,SAACpC,GACR,EAAc9B,EAAOqG,EAAQvE,KAHjC,IAWO,SAAWD,EAAMnB,SAAW,IAAMkB,MAlX7C,qCAwXI,OAAOW,KAAKiE,mBAAmBjE,KAAKF,gBAxXxC,yCAmY6BA,GAAgE,iCAClF0B,EAASxB,KAATwB,MACD0C,EAAgB,eAAiBlE,KAAK2B,UACtCkB,EAAS7C,KAAKmE,UAAUrE,GACxBsE,EAAYpE,KAAKqE,eACvB,0BAA6BD,GAA7B,KAC0B,QAD1B,IAE0BpE,KAAKsE,cAF/B,CAGGtE,KAAKiB,OAAOsD,SACXvE,KAAKE,WAAWC,OAASH,KAAKwE,UAAYxE,KAAKmB,cAAgB,KAChEK,GAASA,EAAMiD,OAAS5B,EAAO6B,OAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAEvE,OAAOwE,KACtD/B,EAAO9D,IAAI,SAAC8F,GAAD,OAAW,EAAKC,UAAUD,KACxC7E,KAAK+E,4BACL/E,KAAKiB,OAAO+D,WAhZnB,4CAoZ6B,iCACnBvD,EAAkB,iBACxB,GAAIzB,KAAKE,WAAWC,OAAuB,SAAdH,KAAKrC,KAChC,0BACS,CACLsH,OAAO,EACPC,KAAM,OACNC,SAAUnF,KAAK6B,aAJnB,OAMQ,MANR,UAOW,WACP,EAAKuD,kBART,YAvZN,mCAqaIpF,KAAKF,aAAazH,KAAK,MAra3B,kDAwamC,iCACzBoJ,EAAkB,iBACxB,OAAO4D,OAAOC,UAAUtF,KAAKuF,aAA6B,YAAdvF,KAAKrC,MAAwC,YAAlBqC,KAAK2B,SAArE,eACM,2BADN,MACwC,CAAC6D,UAAW,UADpD,sBAEwBxF,KAAK6B,WAF7B,aAIU,SAJV,KAIwB,UAJxB,UAEkD,WACnD,EAAK5B,MAAM,sBAHV,YAMI,OAhbf,gCAmboB4E,GAAU,0BACpBY,EAAe,iBACdjE,EAASxB,KAATwB,MACP,OAAIxB,KAAK0F,UAA6B,IAAjBb,EAAM9M,OAClB8M,EAET,mBAA6BrD,GAASA,EAAMmE,QAAU,IAAtD,CAA0Dd,MAzb9D,kCA6bqB3E,GACjB,IAAM0F,EAAY5F,KAAK+D,eAAe7D,GAAY2F,KAAK,KACjDC,EAAsB9F,KAAK,SAASD,OAAO6F,GACjD,OAAIE,GACFA,EAAYC,QAAwB,YAAd/F,KAAKrC,KAC3BmI,EAAYE,UAAYhG,KAAK6B,aAAe7B,KAAKiG,WAC1CH,GAEA,IAAII,WAAW,CACpB5D,MAAOpC,EAAWoC,MAClBnC,MAAOD,EAAWC,MAClBtF,KAAMqF,EAAWrF,KACjBsL,KAAMjG,EAAWiG,KACjB3G,UAAWU,EAAWV,UACtBuG,QAAuB,YAAd/F,KAAKrC,KACdqI,UAAWhG,KAAK6B,aAAe7B,KAAKiG,WACpCvJ,KAAMwD,EAAW/B,SACjBiI,KAAMpG,KAAKqG,eAAenG,GAC1B0F,UAAW5F,KAAK+D,eAAe7D,GAAY2F,KAAK,KAChDnG,aAAc,+BAAkBQ,EAAW/B,UAC3CqD,MAAOxJ,OAAOsO,OAAO,GAAIpG,EAAWsB,OACpC8B,QAAStD,KAAKuG,cAAcrG,GAC5BsG,SAAUtG,EAAWsG,SACrBzG,OAAQG,EAAWH,OACnB0G,aAAc,GACdC,OAAQ,GACRC,kBAAkB,EAClBC,aAAc,KACdC,WAAY,aAEZC,SAAS,EACTrJ,MAAO,SA5df,kCAieqBzC,GACjB,QAASgF,KAAKsE,WAAWtJ,KAle7B,qCAqesB,iCACZoJ,EAAYpM,OAAOsO,OAAO,GAAItG,KAAKwB,OACzC,GAAIxB,KAAK0F,SAAU,CACjB,IAAMpD,EAAQtC,KAAKiB,OAAOqB,OAAStC,KAAKsC,MAChB,OAApBtC,KAAKuF,iBAA2C5I,IAApBqD,KAAKuF,WACnCnB,EAAU9B,MAAV,eAA8B,CAC5ByD,QAAS,OACTgB,eAAgB,kBAFlB,WAISzE,EAAQ,MAAQtC,KAAKuF,WAAa,GAAK,MAC7CvF,KAAKuF,WAAa,EAAlB,aAAgC,CAACyB,MAAO,UAAWC,OAAQ,WAA3D,UACkC,WACP,EAAKhH,MAAM,kBAAmB,EAAKsF,eAF9D,0BAIe,YAJf,OAMM,OAGTnB,EAAU9B,MAAQA,EAKtB,OAFA8B,EAAUK,OAASzE,KAAKyE,OACxBL,EAAUe,SAAWnF,KAAKkH,eACnB9C,IA7fX,iCAqgBI,IAAMrE,EAASC,KAAKD,OACpB,OAAIA,EAAOhI,OACF+B,QAAQ+C,IAAIkD,EAAOhB,IAAI,SAAA4D,GAAE,OAAIA,EAAGH,cAElC,OAzgBX,qCA4gByBlD,GACrB,OAAIU,KAAKmH,WACAnH,KAAKmH,WAAW/G,OAAOd,EAAMnB,UAE7BmB,EAAMnB,SAASwC,MAAM,OAhhBlC,qCAohByBrB,GACrB,OAAIU,KAAKmH,WACAnH,KAAKmH,WAAW/G,OAAOd,EAAMnB,UAE7B,CAACmB,EAAMnB,YAxhBpB,iCA0FI,IAAM4B,EAASC,KAAKE,WAAWH,OAC/B,MAAsB,WAAlB,eAAOA,GACF/H,OAAOgH,KAAKe,GAChBqH,OAAO,SAAArJ,GAAG,OAAIgC,EAAOhC,KACrBgB,IAAI,SAAAhB,GAAG,OAAI,eACVI,SAAUJ,GACPgC,EAAOhC,MAGNgC,EAA6BqH,OAAO,SAAAzE,GAAE,OAAW,OAAPA,QAAsBhG,IAAPgG,MAnGvE,2BAwKI,OAAO3C,KAAKqH,MAAM9E,OAxKtB,+BA4XI,OAAOvC,KAAK2B,WAAa,SA5X7B,gCAgYI,OAAO3B,KAAK2B,WAAa,SAhY7B,qCAigBI,OAAO3B,KAAK6B,YAAc7B,KAAK8B,YAjgBnC,iCA6hBI,OAAO9B,KAAK,SAASmF,WA7hBzB,gCAiiBI,OAAOnF,KAAK,SAASsH,UAjiBzB,iCAqiBI,OAAOtH,KAAK,SAASuH,aAriBzB,GAAsC,KAGpC,QADC,eAAKvP,S,iCAGN,QADC,eAAK,CAAC6C,KAAM2M,OAAQC,QAAS,a,+BAG9B,QADC,eAAK,CAAC5M,KAAM7C,OAAQyP,QAAS,iBAAO,O,4BAGrC,QADC,eAAK,CAAC5I,MAAO7G,U,4BAGd,QADC,eAAK,CAAC6C,KAAM2M,OAAQC,QAAS,U,2BAG9B,QADC,eAAK,CAAC5M,KAAM6M,QAASD,SAAS,K,6BAG/B,QADC,eAAKzP,S,4BAGN,QADC,kB,4BAGD,QADC,eAAK,CAAC6C,KAAMwK,U,iCAGb,QADC,eAAKxG,Q,iCAGN,QADC,kB,8BAMD,QADC,eAAM,eAAgB,CAAC8I,MAAM,K,kCAI7B,MAGD,QADC,eAAM,gB,iCAYN,MAGD,QADC,eAAM,a,8BAGN,MAGD,QADC,eAAM,QAAS,CAACC,WAAW,EAAMD,MAAM,K,2BAkBvC,MAtEkB,EAAQ,QAH5B,eAAU,CACTjL,KAAM,cAEa,a,2HC/BrB,gJAwBamL,EAAQ,SAACC,GAAD,OAAsB,mBAAMA,GAAOA,EAAMA,EAAM,CAACA,GAAO,IAiBtE,SAAUC,EAAKD,EAAUE,EAAeC,GAC5C,GAAI,mBAAMH,IAAQ,mBAAMA,IACtB,GAAIG,GACF,IAAK,IAAIpQ,EAAYiQ,EAAI/P,OAAS,EAAGF,GAAK,EAAGA,IAC3C,IAA4B,IAAxBmQ,EAASF,EAAIjQ,GAAIA,GACnB,YAIJ,IAAK,IAAI,EAAI,EAAGE,EAAS+P,EAAI/P,OAAQ,EAAIA,EAAQ,IAC/C,IAA4B,IAAxBiQ,EAASF,EAAI,GAAI,GACnB,YAID,GAAI,mBAAMA,GAAM,CACrB,IAAI/J,EACJ,IAAKA,KAAO+J,EACV,GAAI9P,OAAOE,eAAeC,KAAK2P,EAAK/J,KACF,IAA5BiK,EAASF,EAAI/J,GAAMA,GACrB,QAsBJ,SAAUgB,EAAI+I,EAAUE,EAAeC,GAC3C,IAAMC,EAAM,mBAAMJ,IAAQ,mBAAMA,GAAO,GAAK,GAa5C,OAZAC,EACID,EACA,SAACK,EAAMpK,GACL,IAAMN,EAAQuK,EAASG,EAAMpK,GACzB,mBAAMmK,GACPA,EAAY7P,KAAKoF,GAElByK,EAAInK,GAAON,GAGfwK,GAEGC,EAqDH,SAAUE,EAAMN,EAAUE,EAAeC,GAC7C,IAAIC,GAAM,EAWV,OAVAH,EACID,EACA,SAACK,EAAMpK,GACL,IAAKiK,EAASG,EAAMpK,GAElB,OADAmK,GAAM,GACC,GAGXD,GAEGC,I,yGC9IHG,G,4DAAQ9K,OAAO,UACf+K,EAAQ/K,OAAO,SAEf,SAAUgL,EAAkBC,EAAqBC,GACrD,IAAIC,EAAcD,EACdE,EAAYH,EACS,kBAAdG,IAETD,EAAcC,EACdA,EAAY,GAGd3I,KAAK4I,KAAO,EACZ5I,KAAKwI,MAAQG,EACb3I,KAAK6I,OAAS7I,KAAK8I,YAASnM,EAC5BqD,KAAK+I,QAAU,IAAIC,IAEfN,IACF1I,KAAKsG,OAAOoC,GACRC,EAAY,IACd3I,KAAKwI,MAAQxI,KAAK4I,OAKxB,SAASK,EAAiBlL,EAAUN,GAClCuC,KAAKjC,IAAMA,EACXiC,KAAKvC,MAAQA,EACbuC,KAAKqI,QAAS1L,EACdqD,KAAKsI,QAAS3L,EAuKhB,SAASuM,EAAyBC,GAChCnJ,KAAKoJ,MAAQD,EAgBf,SAASE,EAAuBF,GAC9BnJ,KAAKoJ,MAAQD,EAgBf,SAASG,EAAyBH,GAChCnJ,KAAKoJ,MAAQD,EAvMfZ,EAAOtQ,UAAUsR,iBAAmB,SAASH,GACvCA,IAAUpJ,KAAK8I,SAQfM,EAAMf,KACJe,IAAUpJ,KAAK6I,SACjB7I,KAAK6I,OAASO,EAAMf,IAEtBe,EAAMf,GAAOC,GAASc,EAAMd,IAE1Bc,EAAMd,KACRc,EAAMd,GAAOD,GAASe,EAAMf,IAE9Be,EAAMf,QAAS1L,EACfyM,EAAMd,GAAStI,KAAK8I,OAChB9I,KAAK8I,SACP9I,KAAK8I,OAAOT,GAASe,GAEvBpJ,KAAK8I,OAASM,IAGhBb,EAAOtQ,UAAUqO,OAAS,SAASmC,GACjC,IAAIW,EACAZ,EAAQxI,KAAKwI,OAASnD,OAAOmE,UACjCxJ,KAAK+I,QAAQU,QAEb,IADA,IAAM9G,EAAK8F,EAAQlL,OAAOyK,YACjB0B,EAAM/G,EAAGgH,QAASD,EAAIE,KAAMF,EAAM/G,EAAGgH,OAAQ,CACpD,IAAMhQ,EAAI,IAAIsP,EAAMS,EAAIjM,MAAM,GAAIiM,EAAIjM,MAAM,IAS5C,GARAuC,KAAK+I,QAAQc,IAAIlQ,EAAEoE,IAAKpE,GACnByP,GAGHA,EAAMf,GAAS1O,EACfA,EAAE2O,GAASc,GAHXpJ,KAAK6I,OAASlP,EAKhByP,EAAQzP,EACQ,IAAZ6O,IACF,MAAM,IAAInN,MAAM,YAGpB2E,KAAK8I,OAASM,EACdpJ,KAAK4I,KAAO5I,KAAK+I,QAAQH,MAG3BL,EAAOtQ,UAAUoF,IAAM,SAASU,GAE9B,IAAMqL,EAAQpJ,KAAK+I,QAAQ1L,IAAIU,GAC/B,GAAKqL,EAKL,OADApJ,KAAKuJ,iBAAiBH,GACfA,EAAM3L,OAGf8K,EAAOtQ,UAAU4R,IAAM,SAAS9L,EAAUN,GACxC,IAAI2L,EAAQpJ,KAAK+I,QAAQ1L,IAAIU,GAE7B,OAAIqL,GAEFA,EAAM3L,MAAQA,EACduC,KAAKuJ,iBAAiBH,GACfpJ,OAITA,KAAK+I,QAAQc,IAAI9L,EAAMqL,EAAQ,IAAIH,EAAMlL,EAAKN,IAE1CuC,KAAK8I,QAEP9I,KAAK8I,OAAOT,GAASe,EACrBA,EAAMd,GAAStI,KAAK8I,QAGpB9I,KAAK6I,OAASO,EAIhBpJ,KAAK8I,OAASM,IACZpJ,KAAK4I,KACH5I,KAAK4I,KAAO5I,KAAKwI,OAEnBxI,KAAKxH,QAGAwH,OAGTuI,EAAOtQ,UAAUO,MAAQ,WAEvB,IAAM4Q,EAAQpJ,KAAK6I,OACnB,GAAIO,EAeF,OAdIpJ,KAAK6I,OAAOR,IAEdrI,KAAK6I,OAAS7I,KAAK6I,OAAOR,GAC1BrI,KAAK6I,OAAOP,QAAS3L,IAGrBqD,KAAK6I,YAASlM,EACdqD,KAAK8I,YAASnM,GAIhByM,EAAMf,GAASe,EAAMd,QAAS3L,EAC9BqD,KAAK+I,QAAQe,OAAOV,EAAMrL,OACxBiC,KAAK4I,KACA,CAACQ,EAAMrL,IAAKqL,EAAM3L,QAQ7B8K,EAAOtQ,UAAU8R,KAAO,SAAShM,GAC/B,IAAMpE,EAAIqG,KAAK+I,QAAQ1L,IAAIU,GAC3B,OAAOpE,EAAIA,EAAE8D,WAAQd,GAGvB4L,EAAOtQ,UAAU+R,IAAM,SAASjM,GAC9B,OAAOiC,KAAK+I,QAAQiB,IAAIjM,IAG1BwK,EAAOtQ,UAAU6R,OAAS,SAAS/L,GACjC,IAAMqL,EAAQpJ,KAAK+I,QAAQ1L,IAAIU,GAC/B,GAAKqL,EAwBL,OArBApJ,KAAK+I,QAAQe,OAAOV,EAAMrL,KACtBqL,EAAMf,IAAUe,EAAMd,IAExBc,EAAMd,GAAOD,GAASe,EAAMf,GAC5Be,EAAMf,GAAOC,GAASc,EAAMd,IACnBc,EAAMf,IAEfe,EAAMf,GAAOC,QAAS3L,EAEtBqD,KAAK6I,OAASO,EAAMf,IACXe,EAAMd,IAEfc,EAAMd,GAAOD,QAAS1L,EAEtBqD,KAAK8I,OAASM,EAAMd,IAGpBtI,KAAK6I,OAAS7I,KAAK8I,YAASnM,EAG9BqD,KAAK4I,OACEQ,EAAM3L,OAGf8K,EAAOtQ,UAAUwR,MAAQ,WAEvBzJ,KAAK6I,OAAS7I,KAAK8I,YAASnM,EAC5BqD,KAAK4I,KAAO,EACZ5I,KAAK+I,QAAQU,SAOfP,EAAcjR,UAAUsF,OAAOyK,UAAY,WACzC,OAAOhI,MAETkJ,EAAcjR,UAAU0R,KAAO,WAC7B,IAAMM,EAAMjK,KAAKoJ,MACjB,OAAIa,GACFjK,KAAKoJ,MAAQa,EAAI5B,GACV,CAACuB,MAAM,EAAOnM,MAAO,CAACwM,EAAIlM,IAAKkM,EAAIxM,SAEnC,CAACmM,MAAM,EAAMnM,WAAOd,IAQ/B0M,EAAYpR,UAAUsF,OAAOyK,UAAY,WACvC,OAAOhI,MAETqJ,EAAYpR,UAAU0R,KAAO,WAC3B,IAAMM,EAAMjK,KAAKoJ,MACjB,OAAIa,GACFjK,KAAKoJ,MAAQa,EAAI5B,GACV,CAACuB,MAAM,EAAOnM,MAAOwM,EAAIlM,MAEzB,CAAC6L,MAAM,EAAMnM,WAAOd,IAQ/B2M,EAAcrR,UAAUsF,OAAOyK,UAAY,WACzC,OAAOhI,MAETsJ,EAAcrR,UAAU0R,KAAO,WAC7B,IAAMM,EAAMjK,KAAKoJ,MACjB,OAAIa,GACFjK,KAAKoJ,MAAQa,EAAI5B,GACV,CAACuB,MAAM,EAAOnM,MAAOwM,EAAIxM,QAEzB,CAACmM,MAAM,EAAMnM,WAAOd,IAI/B4L,EAAOtQ,UAAU+G,KAAO,WACtB,OAAO,IAAIqK,EAAYrJ,KAAK6I,SAG9BN,EAAOtQ,UAAUiS,OAAS,WACxB,OAAO,IAAIZ,EAActJ,KAAK6I,SAGhCN,EAAOtQ,UAAUwQ,QAAU,WACzB,OAAOzI,MAGTuI,EAAOtQ,UAAUsF,OAAOyK,UAAY,WAClC,OAAO,IAAIkB,EAAclJ,KAAK6I,SAGhCN,EAAOtQ,UAAUgH,QAAU,SAASkL,EAAkDC,GACpF,IAAIC,EAAcD,EACS,WAAvB,eAAOC,KACTA,EAAcrK,MAEhB,IAAIoJ,EAAQpJ,KAAK6I,OACjB,MAAOO,EACLe,EAAIhS,KAAKkS,EAAajB,EAAM3L,MAAO2L,EAAMrL,IAAKiC,MAC9CoJ,EAAQA,EAAMf,IAKlBE,EAAOtQ,UAAUqS,OAAS,WACxB,IAAMnR,EAAI,IAAI0F,MAAMmB,KAAK4I,MACrB/Q,EAAI,EACJuR,EAAQpJ,KAAK6I,OACjB,MAAOO,EACLjQ,EAAEtB,KAAO,CAACkG,IAAKqL,EAAMrL,IAAKN,MAAO2L,EAAM3L,OACvC2L,EAAQA,EAAMf,GAEhB,OAAOlP,GAIToP,EAAOtQ,UAAUwL,SAAW,WAC1B,IAAItK,EAAI,GACJiQ,EAAQpJ,KAAK6I,OACjB,MAAOO,EACLjQ,GAAKqO,OAAO4B,EAAMrL,KAAO,IAAMqL,EAAM3L,MACrC2L,EAAQA,EAAMf,GACVe,IACFjQ,GAAK,OAGT,OAAOA,I,0KCvTY,EAArB,kJAA0C,eAAO,SAG/C,QADC,kB,4BAFkB,EAAY,QAHhC,eAAU,CACTuD,KAAM,kBAEa,W,qBCPjB,EAAS,WAAa,IAAI6N,EAAIvK,KAASwK,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,MAAyB,YAAjBD,EAAIK,SAAwBF,EAAG,WAAWH,EAAIM,GAAGN,EAAIO,GAAG,CAACC,MAAM,CAAC,YAAYR,EAAIS,WAAW,WAAWT,EAAI/I,OAAM,GAAO+I,EAAIjG,YAAY,CAAmB,SAAjBiG,EAAIK,SAAqBF,EAAG,MAAM,CAACO,YAAY,yBAAyB,CAACP,EAAG,UAAU,CAACK,MAAM,CAAC,KAAO,KAAK,KAAO,UAAUL,EAAG,MAAM,CAACO,YAAY,mBAAmB,CAACV,EAAIW,GAAG,WAAW,GAAqB,SAAjBX,EAAIK,SAAqBF,EAAG,WAAW,CAACK,MAAM,CAAC,SAAWR,EAAIY,OAAOhG,WAAW,CAACoF,EAAIW,GAAG,cAAcX,EAAIa,KAAKb,EAAIc,GAAG,YAAY,GAAGX,EAAG,mBAAmBH,EAAIM,GAAGN,EAAIO,GAAG,GAAG,mBAAmBP,EAAI/I,OAAM,GAAO+I,EAAIjG,YAAY,CAACoG,EAAG,MAAM,CAACY,MAAM,CAACnG,SAAWoF,EAAIY,OAAOhG,WAAW,CAACuF,EAAG,IAAI,CAACO,YAAY,wBAAwB,CAACP,EAAG,SAAS,CAACK,MAAM,CAAC,KAAO,aAAa,GAAGL,EAAG,IAAI,CAACO,YAAY,mBAAmB,CAACV,EAAIW,GAAG,qBAAqBR,EAAG,IAAI,CAACO,YAAY,kBAAkBM,SAAS,CAAC,YAAchB,EAAIiB,GAAGjB,EAAIkB,cAC15BC,EAAkB,GC+BP,MAAIC,OAAO,CACxBjP,KAAM,aACN8E,MAAO,CACL/D,MAAO,CAAC5C,KAAM,CAAC2M,OAAQ3I,QACvB+M,SAAU,CAAC/Q,KAAM6M,QAASD,SAAS,GACnCmD,SAAUpD,OACViE,KAAMjE,QAERjQ,KARwB,WAStB,MAAO,CACLyT,SAAU,KAGda,SAAU,CACRrK,MADQ,WAEN,IAAMA,EAAaxJ,OAAOsO,OAAO,GAAItG,KAAKmL,QAM1C,MALsB,SAAlBnL,KAAK4K,SACPpJ,EAAMoJ,SAAW,eACU,YAAlB5K,KAAK4K,iBACPpJ,EAAMoJ,SAERpJ,MCrDsY,I,wBCQ/YsK,EAAY,eACd,EACA,EACAJ,GACA,EACA,KACA,KACA,MAIa,EAAAI,E,oBCZT,EAAN,gMAKe,mBACJrO,EAASuC,KAATvC,MACP,iBAAcA,QAPlB,GAAgC,KAG9B,QADC,kB,4BAFG,EAAiB,QAHtB,eAAU,CACTf,KAAM,kBAEF,GAYS,QCVT,G,oBAAN,gMAOe,0BACJwD,EAAqBF,KAArBE,WAAYzC,EAASuC,KAATvC,MACbsO,EAAU,GAAW7L,GAC3B,GAAIzC,EAAO,CACT,IAAIuO,EAAW,GAMf,OAJEA,EADEhM,KAAKE,WAAWC,MACP4L,EAAQ3E,OAAO,SAAAzE,GAAE,OAAIlF,EAAMsD,SAAS4B,EAAG,EAAKsJ,kBAE5CF,EAAQ3E,OAAO,SAAAzE,GAAE,OAAIlF,IAAUkF,EAAG,EAAKsJ,iBAEpD,UAAcD,EAASjN,IAAI,SAAA4D,GAAE,OAAIA,EAAG,EAAKuJ,iBAAgBrG,KAAK,OAE9D,mBAnBN,oCAwBI,OAAO7F,KAAKE,WAAWsB,MAAMyK,eAAiB,UAxBlD,oCA4BI,OAAOjM,KAAKE,WAAWsB,MAAM2K,eAAiB,YA5BlD,GAA2B,MAGzB,QADC,kB,4BAGD,QADC,eAAKnU,S,iCAJF,EAAY,QAHjB,eAAU,CACT0E,KAAM,wBAEF,GAgCS,QCjCT,EAAN,gMAOe,mBACJe,EAASuC,KAATvC,MACP,GAA6B,SAAzBuC,KAAKE,WAAWrF,KAClB,iBAAcmF,KAAKvC,QAErB,IAAI2O,EAAS,sBAIb,MAH6B,SAAzBpM,KAAKE,WAAWrF,OAClBuR,EAAS,cAEX,yCAAoB3O,IAApB,cAAmC2O,SAhBvC,GAA2B,KAGzB,QADC,kB,4BAGD,QADC,eAAKpU,S,iCAJF,EAAY,QAHjB,eAAU,CACT0E,KAAM,sBAEF,GAqBS,Q,qBC3BA,GACbA,KAAM,sBACN8E,MAAO,CACLuK,QAASlN,MACTsN,cAAe,CAACtR,KAAM2M,OAAQC,QAAS,SACvCwE,cAAe,CAACpR,KAAM2M,OAAQC,QAAS,UAEzC4E,OAPa,WAOP,0BACEC,EAAiBtM,KAAK8L,UACtBS,EAAkBvM,KAAKwM,gBAC7B,0BACSxM,KAAKmL,QADd,OAEMnL,KAAKsE,cAFX,CAIItE,KAAK+L,QAAQhN,IAAI,SAAA0N,GACf,IAAMjL,EAAQ,GAGd,OAFAA,EAAM,EAAKkL,WAAaC,GAAkBF,EAAQ,EAAKN,eACvD3K,EAAM,EAAKoL,WAAaD,GAAkBF,EAAQ,EAAKR,eACvD,mBAA+BzK,KAA/B,CACsB,SAAnB,EAAKkL,UAAuBlL,EAAM,EAAKkL,WAAa,YAM/Db,SAAU,CACRa,UADQ,WAEN,MAAO,SAETE,UAJQ,WAKN,MAAO,SAETd,UAPQ,WAQN,MAAO,IAETU,gBAVQ,WAWN,MAAO,MCpCE,GACbK,OAAQ,CAAC,GACTrL,MAAO,CACLsL,OAAQpF,SAEVmE,SAAU,CACRa,UADQ,WAEN,MAAO,QAETE,UAJQ,WAKN,MAAO,SAETd,UAPQ,WAQN,MAAO,qBAETU,gBAVQ,WAWN,OAAIxM,KAAK8M,OACA,qBAEF,iBCnBE,GACbD,OAAQ,CAAC,GACTrL,MAAO,CACLsL,OAAQpF,SAEVmE,SAAU,CACRa,UADQ,WAEN,MAAO,QAETE,UAJQ,WAKN,MAAO,SAETd,UAPQ,WAQN,MAAO,kBAETU,gBAVQ,WAWN,OAAIxM,KAAK8M,OACA,kBAEF,cCnBE,GACbD,OAAQ,CAAC,GACThB,SAAU,CACRC,UADQ,WAEN,MAAO,aAETU,gBAJQ,WAKN,MAAO,eCTE,GACbH,OADa,WACP,mBACJ,mB,+qBCWG,IAEWU,EAKAC,EAPLC,EAAc,eAE3B,SAAkBF,GAChB,iBACA,wBAFF,CAAkBA,MAAI,KAKtB,SAAkBC,GAChB,yBACA,iBACA,qBACA,2BACA,eACA,qBACA,yBACA,iBACA,mBACA,iBACA,qBACA,iBACA,uBACA,qBACA,qBACA,uBACA,kCACA,mBACA,mBACA,iBACA,qBArBF,CAAkBA,MAAK,KAwBvB,IAAME,EAAmD,CACvDnH,QAAS,CACPoH,QAAS,GACTC,OAAQ,IAEVC,KAAM,CACJF,QAAS,GACTC,OAAQ,KAICE,EAAU,UACVC,EAAS,SAElBC,EAAgB,SAChBC,EAAe,QACfC,EAAe,QACfC,EAAkB,WAClBC,EAAiB,UACjBC,EAAkB,YAUhBC,EAAwD,GACxDC,EAAqD,GAE9CC,EAAkB,SAAClC,EACAnK,EACA9G,GAE+E,IAD/EoT,EAC+E,uDAD3D,KACpBC,EAA+E,uDAAd,iBAAO,IACtGC,EAAarC,EAAWnK,EAAU9G,EAAMoT,EAAUC,GAAU,IAEjDE,EAAW,SAACtC,EACAnK,EACA0M,GAE+E,IAD/EJ,EAC+E,uDAD3D,KACpBC,EAA+E,uDAAd,iBAAO,IAC/FC,EAAarC,EAAWnK,EAAU0M,EAAOJ,EAAUC,GAAU,IAGzDC,EAAe,SAAfA,EAAgBrC,EACAwC,EACAD,GAGuB,IAFvBJ,EAEuB,uDAFI,KAC3B,EACuB,uDADwC,iBAAO,IACtEM,EAAuB,uCAC3C,GAAI1P,MAAMC,QAAQuP,GAChBA,EAAMpP,QAAQ,SAAApE,GACZsT,EAAarC,EAAWwC,EAAWzT,EAAMoT,EAAU,EAAUM,UAE1D,GAAI1P,MAAMC,QAAQwP,GACvBA,EAAUrP,QAAQ,SAAA0C,GAChBwM,EAAarC,EAAWnK,EAAU0M,EAAOJ,EAAU,EAAUM,SAE1D,CACL,IAAMC,EAAM,CACV1C,YACAnK,SAAU2M,EACVzT,KAAMwT,EACNJ,WACAC,SAAU,SAAChO,GACT,IAAMsB,EAAa,EAAStB,EAAYoO,IAAc,GAOtD,OANIpO,EAAWoC,OAASgM,IAAcf,IACpC/L,EAAMiN,YAAcvO,EAAWoC,MAAMvK,OAAS,EAAI,EAAImI,EAAWoC,MAAMvK,QAErEmI,EAAWsB,OACbxJ,OAAOsO,OAAO9E,EAAOtB,EAAWsB,OAE3BA,IAGL7D,EAAO4Q,EAAa,UAAY,OAChCG,EAAUxB,EAAMvP,GAAM2Q,GACvBI,EAAQL,KACXK,EAAQL,GAAS,KAEF,IAAbJ,EACFS,EAAQL,GAAO,GAAKG,GACE,IAAbP,EACTS,EAAQL,GAAO,GAAKG,EAEpBE,EAAQL,GAAO,GAAKG,EAElBD,EACFR,EAA4B1V,KAAKmW,GAEjCV,EAA+BzV,KAAKmW,KAuBpC,SAAUG,KACdtQ,QAAQuQ,KAAK,wBACbpB,EAAgB,SAChBC,EAAe,QACfC,EAAe,QACfC,EAAkB,WAClBC,EAAiB,UACjBC,EAAkB,YAClBO,EAAS,iBAAkBd,EAAS,CAACN,EAAM6B,YAAY,GACvDT,EAAS,UAAWd,EAAS,CAACN,EAAM8B,OAAQ9B,EAAM+B,MAAM,GACxDX,EAAS,aAAcd,EAAS,CAACN,EAAMgC,OAAO,GAC9CZ,EAAS,gBAAiBd,EAAS,CAACN,EAAMiC,KAAMjC,EAAMkC,KAAMlC,EAAMmC,MAAOnC,EAAMoC,WAAW,EAAO,SAAClP,GAAD,MAAyB,CAACvC,KAAMuC,EAAWrF,KAAKwU,iBACjJjB,EAAS,gBAAiBd,EAAS,CAACN,EAAMsC,OAAO,EAAO,SAACpP,GAAD,MAAyB,CAACvC,KAAMuC,EAAWrF,KAAKwU,iBACxGjB,EAAS,iBAAkBd,EAAS,CAACN,EAAMuC,OAAQvC,EAAMwC,QAASxC,EAAMyC,SAAS,GACjFrB,EAAS,WAAYd,EAASN,EAAM0C,SACpCtB,EAAS,WAAYd,EAASN,EAAM2C,OAAQ,KAAM,SAAAzP,GAChD,MAAO,CAAC0P,0BAA0B,EAAOhE,SAAU1L,EAAWC,SAEhEiO,EAAS,EAAYd,EAASN,EAAM6C,OAAQ,KAAM,SAAArB,GAChD,MAAO,CAAC5C,SAAU4C,EAAIrO,SAExBiO,EAAS,mBAAoBd,EAASN,EAAM8C,cAAc,GAC1D1B,EAAS,gBAAiBd,EAASN,EAAM8C,cAAc,GACvD1B,EAAS,iBAAkBd,EAAS,SACpCc,EAAS,SAAUd,EAASN,EAAM+C,MAClC3B,EAAS,aAAcd,EAASN,EAAMgD,UAAU,EAAO,SAAAxB,GACrD,IAAMjX,EAAQiX,EAAIhN,OAASgN,EAAIhN,MAAMyO,YAAezB,EAAIrI,MAAQ,GAC1D8J,EAAa1Y,EAAKwH,IAAI,SAACoJ,GAC3B,MAAoB,kBAATA,EACF,CAACpK,IAAKoK,EAAM7F,MAAO6F,GAEnB,CACLpK,KAAMoK,EAAKpK,KAAOoK,EAAK1K,OAAOgG,WAC9BnB,MAAO6F,EAAK7F,OAAS6F,EAAK+H,MAC1BC,YAAahI,EAAKgI,aAAehI,EAAK+H,MACtC/K,SAAUgD,EAAKhD,WAAY,KAIjC,MAAO,CAAC8K,gBAEV7B,EAAS,WAAYd,EAASN,EAAMoD,OAAO,EAAO,WAChD,MAAO,CAACA,OAAO,KAIb,SAAUC,KACdhS,QAAQuQ,KAAK,mBACbpB,EAAgB,UAChBC,EAAe,SACfC,EAAe,SACfC,EAAkB,YAClBC,EAAiB,WACjBC,EAAkB,WAClB,IAAI/B,UAAU,gBAAiB,GAC/B,IAAIA,UAAU,kBAAmB,GACjC,IAAIA,UAAU,eAAgB,GAC9BsC,EAAS,WAAYd,EAAS,CAACN,EAAM8B,OAAQ9B,EAAM+B,MAAM,GACzDX,EAAS,WAAYd,EAAS,CAACN,EAAMgC,OAAO,EAAO,WACjD,MAAO,CAACnU,KAAM,cAEhBuT,EAAS,iBAAkBd,EAAS,CAACN,EAAMiC,KAAMjC,EAAMkC,KAAMlC,EAAMmC,MAAOnC,EAAMoC,WAAW,EACzF,SAAClP,GAAD,MAAyB,CAACrF,KAAMqF,EAAWrF,KAAKwU,iBAClDjB,EAAS,kBAAmBd,EAAS,CAACN,EAAMuC,OAAQvC,EAAMwC,QAASxC,EAAMyC,SAAS,GAClFrB,EAAS,YAAad,EAAS,CAACN,EAAM0C,UAAU,GAChDtB,EAAS,gBAAiBd,EAAS,CAACN,EAAM2C,QAAS,KAAM,SAAAzP,GACvD,MAAO,CAAC0L,SAAU1L,EAAWC,SAE/BiO,EAAS,eAAgBd,EAAS,CAACN,EAAM8C,eAAe,GACxD1B,EAAS,kBAAmBd,EAAS,CAACN,EAAM8C,eAAe,GAGvD,SAAUQ,KACdjS,QAAQuQ,KAAK,2BAEbR,EAAS,UAAWb,EAAQ,CAACP,EAAM8B,OAAQ9B,EAAM+B,MAAM,GACvDX,EAAS,qBAAsBb,EAAQ,CAACP,EAAMiC,KAAMjC,EAAMoC,SAAUpC,EAAMsC,OAAO,EAAO,SAACpP,GAAD,MAAyB,CAACvC,KAAMuC,EAAWrF,KAAKwU,iBACxIjB,EAAS,UAAWb,EAAQ,CAACP,EAAMwC,QAASxC,EAAMuC,OAAQvC,EAAMyC,SAAS,EACvE,SAACvP,GACC,MAAO,CAACrF,KAAMqF,EAAWrF,KAAKwU,gBAAkBrC,EAAMuC,OAAS,QAAU,SAAU/J,UAAW,WAElG4I,EAAS,aAAcb,EAAQ,CAACP,EAAMgC,OAAO,GAC7CZ,EAAS,gBAAiBb,EAAQ,CAACP,EAAM0C,UAAU,GACnDtB,EAAS,wBAAyBb,EAAQ,CAACP,EAAM2C,SAAS,GAC1DvB,EAAS,qBAAsBb,EAAQ,CAACP,EAAM2C,SAAS,GACvDvB,EAAS,kBAAmBb,EAAQ,CAACP,EAAM8C,eAAe,GAC1D1B,EAAS,eAAgBb,EAAQ,CAACP,EAAM8C,eAAe,GAxGzD,IAAIhE,UAAU,QAAS,GAEvBkC,EAAgB,EAAkB,CAACV,EAASC,GAAS,CAACP,EAAMoC,SAAUpC,EAAMiC,OAC5EjB,EAAgB,EAAmB,CAACV,EAASC,GAAS,CAACP,EAAM8B,OAAQ9B,EAAMgC,KAAMhC,EAAM+B,IAAK/B,EAAMwC,QAASxC,EAAMuC,OAAQvC,EAAMyC,SAAS,GACxIzB,EAAgB,EAAoB,CAACV,EAASC,GAAS,CAACP,EAAM2C,OAAQ3C,EAAM8C,cAAe,MAC3F1B,EAAS,EAAc,CAACd,EAASC,GAASP,EAAM9O,QAAQ,EAAO,SAACgC,EAAYyB,GAC1E,MAAO,CACLA,WACAzB,WAAY,CAACH,OAAQG,EAAWH,WAGpCiO,EAAgB,EAAc,CAACV,EAASC,GAASP,EAAM9O,QAAQ,EAAO,SAACgC,EAAYyB,GACjF,MAAO,CACLA,WACAzB,WAAY,CAACH,OAAQG,EAAWH,WA6FpC,IAAMwQ,GAAkB,CACtBzE,UAAW,QACXoC,SAAU,SAACsC,GAAD,MAAQ,KAGpB,SAASC,GAAY9S,EAAYgE,EAAoBzB,GACnD,IAAMwO,EAAUxB,EAAMvP,GAAMgE,GAAUzB,EAAWrF,MACjD,IAAK6T,EACH,OAAO6B,GAET,GAAIrQ,EAAWC,MAAO,CACpB,IAAI+H,EAAMqI,GAIV,OAHI7B,EAAQ,KACVxG,EAAMwG,EAAQ,IAETA,EAAQ,IAAMA,EAAQ,IAAMxG,EAEnC,OAAOwG,EAAQ,IAAMA,EAAQ,GAI1B,IAAMgC,GAAe,SAAC/O,EAAoBzB,GAC/C,OAAOuQ,GAAY1D,EAAKM,KAAM1L,EAAUzB,IAG7ByQ,GAAsB,SAAChP,EAAoBzB,GACtD,OAAOuQ,GAAY1D,EAAKhH,QAASpE,EAAUzB,IAGhC,GAAa,SAACA,GACzB,OAAIA,EAAWiG,KACNjG,EAAWiG,KAEhBjG,EAAWsB,OAAStB,EAAWsB,MAAMuK,QACC,oBAA7B7L,EAAWsB,MAAMuK,QACnB7L,EAAWsB,MAAMuK,WAAa,GACQ,WAApC,eAAO7L,EAAWsB,MAAMuK,SAC1B7L,EAAWsB,MAAMuK,SAAW,QAD9B,EAIA,IAIE6E,GAAkB,SAACtR,GAC9B,MAA2C,kBAAhCA,EAAMI,aAAaC,SACrB,KAELL,EAAMzE,OAASmS,EAAMoD,MAChB,GACE9Q,EAAMzE,OAASmS,EAAM9O,OAC1BoB,EAAMa,MACD,CAAC,IAED,GAGFb,EAAMa,MAAQ,GAAK,MAKjB0Q,GAAmB,SAAClP,GAC/B,OAAOA,IAAa2L,EAAUE,EAAgB,UAGnCsD,GAAkB,WAC7B,OAAOrD,GAGIsD,GAAkB,WAC7B,OAAOrD,GAGIsD,GAAqB,WAChC,OAAOrD,GAGIsD,GAAoB,WAC/B,OAAOrD,GAGIjB,GAAoB,SAA2BF,EAAatO,GACvE,MAAsB,kBAAXsO,EACFA,EACsB,kBAAbtO,EACTsO,EAAOtO,GACe,oBAAbA,EACTA,EAASsO,QADX,GAKH,SAAUyE,GAAQC,EAAY7R,EAAwB8R,GAC1D,IAAMvW,EAAOyE,EAAMzE,KACfwW,EAAe,SACnB,GAAI/R,EAAMa,MACRkR,EAAe,aACV,GAAa,WAATxW,EACTwW,EAAe,cACV,GAAIxW,IAASmS,EAAMwC,QACxB6B,EAAe,eACV,GAAIxW,IAASmS,EAAMuC,OACxB8B,EAAe,cACV,GAAIxW,IAASmS,EAAM9O,OACxBmT,EAAe,cACV,GAAIxW,IAASmS,EAAMiC,MAAQpU,IAASmS,EAAMoC,UAAYvU,IAASmS,EAAMkC,MAAQrU,IAASmS,EAAMmC,MACjGkC,EAAe,YACV,GAAIxW,IAASmS,EAAM2C,QAAU9U,IAASmS,EAAM8C,aAAc,CAC/D,IAAM/D,EAAU,GAAWzM,GACvByM,EAAQhU,SACVsZ,EAAe,eAAO1E,GAAkBZ,EAAQ,GAAIzM,EAAMkC,OAASlC,EAAMkC,MAAMyK,eAAiB,gBAEzFpR,IAASmS,EAAM6B,YACxBwC,EAAe,SAEjBD,EAAKvW,KAAOwW,EACZF,EAAM9Y,KAAK+Y,GAGN,IAAME,GAAqB,SAAC3P,GACjC,MAAoB,WAAbA,EAAwB,YAAckM,I,0CCjX/CpU,EAAOD,QAAU+X,K,yLCAjB,4CAAO,IAAMC,EACTC,MAAQlT,QAAUmT,GAAUC,SAAS,cAATA,K,mSCkChC,SAASC,EAAW7U,GAClB,MAAa,MAANA,GAAmB,OAANA,GAAoB,OAANA,GAAoB,OAANA,GAAoB,OAANA,EAGhE,SAAS0G,EAASqE,GAChB,OAAKA,EAGD,mBAAMA,GACAA,EAAiBjC,KAAK,KAEzB,mBAAMiC,GAAOA,EAAM,GALjB,GAQX,IAAM+J,EAAY,IAAI,OAAO,KAEvB,SAAUC,EAAgB1L,GAC9B,GAAI,mBAAMA,GACR,OAAOA,EAET,GAAI,mBAAMA,IAASA,EAAM,CACvB,IAAM2L,EAASF,EAAUxU,IAAI+I,GAC7B,GAAI2L,EACF,OAAOA,EAKT,IAHA,IAAMC,EAAW5L,EAAgBzF,MAAM,KACjCsR,EAAQ,GAELpa,EAAI,EAAGA,EAAIma,EAAQja,OAAQF,IAAK,CACvC,IAAI0B,EAAIyY,EAAQna,GAEhB,MAA2B,OAApB0B,EAAEA,EAAExB,OAAS,SAAkC4E,IAAnBqV,EAAQna,EAAI,GAC7C0B,EAAIA,EAAEkF,MAAM,GAAI,GAAK,IACrBlF,GAAKyY,IAAUna,GAGjBoa,EAAM5Z,KAAKkB,GAGb,OADAsY,EAAUhI,IAAIzD,EAAM6L,GACbA,EAET,OAAI,mBAAM7L,GACD,CAACA,GAEH,G,IAGH8L,E,WAaJ,WAAYlD,EAAcmD,GAA4B,uBACpDnS,KAAKgP,KAAOA,EACZhP,KAAKX,MAAQ,EACbW,KAAKmS,SAAWA,EAChBnS,KAAKoS,MAAQpS,KAAKqS,iBAClBrS,KAAKsS,iBAAmB,EACxBtS,KAAKuS,eAAiB,EACtBvS,KAAKwS,YAAc,EACnBxS,KAAKyS,cAAgB,E,uDAOrB,IAHA,IAAIC,EAAO,GACPC,EAAO,GACLjZ,EAAIsG,KAAKgP,KAAKjX,OACbiI,KAAKX,MAAQ3F,EAAGsG,KAAKX,QAC1BqT,EAAO1S,KAAKgP,KAAK4D,OAAO5S,KAAKX,OAC7BW,KAAK6S,IAAMnZ,EAAI,IAAMsG,KAAKX,MAC1BW,KAAKoS,MAAMM,EAAMC,GACjBA,EAAOD,I,gCAKT,OAAO1S,KAAKgP,KAAK8D,UAAU9S,KAAKsS,iBAAkBtS,KAAKuS,kB,yCAG9BG,EAAcC,GAC1B,MAATD,GACF1S,KAAKwS,eAEDxS,KAAKwS,aAAexS,KAAKyS,iBAC3BzS,KAAKoS,MAAQpS,KAAK+S,sBAEfnB,EAAWe,KACd3S,KAAKgT,YAAchT,KAAKgP,KAAK8D,UACzB9S,KAAKiT,iBACLjT,KAAKX,QAIXW,KAAKmS,SAASa,YAAYhT,KAAKgT,aAC/BhT,KAAKmS,SAASe,oBACTlT,KAAKwS,aAAgBxS,KAAKyS,gBAC7BzS,KAAKX,MAAQW,KAAKgP,KAAKjX,SAEP,MAAT2a,GACT1S,KAAKyS,iBAEDzS,KAAKwS,aAAexS,KAAKyS,iBAC3BzS,KAAKoS,MAAQpS,KAAK+S,sBAEfnB,EAAWe,KACd3S,KAAKgT,YAAchT,KAAKgP,KAAK8D,UACzB9S,KAAKiT,iBACLjT,KAAKX,QAGXW,KAAKmS,SAASa,YAAYhT,KAAKgT,aAC/BhT,KAAKmS,SAASgB,mBACTnT,KAAKwS,aAAgBxS,KAAKyS,gBAC7BzS,KAAKX,MAAQW,KAAKgP,KAAKjX,UAEhB6Z,EAAWc,IAAkB,MAATA,GAAyB,MAATA,KACxCd,EAAWe,KACd3S,KAAKgT,YAAchT,KAAKgP,KAAK8D,UACzB9S,KAAKiT,iBACLjT,KAAKX,QAGNuS,EAAWc,KACd1S,KAAKoS,MAAQpS,KAAK+S,qBAClB/S,KAAKmS,SAASa,YAAYhT,KAAKgT,YAAsB,MAATN,O,2CAKrBA,GACd,MAATA,GACF1S,KAAKwS,cACLxS,KAAKmS,SAASiB,uBACI,MAATV,GACT1S,KAAKyS,gBACLzS,KAAKmS,SAASkB,sBACJzB,EAAWc,KACrB1S,KAAKoS,MAAQpS,KAAKsT,mBAClBtT,KAAKiT,iBAAmBjT,KAAKX,MAC7BW,KAAKX,W,kCAIWqT,EAAcC,GAC5Bf,EAAWc,IACb1S,KAAKuS,eAAiBvS,KAAKX,MAC3BW,KAAKmS,SAASzV,KAAKsD,KAAKuT,YACfvT,KAAK6S,MACd7S,KAAKuS,eAAiBvS,KAAKX,MAAQ,EACnCW,KAAKmS,SAASzV,KAAKsD,KAAKuT,c,uCAIHb,GACV,MAATA,GAAyB,MAATA,GAClB1S,KAAKoS,MAAQpS,KAAK+S,qBAClB/S,KAAKX,SACKuS,EAAWc,KACrB1S,KAAKsS,iBAAmBtS,KAAKX,MAC7BW,KAAKoS,MAAQpS,KAAKwT,iB,KAKlBC,EAAgB,SAACC,GACrB,IAAK,mBAAMA,GACT,OAAOA,EAGT,IAAI/T,EAIAgU,EACAC,EAJEC,EAAQ,GACVC,EAAQ,GACRC,EAAU,GAiEd,OA7DA,IAAI7B,EAAkBwB,EAAe,CACnChX,KADmC,SAC9BqB,GACH6V,EAAO7V,GAETiV,YAJmC,SAIvBjV,EAAKiW,GACf,GAAKjW,EAAL,CAIA,GADA+V,EAAQ/V,EACJiW,EAGF,OAFAD,EAAUhW,OACV4V,EAAehU,GAGb,mBAAMA,GACPA,EAAsBtH,KAAK0F,GACnB,wBAAW4B,KACpBA,EAASoU,GAAWJ,IAAiBhU,EAAWoU,EAAUhW,GAAOA,GAEnEgW,EAAU,GACVJ,EAAehU,IAEjB0T,mBAtBmC,WAuB5B1T,EAIHA,EAAW,IAHXiU,EAAO,GACPjU,EAAWiU,GAIb,IAAMK,EAAOJ,EAAMA,EAAM9b,OAAS,GAC9B,wBAAWkc,GACbA,EAAKH,GAASnU,EACL,mBAAMsU,IACfA,EAAK5b,KAAKsH,GAEZkU,EAAMxb,KAAKsH,IAEbyT,oBArCmC,WAsC5BzT,EAIHA,EAAW,IAHXiU,EAAO,GACPjU,EAAWiU,GAIb,IAAMK,EAAOJ,EAAMA,EAAM9b,OAAS,GAC9B,wBAAWkc,GACbA,EAAKH,GAASnU,EACL,mBAAMsU,IACfA,EAAK5b,KAAKsH,GAEZkU,EAAMxb,KAAKsH,IAEbwT,iBApDmC,WAqDjCU,EAAMK,MACNvU,EAAWkU,EAAMA,EAAM9b,OAAS,IAElCmb,kBAxDmC,WAyDjCW,EAAMK,MACNvU,EAAWkU,EAAMA,EAAM9b,OAAS,MAEjCoc,QACIP,GAGHQ,EAAW,SAACC,EAAUC,GAC1B,IAAMC,EAAmB,SAAnBA,EAAoBC,EAAkBpO,GAC1C,GAAI,mBAAMoO,GACR,OAAOF,EAASE,EAAaA,GAE/B,eAAKA,EAAa,SAACrM,EAAWpK,GAC5B,IAAM0W,EAAUrO,EAAKhG,OAAOrC,GACxB,mBAAMoK,IAAS,wBAAWA,GAC5BoM,EAAiBpM,EAAMsM,GAEvBH,EAASG,EAAStM,MAKxB,OAAOoM,EAAiBF,EAAK,KAGzBK,EAAY,SAACL,EAAUC,GAC3B,IAAMC,EAAmB,SAAnBA,EAAoBC,EAAkBpO,GAC1C,OAAO,eAAIoO,EAAa,SAACrM,EAAWpK,GAClC,IAAM0W,EAAUrO,EAAKhG,OAAOrC,GAC5B,OAAI,mBAAMoK,IAAS,wBAAWA,GACrBoM,EAAiBpM,EAAMsM,GAEvBH,EACHG,EACAA,EAAQhW,MAAM,EAAGgW,EAAQ1c,OAAS,GAAGqI,OAAO+H,OAMtD,OAAOoM,EAAiBF,EAAK,KAGzBM,EAAoB,SAACvO,GACzB,IAAMqO,EAAU3C,EAAgB1L,GAC1BwO,EAAUH,EAAQA,EAAQ1c,OAAS,GACnC8c,EAAYJ,EAAQhW,MAAM,EAAGgW,EAAQ1c,OAAS,GAC9C4H,EAAW8T,EAAcmB,GAC/B,MAAO,CACLxO,KAAMqO,EACNG,UACAC,YACAlV,aAIEmV,EAAa,SAAC1O,GAClB,IAAMxN,EAAS,GACTmc,EAASJ,EAAkBvO,GACjC,OAAI,mBAAM2O,EAAOpV,UACRyG,EACE2O,EAAOpV,UAChByU,EAASW,EAAOpV,SAAU,SAACqV,EAAcjX,GACvCnF,EAAOP,KAAK,CACV+N,KAAM2O,EAAOF,UAAUzU,OAAO4U,GAC9BH,UAAWE,EAAOF,UAClBI,QAASD,EACTjX,UAGGnF,GAEAwN,GAIL8O,EAAe,SAAC7X,GACpB,IAAM8X,EAAQ,IAAInM,IAClB,OAAO,SAACqL,EAAUjO,EAAY3I,GAC5B,IAAI2X,EAAM,KAQV,OANKD,EAAM9X,IAAI+I,GAIbgP,EAAMD,EAAM9X,IAAI+I,IAHhBgP,EAAMT,EAAkBvO,GACxB+O,EAAMtL,IAAIzD,EAAMgP,IAIb,mBAAMA,EAAIzV,WAAc,wBAAWyV,EAAIzV,UAGrC+U,EAAUU,EAAIzV,SAAU,SAAC0V,EAAStX,GACvC,OAAOV,EAAIgX,EAAKe,EAAIP,UAAUzU,OAAOrC,EAAIA,EAAIhG,OAAS,OAH/CsF,EAAIgX,EAAKjO,EAAM3I,KAQtB6X,EAAkB,SAACC,EAAgBC,GACvC,IAAML,EAAQ,IAAInM,IAClB,OAAO,SACHqL,EACAjO,EACA3I,EACAgY,GAEF,IAAIC,EAAa,GAOjB,OANKP,EAAM9X,IAAI+I,GAIbsP,EAAQP,EAAM9X,IAAI+I,IAHlBsP,EAAQZ,EAAW1O,GACnB+O,EAAMtL,IAAIzD,EAAMsP,IAIb,mBAAMA,IAGPA,GAASA,EAAM3d,QACjB,eAAK2d,EAAO,YAAuC,EAArCL,QAAqC,IAA5BtX,EAA4B,EAA5BA,IAAK8W,EAAuB,EAAvBA,UAAWI,EAAY,EAAZA,QACrCM,EACIlB,EACAQ,EAAUzU,OAAOrC,GACjByX,EAAc/X,EAAOwX,GACrBQ,KAIDpB,GAZEkB,EAAOlB,EAAKjO,EAAM3I,EAAOgY,KAgBhCE,EAAiB,SAAC3L,GACtB,IAAMmL,EAAQ,IAAInM,IAClB,OAAO,SAACqL,EAAUjO,GAChB,IAAIsP,EAAa,GAOjB,OANKP,EAAM9X,IAAI+I,GAIbsP,EAAQP,EAAM9X,IAAI+I,IAHlBsP,EAAQZ,EAAW1O,GACnB+O,EAAMtL,IAAIzD,EAAMsP,IAIb,mBAAMA,MAGPA,IAASA,EAAM3d,SACV,eAAM2d,EAAO,YAAqB,IAAnBb,EAAmB,EAAnBA,UAAW9W,EAAQ,EAARA,IAC/B,OAAOiM,EAAIqK,EAAKQ,EAAUzU,OAAOrC,MAJ5BiM,EAAIqK,EAAKjO,KAYtB,SAASwP,EAAOvB,EAAUjO,EAAY3I,GACpC,IAAK,mBAAM4W,KAASjO,EAClB,OAAOiO,EAGT,IAAMwB,EAAWpS,EAAS2C,GAE1B,GAAIyP,KAAYxB,EACd,OAAOA,EAAIwB,GAKb,IAHA,IAAIC,EAAUzB,EACRrC,EAAUF,EAAgB+D,GAEvBhe,EAAI,EAAGA,EAAIma,EAAQja,OAAQF,IAAK,CACvC,IAAKG,OAAOC,UAAU8d,qBAAqB5d,KAAK2d,EAAS9D,EAAQna,IAC/D,OAAO4F,EAKT,GAFAqY,EAAUA,EAAQ9D,EAAQna,SAEV8E,IAAZmZ,GAAqC,OAAZA,EAAkB,CAM7C,GAAIje,IAAMma,EAAQja,OAAS,EACzB,OAAO0F,EAGT,OAIJ,OAAOqY,EAGT,SAASE,EACL3B,EACAjO,EACA3I,EACAgY,GAEF,IAAIK,EAAUzB,EACd,GAAK,mBAAMyB,IAAa1P,EAAxB,CAIA,IAAMyP,EAAWpS,EAAS2C,GAE1B,GAAIyP,KAAYC,EACdA,EAAQD,GAAsBpY,OAMhC,IAFA,IAAMuU,EAAUF,EAAgB+D,GAEvBhe,EAAI,EAAGA,EAAIma,EAAQja,OAAQF,IAAK,CACvC,IAAM0B,EAAIyY,EAAQna,GAClB,IAAK,mBAAMie,EAAQvc,IAAK,CACtB,QAAmBoD,IAAfmZ,EAAQvc,SAA8BoD,IAAVc,EAC9B,OAEF,GAAI,QAAQwY,KAAKjE,EAAQna,EAAI,EAAI,KAC/B,GAAI4d,EAAW,CACb,IAAMS,EAAST,EAAUzD,EAAQvT,MAAM,EAAG5G,IAErCqe,GAA0B,UAAhBA,EAAOrb,KAGpBib,EAAQvc,GAAK,GAFbuc,EAAQvc,GAAK,QAKfuc,EAAQvc,GAAK,QAGfuc,EAAQvc,GAAK,GAIb1B,IAAMma,EAAQja,OAAS,IACzB+d,EAAQvc,GAAKkE,GAGfqY,EAAUA,EAAQvc,KAItB,SAAS4c,EAAU9B,EAAUjO,GAC3B,IAAI0P,EAAUzB,EACd,GAAK,mBAAMyB,IAAa1P,EAAxB,CAIA,IAAMyP,EAAWpS,EAAS2C,GAE1B,GAAIyP,KAAYC,SACPA,EAAQD,QAMjB,IAFA,IAAM7D,EAAUF,EAAgB+D,GAEvBhe,EAAI,EAAGA,EAAIma,EAAQja,OAAQF,IAAK,CACvC,IAAM0B,EAAIyY,EAAQna,GAElB,GAAIA,IAAMma,EAAQja,OAAS,EAMzB,YALI,mBAAM+d,GACRA,EAAQ7c,OAAOM,EAAa,UAErBuc,EAAQvc,IAOnB,GAFAuc,EAAUA,EAAQvc,IAEb,mBAAMuc,GACT,SAKN,SAASM,EAAS/B,EAAUjO,GAC1B,IAAK,mBAAMiO,KAASjO,EAClB,OAAO,EAGT,IAAMyP,EAAWpS,EAAS2C,GAE1B,GAAIyP,KAAYxB,EACd,OAAO,EAKT,IAHA,IAAIyB,EAAUzB,EACRrC,EAAUF,EAAgB+D,GAEvBhe,EAAI,EAAGA,EAAIma,EAAQja,OAAQF,IAAK,CACvC,IAAI,mBAAMie,GAOR,OAAO,EANP,KAAM9D,EAAQna,KAAMie,GAClB,OAAO,EAGTA,EAAUA,EAAQ9D,EAAQna,IAM9B,OAAO,EAGF,IAAMwe,EAAQnB,EAAaU,GACrBU,EAAQhB,EAAgBU,EAAQK,GACrBf,EAAgBa,EAAWE,GAC5BV,EAAeS,I,qPClkBtC,SAAS,EAAqBG,EAAeC,EAAWC,GACtDzW,KAAK0W,UAAUzX,QAAQ,SAAA0X,GACrB,IAAMja,EAAOia,EAAMC,SAASL,cACxB7Z,IAAS6Z,EACXI,EAAM1W,MAAMvH,MAAMie,EAAO,CAACH,GAAWpW,OAAOqW,IAE5C,EAAU/d,MAAMie,EAAO,CAACJ,EAAeC,GAAWpW,OAAO,CAACqW,OAQhE,IAAqB,EAArB,gMAEkBF,EAAuBC,EAAgBC,GACrD,IAAII,EAAS7W,KAAK8W,SAAW9W,KAAK+W,MAC9Bra,EAAOma,EAAOD,SAASla,KAC3B,MAAOma,KAAYna,GAAQA,IAAS6Z,GAClCM,EAASA,EAAOC,QACZD,IACFna,EAAOma,EAAOD,SAASla,MAGvBma,GACFA,EAAO5W,MAAMvH,MAAMme,EAAQJ,EAAS,CAACD,GAAWpW,OAAOqW,GAAiB,CAACD,MAZ/E,gCAgBmBD,EAAeC,EAAWC,GACzC,EAAUte,KAAK6H,KAAMuW,EAAeC,EAAWC,OAjBnD,GAAqC,KAAhB,EAAO,QAH3B,eAAU,CACT/Z,KAAM,aAEa,W,yDCRA,EAArB,yMAewB,0BACpB,GAAwB,YAApBsD,KAAKkN,MAAMvP,KACb,OAAO,KAET,IAAMqZ,EAAe,iBACjBvV,EAAkB,iBACO,WAAzBzB,KAAKmL,OAAOxJ,WACdF,EAAkB,YAEpB,IAAMwV,EAAmB,GACrBjX,KAAKkX,aAAelX,KAAKkX,YAAYjS,QACvCgS,EAAYE,MAAQ,QAEtB,IAAMrK,EAAS,EAAH,kBAA6B9M,KAAKoX,YAAlC,gBAC8BpX,KAAKkN,QAAUlN,KAAKkN,MAAM/H,UAAYnF,KAAKkN,MAAM5F,SAD/E,KAGyB,QAHzB,MAE2B2P,GAF3B,OAI2Bjf,OAAOsO,OAAO,GAAItG,KAAKkX,gBAJlD,CAIiElX,KAAKqX,YAAc,OAChG,OAAIrX,KAAKsX,QACP,eAAmB,CAACC,OAAQ,cAA5B,CAA2CzK,IAE7C,iBAA2B9M,KAAKwX,WAAhC,CAA2C1K,MApC/C,mCAwCI9M,KAAKC,MAAM,SAxCf,+BA2Ce,mBACLwF,EAAe,iBACfgS,EAAU,CACdzX,KAAKiB,OAAOwG,QACZzH,KAAK0X,mBAEP,OAAI1X,KAAKsX,QACP,SAAaG,IAEc,WAAzBzX,KAAKmL,OAAOxJ,SACP8V,EAEP,mBAA6BzX,KAAKmL,OAAOxF,QAAU,GAAnD,KAC0B,SAD1B,CACkC8R,QAxDxC,GAA0C,KAExC,QADC,eAAK,CAAC5c,KAAMwK,OAAQoC,QAAS,M,+BAG9B,QADC,eAAKD,S,iCAGN,QADC,eAAKxP,S,kCAGN,QADC,eAAK,CAAC6C,KAAMwK,OAAQoC,QAAS,K,gCAG9B,QADC,eAAK,CAAC5M,KAAM6M,QAASD,SAAS,K,8BAG/B,QADC,eAAO,U,4BAXW,EAAY,QAHhC,eAAU,CACT/K,KAAM,kBAEa,WCgBA,EAArB,YAHA,iD,+DAeS,EAAAoD,aAAoB,KAf7B,EAGA,uFA0D6BA,GACzBE,KAAKC,MAAM,QAASH,GACpBE,KAAKC,MAAM,SAAUH,GACjBE,KAAKV,MAAMqY,UACb3X,KAAKV,MAAMqY,SAAS7X,GAEtBE,KAAKM,iBAhET,mCAoEsB7C,GACduC,KAAKF,eAAiBrC,IACxBuC,KAAKF,aAAerC,KAtE1B,gCA2EIuC,KAAK4X,SAAS,cAAe,sBAAuB,CAAC5X,SA3EzD,mCA+EsBV,GAClBU,KAAK4X,SAAS,cAAe,4BAA6B,CAACtY,MAhF/D,sCAoFIU,KAAK4X,SAAS,cAAe,yBAA0B,CAAC5X,OACxDA,KAAK4X,SAAS,cAAe,+BAAgC,CAAC5X,KAAKV,UArFvE,6CAwF6B,iCAClBkC,EAAmCxB,KAAnCwB,MAAO1B,EAA4BE,KAA5BF,aACR+X,GADoC7X,KAAdE,WACNF,KAAK8X,eACrBC,EAAsBF,EAAc/L,UAC1C,OAAI9L,KAAKyX,QACAzX,KAAKyX,QAEVzX,KAAK+F,SAAW/F,KAAKE,WAAW8X,aACU,oBAAjChY,KAAKE,WAAW8X,aAClBhY,KAAKE,WAAW8X,aAAahY,KAAKF,cAElCE,KAAKE,WAAW8X,aAGvBhY,KAAKV,MAAMa,QAAoC,IAA3B0X,EAAc5J,SAEpC,qBACYjO,KAAKmF,SADjB,QAEWnF,KAAKV,MAAMzE,OAAS,OAAMqD,OAFrC,WAGcsD,EAAM6V,WAHpB,SAKYrX,KAAK2B,SALjB,YAMeH,EAAM0V,YANrB,SAOY1V,EAAMgW,UAPlB,IAIM,QAJN,QAQS,WACL,EAAKS,kBATT,CAYIjY,KAAKF,aAAeE,KAAKF,aAAaf,IAAI,SAACQ,EAAGF,GAC5C,IAAM6Y,EAAYlgB,OAAOsO,OAAO,GAAI9E,EAAO,CACzC2F,WAAY,EAAKf,KAAKhG,OAAOf,KAO/B,OALI,EAAKC,MAAMzE,OAAS,OAAMqD,SAC5Bga,EAAUhY,WAAalI,OAAOsO,OAAO,GAAI4R,EAAUhY,mBAC5CgY,EAAUhY,WAAWC,OAG9B,mBACS+X,GADT,mBAEc7Y,EAFd,SAGY,EAAK8F,SAHjB,MASS5F,EATT,MAU2B,WAAlB,EAAKoC,SAAwB,EAAKrC,MAAMgD,MAAQ,MAVzD,oBAIqB,kBAAW,kJAE5B,OADM6V,EAAc,eAAmBnY,KAAK2B,UADhB,SAEtB3B,KAAKmY,GAAa,WAAY,MAFR,OAG5BnY,KAAKF,aAAa7G,OAAOoG,EAAO,GAHJ,+CAJhC,MAWW,SAACyI,GACR,EAAKsQ,iBAAiBtQ,EAAKzI,WAE5B,OAKX,mBACSmC,GADT,KAEM,QAFN,gBAGYxB,KAAKmF,SAHjB,MAISrF,EAJT,MAK2B,WAAlBE,KAAK2B,SAAwB3B,KAAKV,MAAMgD,MAAQ,MALzD,UAMWtC,KAAKqY,eAtJpB,+BA6Je,mBACJ7W,EAAsCxB,KAAtCwB,MAAOlC,EAA+BU,KAA/BV,MAAOY,EAAwBF,KAAxBE,WAAYyB,EAAY3B,KAAZ2B,SAC7B3B,KAAK+F,UACPvE,EAAMtB,WAAaF,KAAKE,YAE1B,IAAM4L,EAAY9L,KAAKsY,uBACnBnQ,EAAO,KACLoQ,EAAoBvY,KAAKwY,kBACzBxB,EAAe,iBACrB,GAAIrV,IAAa,OAAS,CACxB,IAAM8W,EAAWnZ,EAAMzE,OAAS,OAAMqD,OAAS4N,EAA9B,mBACW9L,KAAK0Y,sBADhB,CAEZ5M,EACA9L,KAAK2Y,iBAGRxQ,EADEjI,EAAWgD,KACN,EAAH,eAAuBhD,EAAWgD,OAAlC,CAAyCuV,IAChB,UAApBvY,EAAWrF,KACbiR,EAEA2M,OAKLtQ,EAFAnI,KAAK+F,QACH/F,KAAKE,WAAWrF,OAAS,OAAMqD,OAC1B4N,EAEA,EAAH,4BAAuB5L,EAAWoC,MAAlC,MAAgDwJ,KAG/CA,EAGX,IAAM8M,EAAa,GAKnB,OAJKtZ,EAAMgE,UACTsV,EAAM7S,QAAU,QAEjBoC,EAAe5Q,KAAKshB,YAAcD,EAC5BzQ,IAnMX,iCAuMI,IAAM7I,EAAQU,KAAKE,WACbiR,EAAQ7R,EAAM6R,OAAS,GAY7B,OAXqB,IAAjBA,EAAMpZ,SACJuH,EAAMkH,UACR,eAAQ2K,EAAO7R,EAAO,CAACkH,UAAU,EAAM/J,QAAS,GAAF,OAAK6C,EAAMgD,MAAX,UAEvB,kBAAdhD,EAAMwZ,KACf,eAAQ3H,EAAO7R,EAAO,CAACwZ,IAAKxZ,EAAMwZ,IAAKrc,QAAS,GAAF,OAAK6C,EAAMgD,MAAX,eAAuBhD,EAAMwZ,OAEpD,kBAAdxZ,EAAMyZ,KACf,eAAQ5H,EAAO7R,EAAO,CAACyZ,IAAKzZ,EAAMyZ,IAAKtc,QAAS,GAAF,OAAK6C,EAAMgD,MAAX,eAAuBhD,EAAMyZ,QAGxE5H,IApNX,8BAuNiB1T,GACbuC,KAAKF,aAAerC,IAxNxB,qCA2NsB,0BACZub,EAAiB,iBACvB,GAAIhZ,KAAKE,WAAW+Y,OAClB,2BAAgCjZ,KAAKE,WAAW+Y,YA9NtD,yCAsOyB,IACd/Y,EAAcF,KAAdE,WACD4L,EAAY9L,KAAKwY,kBACjBhX,EAAa,CACjBgF,SAAUxG,KAAK+F,QAAU,KAAO7F,EAAWsG,SAC3ClE,MAAOpC,EAAWoC,MAClB4N,MAAOhQ,EAAWoC,OAWpB,MATkB,gBAAdwJ,GAA6C,gBAAdA,GACjCtK,EAAM0X,KAAOlZ,KAAKV,MAAMoH,OAAOb,KAAK,KAChCrE,EAAM0X,OACR1X,EAAM2X,aAAc,EACpB3X,EAAM4X,eAAiB,UAEF,iBAAdtN,IACTtK,EAAMpF,MAAQ4D,KAAKV,MAAMoH,OAAOb,KAAK,MAEhCrE,IAvPX,iCA0PiB,WACNlC,EAASU,KAATV,MACP,GAAIU,KAAKE,WAAWrF,OAAS,OAAMqD,QAC9B8B,KAAKqH,MAAMlH,MAAO,CACrB,IAAMA,EAAQH,KAAKqH,MAAMlH,MACnBkZ,EAAiBlZ,EAAMuW,UAAUtP,OAAO,SAAAzE,GAAE,OAAIA,EAAGH,WACvD,OAAO,IAAI1I,QAAQ,SAACC,GAClBD,QAAQ+C,IAAIwc,EAAeta,IAAI,SAAA4D,GAC7B,OAAOA,EAAGH,cACR7G,KAAK,SAACuO,GACJA,EAAOxH,KAAK,SAAAC,GAAE,OAAKA,IACrB5I,GAAQ,GAERA,GAAQ,KAETuf,MAAM,WACPvf,GAAQ,OAId,IAAMoX,EAAQnR,KAAKuZ,WACnB,GAAIpI,EAAMpZ,OAAQ,CAChB,IAAMyhB,EAAY,IAAI,IAAJ,kBACfla,EAAMsG,UAAYuL,IAEfsI,EAAQ,kBACXna,EAAMsG,UAAY5F,KAAKF,cAE1B,OAAO,IAAIhG,QAAQ,SAACC,GAClByf,EAAUhX,SAASiX,EAAO,CAACC,aAAa,GAAO,SAAChT,EAAQiT,GAClDjT,GACFpH,EAAMmD,OAAQ,EACdnD,EAAMoH,OAASA,EAAO3H,IAAI,SAAA3C,GAAK,OAAIA,EAAMK,YAEzC6C,EAAMmD,OAAQ,EACdnD,EAAMoH,OAAS,IAEjB3M,EAAQ,EAAKuF,MAAMmD,WAIzB,OAAO,IAnSX,qCAuSQzC,KAAKF,aACHE,KAAKE,WAAWrF,OAAS,OAAMqD,OACjC8B,KAAKF,aAAazH,KAAK,IAEvB2H,KAAKF,aAAazH,KAAK,MAGrB2H,KAAKE,WAAWrF,OAAS,OAAMqD,OACjC8B,KAAKF,aAAe,CAAC,IAErBE,KAAKF,aAAe,CAAC,QAjT7B,uCAsT2BgI,EAAUzI,GACjCW,KAAKF,aAAaT,GAASyI,EAC3B9H,KAAKqY,QAAQrY,KAAKF,gBAxTtB,oCAuBI,IAAIgM,EAAiC,KASrC,OAPEA,EADE9L,KAAK+F,QACK,eAAoB/F,KAAK2B,SAAU3B,KAAKE,YAExC,eAAaF,KAAK2B,SAAU3B,KAAKE,YAEnB,UAAxB4L,EAAUA,WACZzN,QAAQub,KAAR,YAAkB5Z,KAAKV,MAAMzE,MAA7B,OAAoCmF,KAAKV,MAAMa,MAAQ,OAAS,GAAhE,gBAA0EH,KAAK+F,QAAU,KAAO,KAAhG,OAEK+F,IAhCX,8BAoCI,OAAO,eAAW9L,KAAKV,SApC3B,4BAuCW,IACAA,EAASU,KAATV,MACDkC,EAAaxJ,OAAOsO,OAAO,GAAItG,KAAK8X,cAAc5J,SAAS5O,IAC3DzE,EAAOyE,EAAMzE,KAYnB,OAXIA,IAAS,OAAM8U,QAAU9U,IAAS,OAAMiV,eAC1CtO,EAAMuK,QAAU/L,KAAK+L,SAEnBlR,IAAS,OAAMqD,SACjBsD,EAAMG,SAAW3B,KAAK2B,SACtBH,EAAM7D,KAAOqC,KAAK+F,QAAU,UAAY,OACxCvE,EAAM2F,WAAanH,KAAKoG,MAEtBpG,KAAK+F,gBACAvE,EAAMgF,SAERhF,IAtDX,wCA0JI,OAAO,eAAiBxB,KAAK2B,UAAY,UA1J7C,4BAmOI,OAAO3B,KAAKV,MAAMoH,OAAOb,KAAK,SAnOlC,GAAuC,eAAO,IAG5C,QADC,eAAK7N,S,iCAGN,QADC,eAAK,CAACA,OAAQ6G,S,gCAGf,QADC,eAAK,CAAChE,KAAM6M,QAASD,SAAS,K,8BAG/B,QADC,eAAK,CAAC5M,KAAM2M,OAAQC,QAAS,Y,+BAG9B,QADC,kB,4BAID,QADC,kB,8BAGD,QADC,eAAK,CAAC5M,KAAM6M,QAASD,SAAS,K,+BAG/B,QADC,eAAK5I,Q,2BAGN,QADC,eAAK,CAAC2H,UAAU,K,4BAuCjB,QADC,eAAM,iB,kCAQN,MAGD,QADC,eAAM,QAAS,CAACoB,WAAW,K,2BAK3B,MAOD,QADC,eAAM,QAAS,CAACA,WAAW,K,2BAG3B,MAjFkB,EAAS,QAH7B,eAAU,CACTlL,KAAM,eAEa,a,wHCvBL,WACA1E,OAAOgH,KACPhH,OAAOC,UAAUC,gB,0LCJ7B,EAAS,WAAa,IAAIqS,EAAIvK,KAASwK,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,gBAC/FgB,EAAkB,G,wECSD,EAArB,kJAAuC,KAAlB,EAAS,QAH7B,eAAU,CACThP,KAAM,eAEa,WCV8X,I,YCO/YoP,EAAY,eACd,EACA,EACAJ,GACA,EACA,KACA,KACA,MAIa,EAAAI,E,oBCfF+N,EAA4B,CACvC,CACEzT,KAAM,kBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,aAAcoC,KAAM,OAC/B,CACD0J,KAAM,eACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,aAAcoC,KAAM,OAC/B,CACD0J,KAAM,kBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,aAAcoC,KAAM,UAC/B,CACD0J,KAAM,0BACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,MAAOoC,KAAM,OACxB,CACD0J,KAAM,uBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,MAAOoC,KAAM,OACxB,CACD0J,KAAM,iBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,iBAAkBoC,KAAM,SACnC,CACD0J,KAAM,kBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,iBAAkBoC,KAAM,OACnC,CACD0J,KAAM,eACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,iBAAkBoC,KAAM,OACnC,CACD0J,KAAM,mBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,iBAAkBoC,KAAM,SACnC,CACD0J,KAAM,kBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,iBAAkBoC,KAAM,UACnC,CACD0J,KAAM,mBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,iBAAkBoC,KAAM,OACnC,CACD0J,KAAM,iBACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,QAASoC,KAAM,SAC1B,CACD0J,KAAM,cACN0F,UAAW,kBAAM,iDACjBgO,KAAM,CAACxf,IAAK,QAASoC,KAAM,UAGhB,MAAI,OAAU,CAC3Bqd,OAAQ,CAAC,CACP3T,KAAM,OACN0F,UAAW,kBAAM,kDAChB,CACD1F,KAAM,QACN1J,KAAM,OACNoP,UAAW,EACXkO,SAAUH,M,YC/Dd,IAAII,IAAI,QAEO,UAAI,OAAKC,MAAM,CAC5B9H,MAAO,GAGP+H,UAAW,GAGXC,QAAS,KCZP,G,UAAS,WAAa,IAAI7P,EAAIvK,KAASwK,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACK,MAAM,CAAC,MAAQ,UAAU,CAACL,EAAG,oBAAoBA,EAAG,YAAY,CAACA,EAAG,kBAAkB,CAACmO,YAAY,CAAC,OAAS,OAAO,SAAW,QAAQ9N,MAAM,CAAC,MAAQ,UAAU,CAACL,EAAG,SAAS,CAACA,EAAG,cAAc,CAACH,EAAIW,GAAG,QAAQR,EAAG,cAAc,CAAC2P,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO/P,EAAIgQ,GAAG,WAAW,CAAChQ,EAAIW,GAAG,QAAQX,EAAIiQ,GAAIjQ,EAAU,OAAE,SAASkQ,EAAM1c,GAAK,OAAO2M,EAAG,oBAAoB,CAAC3M,IAAIA,EAAIgN,MAAM,CAAC,MAAQhN,IAAMwM,EAAIiQ,GAAG,EAAQ,SAASrS,GAAM,OAAOuC,EAAG,cAAc,CAAC3M,IAAIoK,EAAK/B,KAAKiU,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO/P,EAAIgQ,GAAGpS,EAAK/B,SAAS,CAACmE,EAAIW,GAAGX,EAAIiB,GAAGrD,EAAK2R,MAAQ3R,EAAK2R,KAAKpd,MAAM,oBAAoB,MAAM,IAAI,GAAGgO,EAAG,oBAAoB,CAACmO,YAAY,CAAC,OAAS,qBAAqB,CAACnO,EAAG,gBAAgB,IAAI,GAAGA,EAAG,qBAAqB,KACxzB,EAAkB,G,wBC2CD,EAArB,YAHA,iD,+DAIU,EAAA7H,OAAiB,GAJ3B,EAGA,6EAII,IAAMA,EAAS,GACfgX,EAAW5a,QAAQ,SAAAyb,GACjB,IAAM3c,EAAM2c,EAAMZ,MAAQY,EAAMZ,KAAKxf,KAAO,KAC5CuI,EAAO9E,GAAO8E,EAAO9E,IAAQ,GAC7B8E,EAAO9E,GAAK1F,KAAKqiB,KAEnB1a,KAAK6C,OAASA,IAVlB,yBAaYuD,GACR,OAAOpG,KAAK2a,QAAQtiB,KAAK,SAAW+N,OAdxC,GAAiC,KAAZ,EAAG,QAHvB,eAAU,CACT1J,KAAM,SAEa,WC5C2W,ICQ5X,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,OAIa,I,QCVf,IAAIud,IAAI,QACR,OAAW3J,qBAEX,IAAI,IAAI,CACNpD,QACA0N,SACAvO,OAAQ,SAAAwO,GAAC,OAAIA,EAAE,MACdC,OAAO,S,gFChBJ9Q,EAAMhS,OAAOC,UAAUC,eAEvBuL,EAAWzL,OAAOC,UAAUwL,SAE5B,SAAUsX,EAAQjT,GAEtB,GAAW,MAAPA,EACF,OAAO,EAIT,GAAmB,mBAARA,EACT,OAAO,EAIT,GAAmB,kBAARA,EACT,OAAO,EAIT,GAAmB,kBAARA,EACT,OAAsB,IAAfA,EAAI/P,OAIb,GAAmB,oBAAR+P,EACT,OAAsB,IAAfA,EAAI/P,OAIb,GAAI8G,MAAMC,QAAQgJ,GAAM,CACtB,GAAmB,IAAfA,EAAI/P,OACN,OAAO,EAET,IAAK,IAAIF,EAAI,EAAGA,EAAIiQ,EAAI/P,OAAQF,IAC9B,QACe8E,IAAXmL,EAAIjQ,IACO,OAAXiQ,EAAIjQ,IACO,KAAXiQ,EAAIjQ,IACO,IAAXiQ,EAAIjQ,GAEN,OAAO,EAGX,OAAO,EAIT,GAAIiQ,aAAezM,MACjB,MAAuB,KAAhByM,EAAIrL,QAIb,GAAIqL,EAAIrE,WAAaA,EACnB,OAAQqE,EAAIrE,YAEV,IAAK,gBACL,IAAK,eACL,IAAK,eACH,OAAoB,IAAbqE,EAAIc,KAIb,IAAK,kBACH,IAAK,IAAM7K,KAAO+J,EAChB,GAAIkC,EAAI7R,KAAK2P,EAAK/J,GAChB,OAAO,EAIX,OAAO,EAMb,OAAO,I,kCC7ET,yBAAyc,EAAG,G,kCCA5c,itB,kPCAMid,G,UAAS,SAAIngB,GAAJ,OAAqB,SAACwZ,GAAD,OACzB,MAAPA,GAAerc,OAAOC,UAAUwL,SAAStL,KAAKkc,KAA/B,kBAAmDxZ,EAAnD,QAENogB,EAAOD,EAAgC,YACvCE,EAAQrc,MAAMC,SAAWkc,EAAkB,SAC3CG,EAAaH,EAAe,UAC5BI,EAAQJ,EAAe,UAEvBK,GADSL,EAAgB,WACjBA,EAAe,WACvBM,EAAQ,SAACxT,GAAD,MAAgD,WAAf,eAAOA,IACrCkT,EAAe,W,qQCQlB,EAArB,YAHA,iD,+DAqBS,EAAA9N,MAAQ,CACbnN,OAAQ,GACRoF,UAAU,EACVmC,SAAS,EACTC,UAAU,EACV5J,KAAM,QA1BV,EAGA,+EA2BqBA,GACjBqC,KAAKkN,MAAMvP,KAAOA,EAClBqC,KAAKM,iBA7BT,sCAiCyBiH,GACrBvH,KAAKkN,MAAM3F,SAAWA,IAlC1B,sCAsCyBpC,GACrBnF,KAAKkN,MAAM/H,SAAWA,IAvC1B,qCA2CwBmC,GACpBtH,KAAKkN,MAAM5F,QAAUA,IA5CzB,gCAiDQtH,KAAK6D,SACP7D,KAAK6D,QAAQ7D,KAAKub,WAlDxB,sCAsDsB,WAClB,OAAO,SAAC7F,GACN,IAAI3V,EAAmB,GAOvB,MANqB,kBAAV2V,EACT3V,EAAO1H,KAAK,EAAK,SAAS0H,OAAO2V,IACxB7W,MAAMC,QAAQ4W,KACvB3V,EAAS2V,EAAM3W,IAAI,SAAAqH,GAAI,OAAI,EAAK,SAASrG,OAAOqG,MAElDrG,EAASA,EAAOqH,OAAO,SAAAzE,GAAE,QAAMA,IACxB,CACL6Y,KAAM,WACJzb,EAAOd,QAAQ,SAAAK,GACbA,EAAMgE,SAAU,KAGpBmY,KAAM,WACJ1b,EAAOd,QAAQ,SAAAK,GACbA,EAAMgE,SAAU,KAGpBoY,QAAS,SAAC3P,GACRhM,EAAOd,QAAQ,SAAAK,GACbA,EAAMkC,MAAQxJ,OAAOsO,OAAOhH,EAAMkC,MAAO,CAACuK,eAG9C4P,cAAe,SAACna,GACdzB,EAAOd,QAAQ,SAAAK,GACbA,EAAMkC,MAAQxJ,OAAOsO,OAAOhH,EAAMkC,MAAOA,MAG7Coa,cAAe,SAACtH,GACdvU,EAAOd,QAAQ,SAAAK,GACbA,EAAMqY,SAAWrD,KAGrBuH,UAAW,SAAC7gB,EAAesZ,GACzBvU,EAAOd,QAAQ,SAAAK,GACC,gBAAVtE,IACFsE,EAAMqY,SAAWrD,UA5F/B,gCAoGgB,WACZtU,KAAKub,QAAUvb,KAAK8b,gBACpB9b,KAAK+b,IAAI,sBAAuB,SAACzc,GAC3BA,GACF,EAAKS,OAAO1H,KAAKiH,KAGrBU,KAAK+b,IAAI,4BAA6B,SAACzc,GACjCA,IACF,EAAK4N,MAAMnN,OAAOT,EAAMsG,WAAatG,KAGzCU,KAAK+b,IAAI,yBAA0B,SAACzc,GAC9BA,EAAM0c,MACR,EAAKjc,OAAO9G,OAAO,EAAK8G,OAAOkc,QAAQ3c,GAAQ,KAGnDU,KAAK+b,IAAI,+BAAgC,SAACzc,GACpCA,UACK,EAAK4N,MAAMnN,OAAOT,EAAMsG,iBAvHvC,GAAwC,eAAO,SAI/B,EAAA+I,aAAe,OACf,EAAA2B,mBAAqB,OACrB,EAAAD,gBAAkB,OAClB,EAAA6L,kBAAoB,OACpB,EAAAC,yBAA2B,OAEzC,QADC,eAAK,CAACthB,KAAM6M,QAASD,SAAS,K,+BAG/B,QADC,eAAK,CAAC5M,KAAM6M,QAASD,SAAS,K,+BAG/B,QADC,eAAK,CAAC5M,KAAM6M,QAASD,SAAS,K,8BAK/B,QADC,kB,4BAUD,QADC,eAAM,OAAQ,CAACG,WAAW,K,0BAI1B,MAGD,QADC,eAAM,WAAY,CAACA,WAAW,K,8BAG9B,MAGD,QADC,eAAM,WAAY,CAACA,WAAW,K,8BAG9B,MAGD,QADC,eAAM,UAAW,CAACA,WAAW,K,6BAG7B,MA7CkB,EAAU,QAH9B,eAAU,CACTlL,KAAM,UAEa,W,UCdrB,EAAW0f,MAAQ,OAEnB,EAAWC,QAAU,SAAC9K,GACpBA,EAAIzF,UAAU,cAAe,GAC7ByF,EAAIzF,UAAU,mBAAoB,EAAWsQ,QAGhC,QCTX7d,OAAOgT,KACThT,OAAOgT,IAAI0I,IAAI,GAGF","file":"js/app.6e7c20b3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-09c05534\":\"ed184db4\",\"chunk-1801a433\":\"16e38e76\",\"chunk-19d65525\":\"7d1690e4\",\"chunk-1a51fca5\":\"5940b622\",\"chunk-1fa84cfa\":\"87b889ad\",\"chunk-29365920\":\"d8a231d3\",\"chunk-507ead8f\":\"065557c2\",\"chunk-571fa56d\":\"7c14602f\",\"chunk-6e540f64\":\"72217c0f\",\"chunk-7052c576\":\"d7c2e78c\",\"chunk-7fae8c5a\":\"e4ffc198\",\"chunk-d419d388\":\"071a6081\",\"chunk-f3c15ee2\":\"f7f07b52\",\"chunk-fa9ee09c\":\"41104d2c\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-571fa56d\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-09c05534\":\"31d6cfe0\",\"chunk-1801a433\":\"31d6cfe0\",\"chunk-19d65525\":\"31d6cfe0\",\"chunk-1a51fca5\":\"31d6cfe0\",\"chunk-1fa84cfa\":\"31d6cfe0\",\"chunk-29365920\":\"31d6cfe0\",\"chunk-507ead8f\":\"31d6cfe0\",\"chunk-571fa56d\":\"cb0e1eb6\",\"chunk-6e540f64\":\"31d6cfe0\",\"chunk-7052c576\":\"31d6cfe0\",\"chunk-7fae8c5a\":\"31d6cfe0\",\"chunk-d419d388\":\"31d6cfe0\",\"chunk-f3c15ee2\":\"31d6cfe0\",\"chunk-fa9ee09c\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&lang=less&\"","import {ArrayPath, ISchema, isFn, Path} from '../types';\nimport {getIn, setIn} from './accessor';\nimport {each, toArr} from './array';\nimport {isEmpty} from './isEmpty';\n\nconst numberRE = /^\\d+$/;\nconst VIRTUAL_BOXES = {};\n\ninterface IRuleDescription {\n  message?: string;\n  pattern?: RegExp | string;\n  required?: boolean;\n  validator?: RuleHandler;\n}\n\ninterface IPathInfo {\n  name: string;\n  path: string[];\n  schemaPath: string[];\n}\n\ntype RuleHandler = (\n    value: any,\n    rule: IRuleDescription,\n    values: object,\n    name: string\n) => string | null;\n\nexport const getSchemaNodeFromPath = (schema: ISchema, path: Path) => {\n  let res = schema;\n  let suc = 0;\n  const copyPath = toArr(path);\n  for (let i = 0; i < copyPath.length; i++) {\n    const key = copyPath[i];\n    if (res && !isEmpty(res.properties)) {\n      res = res.properties[key];\n      suc++;\n    } else if (res && !isEmpty(res.items) && numberRE.test(key as string)) {\n      res = res.items;\n      suc++;\n    }\n  }\n  return suc === copyPath.length ? res : undefined;\n};\n\nexport const schemaIs = (schema: ISchema, type: string) => {\n  return schema && schema.type === type;\n};\n\nexport const isVirtualBox = (name: string) => {\n  return !!VIRTUAL_BOXES[name];\n};\n\nexport const registerVirtualboxFlag = (name: string) => {\n  VIRTUAL_BOXES[name] = true;\n};\n\nconst isVirtualBoxSchema = (schema: ISchema) => {\n  return isVirtualBox(schema.type) || isVirtualBox(schema['x-component']);\n};\n\nconst schemaTraverse = (\n    schema: ISchema,\n    callback: any,\n    path: ArrayPath = [],\n    schemaPath = []\n) => {\n  if (schema) {\n    if (isVirtualBoxSchema(schema)) {\n      path = path.slice(0, path.length - 1);\n    }\n    callback(schema, {path, schemaPath});\n    if (schemaIs(schema, 'object') || schema.properties) {\n      each(schema.properties, (subSchema, key) => {\n        schemaTraverse(\n            subSchema,\n            callback,\n            path.concat(key),\n            schemaPath.concat(key)\n        );\n      });\n    } else if (schemaIs(schema, 'array') || schema.items) {\n      if (schema.items) {\n        callback(\n            schema.items,\n            key => {\n              schemaTraverse(\n                  schema.items,\n                  callback,\n                  path.concat(key),\n                  schemaPath.concat(key)\n              );\n            },\n            path\n        );\n      }\n    }\n  }\n};\n\nexport const calculateSchemaInitialValues = (\n    schema: ISchema,\n    initialValues: any,\n    callback?: (pathInfo: IPathInfo, schema: ISchema, value: any) => void\n) => {\n  initialValues = initialValues || schema.default || {};\n  schemaTraverse(schema, (subSchema, $path, parentPath) => {\n    const defaultValue = subSchema.default;\n    if (isFn($path) && parentPath) {\n      each(toArr(getIn(initialValues, parentPath)), (value, index) => {\n        $path(index);\n      });\n    } else if ($path) {\n      const isVirtualBoxInstance = isVirtualBoxSchema(subSchema);\n      const name = isVirtualBoxInstance\n          ? $path.schemaPath.join('.')\n          : $path.path.join('.');\n      const path = isVirtualBoxInstance ? $path.schemaPath : $path.path;\n      const schemaPath = $path.schemaPath;\n      const initialValue = getIn(initialValues, name);\n      const value = !isEmpty(initialValue) ? initialValue : defaultValue;\n      if (!isEmpty(value)) {\n        setIn(initialValues, name, value);\n      }\n      if (callback && isFn(callback)) {\n        const newPath = {\n          name,\n          path,\n          schemaPath\n        };\n        callback(newPath, subSchema, value);\n      }\n    }\n  });\n  return initialValues;\n};\n","export * from './accessor';\nexport * from './array';\nexport * from './compare';\nexport * from './broadcast';\nexport * from '@/uform/types';\nexport * from './clone';\nexport * from './schema';\nexport * from './lru';\nexport * from './isEmpty';\nexport * from './case';\nexport * from './defer';\nexport * from './stringLength';\nexport * from './globalThis';\n","import camelCase from 'camel-case';\n\nexport {camelCase};\nexport const lowercase = (str: any) => String(str || '').toLowerCase();\n","export function getStructValue(parentValue: object, struct: string | any[] | object) {\n  if (Array.isArray(struct)) {\n    return struct.map(key => getStructValue(parentValue, key));\n  } else if (typeof struct === 'string') {\n    return parentValue && parentValue[struct];\n  } else if (typeof struct === 'object') {\n    const value = {};\n    Object.keys(struct).forEach(key => {\n      const destructValue = struct[key];\n      if (typeof destructValue === 'string') {\n        value[key] = parentValue && parentValue[destructValue];\n      } else {\n        value[key] = getStructValue(parentValue, destructValue);\n      }\n    });\n    return value;\n  }\n}\n\n\nexport function setStructValue(parentValue: object, struct: string | any[] | object, structValue: any) {\n  if (typeof struct === 'string') {\n    parentValue[struct] = structValue;\n  } else if (Array.isArray(struct)) {\n    struct.forEach((key, index) => {\n      parentValue[key] = structValue[index];\n    });\n  } else {\n    Object.keys(struct).forEach(key => {\n      const destructValue = struct[key];\n      if (typeof destructValue === 'string') {\n        parentValue[destructValue] = structValue[key];\n      } else {\n        setStructValue(parentValue, destructValue, structValue[key]);\n      }\n    });\n  }\n}\n","import {getStructValue, setStructValue} from '@/schema-form/utils/destruct';\nimport {IField} from '@/uform/types';\n\nexport const setFieldValue = (parentValue: object, field: IField, v: any) => {\n  if (field.processor) {\n    field.processor.setValue(parentValue, field, v);\n  } else {\n    setStructValue(parentValue, field.destructPath.destruct || field.name, v);\n  }\n};\n\nexport const getFieldValue = (value: any, field: IField<any>) => {\n  if (field.processor) {\n    return field.processor.getValue(value, field);\n  } else {\n    return getStructValue(value, field.destructPath.destruct || field.name);\n  }\n};\n","import FormField from '@/schema-form/field';\nimport {\n  DESKTOP,\n  getButtonComponent,\n  getDefaultValue,\n  getFormComponent,\n  getRowComponent,\n  MOBILE,\n  TYPES\n} from '@/schema-form/utils';\nimport {getFieldValue, setFieldValue} from '@/schema-form/utils/field';\nimport {FormDescriptor, FormProps, Platform, SchemaFormField, ShowFieldCondition} from '@/types/bean';\nimport {Effects, EffectsContext, EffectsHandlers} from '@/types/form';\nimport {IField} from '@/uform/types';\nimport {parseDestructPath} from '@/uform/utils';\nimport {ValidateRules} from 'async-validator';\nimport difference from 'lodash.difference';\nimport eq from 'lodash.eq';\nimport get from 'lodash.get';\nimport Vue, {VNode} from 'vue';\nimport Component from 'vue-class-component';\nimport {Prop, Watch} from 'vue-property-decorator';\n\nfunction getPropertyValueByPath(property: string, currentValue: { [p: string]: any } | Array<{ [p: string]: any }>) {\n  return get(currentValue, property);\n}\n\n\n@Component({\n  name: 'BaseForm'\n})\nexport default class BaseForm extends Vue {\n\n  @Prop(Object)\n  public definition: FormDescriptor;\n  @Prop({type: String, default: 'desktop'})\n  public platform: Platform;\n  @Prop({type: Object, default: () => ({})})\n  public props: FormProps;\n  @Prop([Array, Object])\n  public value: { [key: string]: any } | Array<{ [key: string]: any }>;\n  @Prop({type: String, default: 'edit'})\n  public mode: 'edit' | 'display';\n  @Prop({type: Boolean, default: false})\n  public inline: boolean;\n  @Prop(Object)\n  public rules: ValidateRules;\n  @Prop()\n  public title: VNode | string;\n  @Prop({type: Number})\n  public arrayIndex: number;\n  @Prop(Array)\n  public pathPrefix: string[];\n  @Prop()\n  public effects: Effects;\n  public currentValue: { [key: string]: any } | Array<{ [key: string]: any }> = null;\n  public fields: any[] = [];\n\n  @Watch('currentValue', {deep: true})\n  public currentValueChanged(currentValue: any) {\n    this.$emit('input', currentValue);\n    this.$emit('change', currentValue);\n  }\n\n  @Watch('definitions')\n  public definitionsChanged() {\n    const currentValue = this.currentValue;\n    const value = this.value;\n    if (this.definition.array) {\n      if (difference(currentValue as any[], value as any[])\n        .concat(difference(value as any[], currentValue as any[])).length > 0) {\n        this.buildExtraProperties();\n      }\n    } else if (!eq(currentValue, value)) {\n      this.buildExtraProperties();\n    }\n  }\n\n  @Watch('platform')\n  public platformChanged() {\n    this.$forceUpdate();\n  }\n\n  @Watch('value', {immediate: true, deep: true})\n  public valueChanged(value: any[] | any) {\n    if (value !== this.currentValue) {\n      const currentValue = this.currentValue;\n      if (this.definition.array) {\n        if (difference(currentValue as any[], value as any[])\n          .concat(difference(value as any[], currentValue as any[])).length > 0) {\n          this.currentValue = value || [];\n          this.buildExtraProperties();\n        }\n      } else if (!eq(currentValue, value)) {\n        this.currentValue = value || {};\n        this.buildExtraProperties();\n      }\n    } else if (!value) {\n      this.currentValue = {};\n      this.buildExtraProperties();\n    }\n  }\n\n  public created() {\n    if (this.value) {\n      if (this.definition.array) {\n        if (this.value.length) {\n          this.currentValue = this.value;\n        } else {\n          this.currentValue = [{}];\n        }\n      } else {\n        this.currentValue = this.value;\n      }\n    } else {\n      this.currentValue = this.definition.array ? [{}] : {};\n    }\n    this.buildExtraProperties();\n  }\n\n  get realFields() {\n    const fields = this.definition.fields;\n    if (typeof fields === 'object') {\n      return Object.keys(fields)\n        .filter(key => fields[key])\n        .map(key => ({\n          property: key,\n          ...fields[key]\n        }));\n    } else {\n      return (fields as SchemaFormField[]).filter(it => it !== null && it !== undefined);\n    }\n  }\n\n  public setDefaultValue(property, tmpValue, fieldDef) {\n    let copy = tmpValue;\n    const splits = property.split('.');\n    splits.forEach((name, index) => {\n      if (index < splits.length - 1) {\n        if (!copy[name]) {\n          this.$set(copy, name, {});\n        }\n        copy = copy[name];\n      } else {\n        copy[name] = getDefaultValue(this.createField(fieldDef));\n      }\n    });\n  }\n\n  public buildExtraProperties() {\n    const {value} = this;\n    let currentValue = this.currentValue;\n    this.realFields.forEach(fieldDef => {\n      const field = this.createField(fieldDef);\n      if (typeof field.destructPath.destruct === 'string') {\n        const property = fieldDef.property;\n        if (this.definition.array) {\n          if (!currentValue || !Array.isArray(currentValue)) {\n            currentValue = [];\n          }\n          currentValue.forEach(tmpValue => {\n            if (property.includes('.')) {\n              this.setDefaultValue(property, tmpValue, fieldDef);\n            } else {\n              if (!tmpValue || tmpValue[property] === undefined) {\n                this.$set(tmpValue, property, getDefaultValue(field));\n              } else if (value && value.length) {\n                this.$set(tmpValue, property, value[0][fieldDef.property]);\n              }\n            }\n          });\n        } else {\n          const tmpValue = currentValue;\n          if (property.includes('.')) {\n            this.setDefaultValue(property, tmpValue, fieldDef);\n          } else {\n            if (!tmpValue || tmpValue[property] === undefined) {\n              this.$set(tmpValue, property, getDefaultValue(field));\n            } else if (value) {\n              this.$set(tmpValue, property, value[fieldDef.property]);\n            }\n          }\n        }\n      }\n    });\n  }\n\n  public render() {\n    return <div class=\"schema-form\">\n      {this.$slots.header}\n      {this.definition.array ? this.renderTitle() : null}\n      {this.renderFields()}\n      {this.renderAddFormButton()}\n      {this.renderButtons()}\n      {this.$slots.footer}\n    </div>;\n  }\n\n  get form(): any {\n    return this.$refs.form;\n  }\n\n  private renderButtons() {\n    const {props} = this;\n    const ButtonComponent = getButtonComponent();\n    if (props && this.mode === 'edit') {\n      if (this.$slots.btns) {\n        return this.$slots.btns;\n      }\n      if (this.platform === 'mobile') {\n        return <div class=\"action-btns\">\n          {this.hasListener('ok') ? <m-white-space/> : null}\n          {this.hasListener('ok') ? <m-button type=\"primary\"\n                                              disabled={this.isDisabled}\n                                              loading={this.isLoading}\n                                              attrs={props && props.okProps}\n                                              onClick={() => {\n                                                this.onOk();\n                                              }}>\n            {props && props.okText || '保存'}\n          </m-button> : null}\n          {this.hasListener('cancel') ? <m-white-space/> : null}\n          {this.hasListener('cancel') ? <m-button\n            disabled={this.isDisabled || this.isDisabled}\n            onClick={() => {\n              this.$emit('cancel');\n            }}\n            attrs={props && props.cancelProps}>\n            {props && props.cancelText || '取消'}\n          </m-button> : null}\n          {this.hasListener('reset') ? <m-white-space/> : null}\n          {this.hasListener('reset') ? <m-button\n            disabled={this.isDisabled || this.isLoading}\n            type=\"error\"\n            onClick={() => {\n              this.$emit('reset');\n            }}\n            attrs={props && props.resetProps}>\n            {props && props.resetText || '重置'}\n          </m-button> : null}\n        </div>;\n      } else {\n        return <div class=\"action-btns\">\n          {this.hasListener('cancel') ? <ButtonComponent disabled={this.isDisabled || this.isLoading}\n                                                         onClick={() => {\n                                                           this.$emit('cancel');\n                                                         }}\n                                                         class=\"cancel-btn\"\n                                                         attrs={props && props.cancelProps}>\n            {props && props.cancelText || '取消'}\n          </ButtonComponent> : null}\n          {this.hasListener('ok') ? <ButtonComponent type=\"primary\"\n                                                     disabled={this.isDisabled}\n                                                     loading={this.isLoading}\n                                                     class=\"confirm-btn\"\n                                                     attrs={props && props.okProps}\n                                                     onClick={() => {\n                                                       this.onOk();\n                                                     }}>\n            {props && props.okText || '保存'}\n          </ButtonComponent> : null}\n          {this.hasListener('reset') ? <ButtonComponent type=\"danger\"\n                                                        class=\"reset-btn\"\n                                                        disabled={this.isDisabled || this.isLoading}\n                                                        attrs={props && props.resetProps}\n                                                        onClick={() => {\n                                                          this.$emit('reset', this.currentValue);\n                                                        }}>\n            {props && props.resetText || '重置'}\n          </ButtonComponent> : null}\n        </div>;\n      }\n    }\n  }\n\n  private renderTitle() {\n    if (this.$slots.title) {\n      return this.$slots.title;\n    } else if (this.props && this.title) {\n      return <h2 class=\"form-title\">{this.title}</h2>;\n    }\n  }\n\n  private async onOk(this: any) {\n    if (this.hasListener('ok')) {\n      if (this.form && this.form.validate) {\n        const valid = await this.validate();\n        if (valid.some(it => !it)) {\n          this.$message.error('表单数据有误，请检查');\n        } else {\n          this.$emit('ok', this.currentValue);\n        }\n      } else {\n        this.$emit('ok', this.currentValue);\n      }\n    }\n  }\n\n  private getGroups(currentValue: { [p: string]: any } | Array<{ [p: string]: any }>) {\n    const groups = [];\n    const spanGroups = [];\n    let lastHasSpan = false;\n    this.realFields.forEach((field, index) => {\n      const vnode = this.renderField(field, currentValue, index);\n      if (field.span) {\n        if (lastHasSpan) {\n          spanGroups[spanGroups.length - 1].push(field.span);\n          groups[groups.length - 1].push(vnode);\n        } else {\n          spanGroups.push([field.span]);\n          groups.push([vnode]);\n        }\n        lastHasSpan = true;\n      } else {\n        lastHasSpan = false;\n        spanGroups.push([]);\n        groups.push([vnode]);\n      }\n    });\n    return groups;\n  }\n\n  public calcShowState(definition: SchemaFormField) {\n    if (!definition.depends) {\n      return definition.visible || definition.visible === null || definition.visible === undefined;\n    } else {\n      if (typeof definition.depends === 'function') {\n        return definition.depends(this.currentValue);\n      } else {\n        return !definition.depends\n          .map(condition => this.matchCondition(condition))\n          .some(it => !it);\n      }\n    }\n  }\n\n  private matchCondition(condition: ShowFieldCondition): boolean {\n    if (!this.currentValue) {\n      return false;\n    } else {\n      const currentValue = this.currentValue[condition.property];\n      const compareValue = condition.value;\n      if (currentValue === null || currentValue === undefined) {\n        switch (condition.operator) {\n          case 'in':\n            return compareValue.includes(currentValue);\n          case 'notIn':\n            return !compareValue.includes(currentValue);\n        }\n        return false;\n      } else {\n        switch (condition.operator) {\n          case '=':\n            return compareValue.toString() === currentValue.toString();\n          case '<':\n            return parseFloat(currentValue) < parseFloat(compareValue);\n          case '>':\n            return parseFloat(currentValue) > parseFloat(compareValue);\n          case '>=':\n            return parseFloat(currentValue) >= parseFloat(compareValue);\n          case '<=':\n            return parseFloat(currentValue) <= parseFloat(compareValue);\n          case 'in':\n            return compareValue.includes(currentValue);\n          case 'notIn':\n            return !compareValue.includes(currentValue);\n        }\n      }\n    }\n    return true;\n  }\n\n  private renderField(field: SchemaFormField, currentValue: { [p: string]: any } | Array<{ [p: string]: any }>, index: number) {\n    const {platform} = this;\n    let value = null;\n    if (field.property.includes('.')) {\n      value = getPropertyValueByPath(field.property.substr(0, field.property.lastIndexOf('.')), currentValue);\n    } else {\n      value = currentValue;\n    }\n    if (field.type === TYPES.object) {\n      if (!field.props) {\n        field.props = {props: this.props};\n      } else {\n        field.props.props = this.props;\n      }\n      field.props.effects = this.effects;\n    }\n    const iField = this.createField(field);\n    // @ts-ignore\n    return <FormField\n      value={getFieldValue(value, iField)}\n      onInput={(v) => {\n        setFieldValue(value, iField, v);\n      }}\n      field={iField}\n      path={this.buildFieldPath(field)}\n      display={this.mode === 'display'}\n      disabled={this.isDisabled}\n      content={this.$slots[field.slot]}\n      definition={field}\n      key={'field-' + field.property + '-' + index}\n      formValue={currentValue}\n      platform={platform}/>;\n  }\n\n  private renderFields() {\n    return this.renderSingleFields(this.currentValue);\n  }\n\n  get isMobile() {\n    return this.platform === MOBILE;\n  }\n\n  get isDesktop() {\n    return this.platform === DESKTOP;\n  }\n\n  private renderSingleFields(currentValue: { [p: string]: any } | Array<{ [p: string]: any }>) {\n    const {props} = this;\n    const FormComponent = getFormComponent(this.platform);\n    const groups = this.getGroups(currentValue);\n    const formProps = this.getFormProps();\n    return <FormComponent attrs={formProps}\n                          ref=\"form\"\n                          on={this.$listeners}>\n      {this.$slots.prepend}\n      {!this.definition.array && this.isDesktop ? this.renderTitle() : null}\n      {props && props.inline ? groups.reduce((a, b) => a.concat(b))\n        : groups.map((group) => this.wrapGroup(group))}\n      {this.renderDeleteSubFormButton()}\n      {this.$slots.append}\n    </FormComponent>;\n  }\n\n  private renderAddFormButton() {\n    const ButtonComponent = getButtonComponent();\n    if (this.definition.array && this.mode === 'edit') {\n      return <ButtonComponent\n        attrs={{\n          block: true,\n          icon: 'plus',\n          disabled: this.isDisabled\n        }}\n        class=\"m-b\"\n        onClick={() => {\n          this.addSubItem();\n        }}>新增一条</ButtonComponent>;\n    }\n  }\n\n  private addSubItem() {\n    this.currentValue.push({});\n  }\n\n  private renderDeleteSubFormButton() {\n    const ButtonComponent = getButtonComponent();\n    return Number.isInteger(this.arrayIndex) && this.mode !== 'display' && this.platform === 'desktop' ?\n      <div class=\"delete-item-butn-wrapper\" style={{textAlign: 'right'}}>\n        <ButtonComponent disabled={this.isDisabled} onClick={() => {\n          this.$emit('removeArrayItem');\n        }} text icon=\"delete\" type=\"danger\">删除该条\n        </ButtonComponent>\n      </div> : null;\n  }\n\n  private wrapGroup(group: any) {\n    const RowComponent = getRowComponent();\n    const {props} = this;\n    if (this.isMobile || group.length === 1) {\n      return group;\n    }\n    return <RowComponent gutter={props && props.gutter || 0}>{group}</RowComponent>;\n  }\n\n\n  public createField(definition: SchemaFormField): IField {\n    const plainPath = this.buildFieldPath(definition).join('.');\n    const existsField: IField = this['store'].fields[plainPath];\n    if (existsField) {\n      existsField.display = this.mode === 'display';\n      existsField.editable = !this.isDisabled && !this.isReadonly;\n      return existsField;\n    } else {\n      return Vue.observable({\n        title: definition.title,\n        array: definition.array,\n        type: definition.type,\n        enum: definition.enum,\n        processor: definition.processor,\n        display: this.mode === 'display',\n        editable: !this.isDisabled && !this.isReadonly,\n        name: definition.property,\n        path: this.buildArrayPath(definition),\n        plainPath: this.buildFieldPath(definition).join('.'),\n        destructPath: parseDestructPath(definition.property),\n        props: Object.assign({}, definition.props),\n        visible: this.calcShowState(definition),\n        required: definition.required,\n        fields: definition.fields,\n        effectErrors: [],\n        errors: [],\n        hiddenFromParent: false,\n        initialValue: null,\n        initialize: () => {\n        },\n        invalid: false,\n        value: null\n      });\n    }\n  }\n\n  public hasListener(event: string): boolean {\n    return !!this.$listeners[event];\n  }\n\n  private getFormProps() {\n    const formProps = Object.assign({}, this.props);\n    if (this.isMobile) {\n      const title = this.$slots.title || this.title;\n      if (this.arrayIndex !== null && this.arrayIndex !== undefined) {\n        formProps.title = <div style={{\n          display: 'flex',\n          justifyContent: 'space-between'\n        }}>\n          <span>{title + ' (' + (this.arrayIndex + 1) + ')'}</span>\n          {this.arrayIndex > 0 ? <a style={{color: '#e94721', cursor: 'pointer'}}\n                                    onclick={() => {\n                                      this.$emit('removeArrayItem', this.arrayIndex);\n                                    }}>\n            <ae-icon type=\"delete\"/>\n            删除\n          </a> : null}\n        </div>;\n      } else {\n        formProps.title = title;\n      }\n    }\n    formProps.inline = this.inline;\n    formProps.disabled = this.isFormDisabled;\n    return formProps;\n  }\n\n  get isFormDisabled() {\n    return this.isDisabled || this.isLoading;\n  }\n\n  public validate(): Promise<boolean[]> {\n    const fields = this.fields;\n    if (fields.length) {\n      return Promise.all(fields.map(it => it.validate()));\n    }\n    return null;\n  }\n\n  private buildArrayPath(field: SchemaFormField): string[] {\n    if (this.pathPrefix) {\n      return this.pathPrefix.concat(field.property);\n    } else {\n      return field.property.split('.');\n    }\n  }\n\n  private buildFieldPath(field: SchemaFormField): string[] {\n    if (this.pathPrefix) {\n      return this.pathPrefix.concat(field.property);\n    } else {\n      return [field.property];\n    }\n  }\n\n  get isDisabled() {\n    return this['store'].disabled;\n  }\n\n  get isLoading() {\n    return this['store'].loading;\n  }\n\n  get isReadonly() {\n    return this['store'].readonly;\n  }\n}\n","import {isArr, isObj, isStr} from '@/uform/types';\n\ntype EachArrayIterator<T> = (currentValue: T, key: number) => void | boolean;\ntype EachStringIterator = (currentValue: string, key: number) => void | boolean;\ntype EachObjectIterator<T> = (\n    currentValue: T[keyof T],\n    key: string\n) => void | boolean;\ntype MemoArrayIterator<T, U> = (\n    previousValue: U,\n    currentValue: T,\n    key: number\n) => U;\ntype MemoStringIterator<T> = (\n    previousValue: T,\n    currentValue: string,\n    key: number\n) => T;\ntype MemoObjectIterator<T, U> = (\n    previousValue: U,\n    currentValue: T[keyof T],\n    key: string\n) => U;\n\nexport const toArr = (val: any): any[] => (isArr(val) ? val : val ? [val] : []);\n\nexport function each(\n    val: string,\n    iterator: EachStringIterator,\n    revert?: boolean\n): void;\nexport function each<T>(\n    val: T[],\n    iterator: EachArrayIterator<T>,\n    revert?: boolean\n): void;\nexport function each<T extends object>(\n    val: T,\n    iterator: EachObjectIterator<T>,\n    revert?: boolean\n): void;\nexport function each(val: any, iterator: any, revert?: boolean): object {\n  if (isArr(val) || isStr(val)) {\n    if (revert) {\n      for (let i: number = val.length - 1; i >= 0; i--) {\n        if (iterator(val[i], i) === false) {\n          return;\n        }\n      }\n    } else {\n      for (let i = 0, length = val.length; i < length; i++) {\n        if (iterator(val[i], i) === false) {\n          return;\n        }\n      }\n    }\n  } else if (isObj(val)) {\n    let key: string;\n    for (key in val) {\n      if (Object.hasOwnProperty.call(val, key)) {\n        if (iterator(val[key], key) === false) {\n          return;\n        }\n      }\n    }\n  }\n}\n\nexport function map(\n    val: string,\n    iterator: EachStringIterator,\n    revert?: boolean\n): string[];\nexport function map<T>(\n    val: T[],\n    iterator: EachArrayIterator<T>,\n    revert?: boolean\n): T[];\nexport function map<T extends object>(\n    val: T,\n    iterator: EachObjectIterator<T>,\n    revert?: boolean\n): object;\nexport function map(val: any, iterator: any, revert?: boolean): any {\n  const res = isArr(val) || isStr(val) ? [] : {};\n  each(\n      val,\n      (item, key) => {\n        const value = iterator(item, key);\n        if (isArr(res)) {\n          (res as any).push(value);\n        } else {\n          res[key] = value;\n        }\n      },\n      revert\n  );\n  return res;\n}\n\nexport function reduce<T, U>(\n    val: T[],\n    iterator: MemoArrayIterator<T, U>,\n    accumulator?: U,\n    revert?: boolean\n): U;\nexport function reduce<T>(\n    val: string,\n    iterator: MemoStringIterator<T>,\n    accumulator?: T,\n    revert?: boolean\n): T;\nexport function reduce<T extends object, U>(\n    val: T,\n    iterator: MemoObjectIterator<T, U>,\n    accumulator?: U,\n    revert?: boolean\n): U;\nexport function reduce(\n    val: any,\n    iterator: any,\n    accumulator?: any,\n    revert?: boolean\n): any {\n  let result = accumulator;\n  each(\n      val,\n      (item, key) => {\n        result = iterator(result, item, key);\n      },\n      revert\n  );\n  return result;\n}\n\nexport function every(\n    val: string,\n    iterator: EachStringIterator,\n    revert?: boolean\n): boolean;\nexport function every<T>(\n    val: T[],\n    iterator: EachArrayIterator<T>,\n    revert?: boolean\n): boolean;\nexport function every<T extends object>(\n    val: T,\n    iterator: EachObjectIterator<T>,\n    revert?: boolean\n): boolean;\nexport function every(val: any, iterator: any, revert?: boolean): boolean {\n  let res = true;\n  each(\n      val,\n      (item, key) => {\n        if (!iterator(item, key)) {\n          res = false;\n          return false;\n        }\n      },\n      revert\n  );\n  return res;\n}\n\nexport function some(\n    val: string,\n    iterator: EachStringIterator,\n    revert?: boolean\n): boolean;\nexport function some<T>(\n    val: T[],\n    iterator: EachArrayIterator<T>,\n    revert?: boolean\n): boolean;\nexport function some<T extends object>(\n    val: T,\n    iterator: EachObjectIterator<T>,\n    revert?: boolean\n): boolean;\nexport function some(val: any, iterator: any, revert?: boolean): boolean {\n  let res = false;\n  each(\n      val,\n      (item, key) => {\n        if (iterator(item, key)) {\n          res = true;\n          return false;\n        }\n      },\n      revert\n  );\n  return res;\n}\n\nexport function findIndex(\n    val: string,\n    iterator: EachStringIterator,\n    revert?: boolean\n): number;\nexport function findIndex<T>(\n    val: T[],\n    iterator: EachArrayIterator<T>,\n    revert?: boolean\n): number;\nexport function findIndex<T extends object>(\n    val: T,\n    iterator: EachObjectIterator<T>,\n    revert?: boolean\n): keyof T;\nexport function findIndex(\n    val: any,\n    iterator: any,\n    revert?: boolean\n): string | number {\n  let res: number | string = -1;\n  each(\n      val,\n      (item, key) => {\n        if (iterator(item, key)) {\n          res = key;\n          return false;\n        }\n      },\n      revert\n  );\n  return res;\n}\n\nexport function find(\n    val: string,\n    iterator: EachStringIterator,\n    revert?: boolean\n): any;\nexport function find<T>(\n    val: T[],\n    iterator: EachArrayIterator<T>,\n    revert?: boolean\n): T;\nexport function find<T extends object>(\n    val: T,\n    iterator: EachObjectIterator<T>,\n    revert?: boolean\n): T[keyof T];\nexport function find(val: any, iterator: any, revert?: boolean): any {\n  let res: any;\n  each(\n      val,\n      (item, key) => {\n        if (iterator(item, key)) {\n          res = item;\n          return false;\n        }\n      },\n      revert\n  );\n  return res;\n}\n\nexport function includes(\n    val: string[],\n    searchElement: string,\n    revert?: boolean\n): boolean;\nexport function includes<T>(\n    val: T[],\n    searchElement: T,\n    revert?: boolean\n): boolean {\n  return some(val, item => item === searchElement, revert);\n}\n","/**\n * A doubly linked list-based Least Recently Used (LRU) cache. Will keep most\n * recently used items while discarding least recently used items when its limit\n * is reached.\n *\n * Licensed under MIT. Copyright (c) 2010 Rasmus Andersson <http://hunch.se/>\n * See README.md for details.\n *\n * Illustration of the design:\n *\n *       entry             entry             entry             entry\n *       ______            ______            ______            ______\n *      | head |.newer => |      |.newer => |      |.newer => | tail |\n *      |  A   |          |  B   |          |  C   |          |  D   |\n *      |______| <= older.|______| <= older.|______| <= older.|______|\n *\n *  removed  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  added\n */\n/* eslint-disable */\n\nconst NEWER = Symbol('newer');\nconst OLDER = Symbol('older');\n\nexport function LRUMap(this: any, limit: number | any, entries?: any) {\n  let copyEntries = entries;\n  let copyLimit = limit;\n  if (typeof copyLimit !== 'number') {\n    // called as (entries)\n    copyEntries = copyLimit;\n    copyLimit = 0;\n  }\n\n  this.size = 0;\n  this.limit = copyLimit;\n  this.oldest = this.newest = undefined;\n  this._keymap = new Map();\n\n  if (copyEntries) {\n    this.assign(copyEntries);\n    if (copyLimit < 1) {\n      this.limit = this.size;\n    }\n  }\n}\n\nfunction Entry(this: any, key: any, value: any) {\n  this.key = key;\n  this.value = value;\n  this[NEWER] = undefined;\n  this[OLDER] = undefined;\n}\n\nLRUMap.prototype._markEntryAsUsed = function(entry: any) {\n  if (entry === this.newest) {\n    // Already the most recenlty used entry, so no need to update the list\n    return;\n  }\n  // HEAD--------------TAIL\n  //   <.older   .newer>\n  //  <--- add direction --\n  //   A  B  C  <D>  E\n  if (entry[NEWER]) {\n    if (entry === this.oldest) {\n      this.oldest = entry[NEWER];\n    }\n    entry[NEWER][OLDER] = entry[OLDER]; // C <-- E.\n  }\n  if (entry[OLDER]) {\n    entry[OLDER][NEWER] = entry[NEWER]; // C. --> E\n  }\n  entry[NEWER] = undefined; // D --x\n  entry[OLDER] = this.newest; // D. --> E\n  if (this.newest) {\n    this.newest[NEWER] = entry; // E. <-- D\n  }\n  this.newest = entry;\n};\n\nLRUMap.prototype.assign = function(entries: any) {\n  let entry: any;\n  let limit = this.limit || Number.MAX_VALUE;\n  this._keymap.clear();\n  const it = entries[Symbol.iterator]();\n  for (let itv = it.next(); !itv.done; itv = it.next()) {\n    const e = new Entry(itv.value[0], itv.value[1]);\n    this._keymap.set(e.key, e);\n    if (!entry) {\n      this.oldest = e;\n    } else {\n      entry[NEWER] = e;\n      e[OLDER] = entry;\n    }\n    entry = e;\n    if (limit-- === 0) {\n      throw new Error('overflow');\n    }\n  }\n  this.newest = entry;\n  this.size = this._keymap.size;\n};\n\nLRUMap.prototype.get = function(key: any) {\n  // First, find our cache entry\n  const entry = this._keymap.get(key);\n  if (!entry) {\n    return;\n  } // Not cached. Sorry.\n  // As <key> was found in the cache, register it as being requested recently\n  this._markEntryAsUsed(entry);\n  return entry.value;\n};\n\nLRUMap.prototype.set = function(key: any, value: any) {\n  let entry = this._keymap.get(key);\n\n  if (entry) {\n    // update existing\n    entry.value = value;\n    this._markEntryAsUsed(entry);\n    return this;\n  }\n\n  // new entry\n  this._keymap.set(key, (entry = new Entry(key, value)));\n\n  if (this.newest) {\n    // link previous tail to the new tail (entry)\n    this.newest[NEWER] = entry;\n    entry[OLDER] = this.newest;\n  } else {\n    // we're first in -- yay\n    this.oldest = entry;\n  }\n\n  // add new entry to the end of the linked list -- it's now the freshest entry.\n  this.newest = entry;\n  ++this.size;\n  if (this.size > this.limit) {\n    // we hit the limit -- remove the head\n    this.shift();\n  }\n\n  return this;\n};\n\nLRUMap.prototype.shift = function() {\n  // todo: handle special case when limit == 1\n  const entry = this.oldest;\n  if (entry) {\n    if (this.oldest[NEWER]) {\n      // advance the list\n      this.oldest = this.oldest[NEWER];\n      this.oldest[OLDER] = undefined;\n    } else {\n      // the cache is exhausted\n      this.oldest = undefined;\n      this.newest = undefined;\n    }\n    // Remove last strong reference to <entry> and remove links from the purged\n    // entry being returned:\n    entry[NEWER] = entry[OLDER] = undefined;\n    this._keymap.delete(entry.key);\n    --this.size;\n    return [entry.key, entry.value];\n  }\n};\n\n// ----------------------------------------------------------------------------\n// Following code is optional and can be removed without breaking the core\n// functionality.\n\nLRUMap.prototype.find = function(key: any) {\n  const e = this._keymap.get(key);\n  return e ? e.value : undefined;\n};\n\nLRUMap.prototype.has = function(key: any) {\n  return this._keymap.has(key);\n};\n\nLRUMap.prototype.delete = function(key: any) {\n  const entry = this._keymap.get(key);\n  if (!entry) {\n    return;\n  }\n  this._keymap.delete(entry.key);\n  if (entry[NEWER] && entry[OLDER]) {\n    // relink the older entry with the newer entry\n    entry[OLDER][NEWER] = entry[NEWER];\n    entry[NEWER][OLDER] = entry[OLDER];\n  } else if (entry[NEWER]) {\n    // remove the link to us\n    entry[NEWER][OLDER] = undefined;\n    // link the newer entry to head\n    this.oldest = entry[NEWER];\n  } else if (entry[OLDER]) {\n    // remove the link to us\n    entry[OLDER][NEWER] = undefined;\n    // link the newer entry to head\n    this.newest = entry[OLDER];\n  } else {\n    // if(entry[OLDER] === undefined && entry.newer === undefined) {\n    this.oldest = this.newest = undefined;\n  }\n\n  this.size--;\n  return entry.value;\n};\n\nLRUMap.prototype.clear = function() {\n  // Not clearing links should be safe, as we don't expose live links to user\n  this.oldest = this.newest = undefined;\n  this.size = 0;\n  this._keymap.clear();\n};\n\nfunction EntryIterator(this: any, oldestEntry: any) {\n  this.entry = oldestEntry;\n}\n\nEntryIterator.prototype[Symbol.iterator] = function() {\n  return this;\n};\nEntryIterator.prototype.next = function() {\n  const ent = this.entry;\n  if (ent) {\n    this.entry = ent[NEWER];\n    return {done: false, value: [ent.key, ent.value]};\n  } else {\n    return {done: true, value: undefined};\n  }\n};\n\nfunction KeyIterator(this: any, oldestEntry) {\n  this.entry = oldestEntry;\n}\n\nKeyIterator.prototype[Symbol.iterator] = function() {\n  return this;\n};\nKeyIterator.prototype.next = function() {\n  const ent = this.entry;\n  if (ent) {\n    this.entry = ent[NEWER];\n    return {done: false, value: ent.key};\n  } else {\n    return {done: true, value: undefined};\n  }\n};\n\nfunction ValueIterator(this: any, oldestEntry) {\n  this.entry = oldestEntry;\n}\n\nValueIterator.prototype[Symbol.iterator] = function() {\n  return this;\n};\nValueIterator.prototype.next = function() {\n  const ent = this.entry;\n  if (ent) {\n    this.entry = ent[NEWER];\n    return {done: false, value: ent.value};\n  } else {\n    return {done: true, value: undefined};\n  }\n};\n\nLRUMap.prototype.keys = function() {\n  return new KeyIterator(this.oldest);\n};\n\nLRUMap.prototype.values = function() {\n  return new ValueIterator(this.oldest);\n};\n\nLRUMap.prototype.entries = function() {\n  return this;\n};\n\nLRUMap.prototype[Symbol.iterator] = function() {\n  return new EntryIterator(this.oldest);\n};\n\nLRUMap.prototype.forEach = function(fun: (value: any, key: any, ctx: object) => void, thisObj: any) {\n  let copyThisObj = thisObj;\n  if (typeof copyThisObj !== 'object') {\n    copyThisObj = this;\n  }\n  let entry = this.oldest;\n  while (entry) {\n    fun.call(copyThisObj, entry.value, entry.key, this);\n    entry = entry[NEWER];\n  }\n};\n\n/** Returns a JSON (array) representation */\nLRUMap.prototype.toJSON = function() {\n  const s = new Array(this.size);\n  let i = 0;\n  let entry = this.oldest;\n  while (entry) {\n    s[i++] = {key: entry.key, value: entry.value};\n    entry = entry[NEWER];\n  }\n  return s;\n};\n\n/** Returns a String representation */\nLRUMap.prototype.toString = function() {\n  let s = '';\n  let entry = this.oldest;\n  while (entry) {\n    s += String(entry.key) + ':' + entry.value;\n    entry = entry[NEWER];\n    if (entry) {\n      s += ' < ';\n    }\n  }\n  return s;\n};\n","import BaseForm from '@/schema-form/internal/base-form';\nimport Component, {mixins} from 'vue-class-component';\nimport {Inject} from 'vue-property-decorator';\n\n@Component({\n  name: 'InternalForm'\n})\nexport default class InternalForm extends mixins(BaseForm) {\n\n  @Inject()\n  public store;\n\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.listType !== 'dragger')?_c('d-upload',_vm._g(_vm._b({attrs:{\"file-list\":_vm.fileList}},'d-upload',_vm.props,false),_vm.$listeners),[(_vm.listType === 'card')?_c('div',{staticClass:\"ant-upload-select-btn\"},[_c('ae-icon',{attrs:{\"size\":\"lg\",\"type\":\"plus\"}}),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(\"选择文件\")])],1):(_vm.listType === 'text')?_c('d-button',{attrs:{\"disabled\":_vm.$attrs.disabled}},[_vm._v(\"选择文件\\n  \")]):_vm._e(),_vm._t(\"default\")],2):_c('a-upload-dragger',_vm._g(_vm._b({},'a-upload-dragger',_vm.props,false),_vm.$listeners),[_c('div',{class:{disabled : _vm.$attrs.disabled}},[_c('p',{staticClass:\"ant-upload-drag-icon\"},[_c('a-icon',{attrs:{\"type\":\"upload\"}})],1),_c('p',{staticClass:\"ant-upload-text\"},[_vm._v(\"点击或者拖动文件到虚线框内上传\")]),_c('p',{staticClass:\"ant-upload-hint\",domProps:{\"textContent\":_vm._s(_vm.hint)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\n\nexport default Vue.extend({\n  name: 'AntdUpload',\n  props: {\n    value: {type: [String, Array]},\n    multiple: {type: Boolean, default: false},\n    listType: String,\n    hint: String\n  },\n  data() {\n    return {\n      fileList: []\n    };\n  },\n  computed: {\n    props() {\n      const props: any = Object.assign({}, this.$attrs);\n      if (this.listType === 'card') {\n        props.listType = 'picture-card';\n      } else if (this.listType === 'dragger') {\n        delete props.listType;\n      }\n      return props;\n    }\n  }\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=b4d2f07c&\"\nimport script from \"./upload.vue?vue&type=script&lang=ts&\"\nexport * from \"./upload.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Component from 'vue-class-component';\nimport {Prop, Watch} from 'vue-property-decorator';\n\n@Component({\n  name: 'DisplayField'\n})\nclass PlainDisplayField extends Vue {\n\n  @Prop()\n  public value: any;\n\n  public render() {\n    const {value} = this;\n    return <span>{value}</span>;\n  }\n\n}\n\nexport default PlainDisplayField as any;\n","import {getOptions} from '@/schema-form/utils';\nimport {SchemaFormField} from '@/types/bean';\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\nimport {Prop} from 'vue-property-decorator';\n\n@Component({\n  name: 'SelectDisplayField'\n})\nclass DisplayField extends Vue {\n\n  @Prop()\n  public value: any;\n  @Prop(Object)\n  public definition: SchemaFormField;\n\n  public render() {\n    const {definition, value} = this;\n    const options = getOptions(definition);\n    if (value) {\n      let selected = [];\n      if (this.definition.array) {\n        selected = options.filter(it => value.includes(it[this.valueProperty]));\n      } else {\n        selected = options.filter(it => value === it[this.valueProperty]);\n      }\n      return <span>{selected.map(it => it[this.LabelProperty]).join('、')}</span>;\n    } else {\n      return <span/>;\n    }\n  }\n\n  get valueProperty() {\n    return this.definition.props.valueProperty || 'value';\n  }\n\n  get LabelProperty() {\n    return this.definition.props.labelProperty || 'label';\n  }\n}\n\nexport default DisplayField as any;\n","import {SchemaFormField} from '@/types/bean';\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\nimport {Prop} from 'vue-property-decorator';\n\n@Component({\n  name: 'TimeDisplayField'\n})\nclass DisplayField extends Vue {\n\n  @Prop()\n  public value: any;\n  @Prop(Object)\n  public definition: SchemaFormField;\n\n  public render() {\n    const {value} = this;\n    if (this.definition.type === 'time') {\n      return <span>{this.value}</span>;\n    }\n    let format = 'YYYY-MM-DD HH:mm:ss';\n    if (this.definition.type === 'date') {\n      format = 'YYYY-MM-DD';\n    }\n    return <span vTime={value} format={format}/>;\n  }\n\n}\n\nexport default DisplayField as any;\n","import {getOptionProperty} from '@/schema-form/utils';\n\nexport default {\n  name: 'BaseOptionComponent',\n  props: {\n    options: Array,\n    labelProperty: {type: String, default: 'label'},\n    valueProperty: {type: String, default: 'value'}\n  },\n  render(this: any) {\n    const InputComponent = this.component;\n    const OptionComponent = this.optionComponent;\n    return <InputComponent\n      attrs={this.$attrs}\n      on={this.$listeners}>\n      {\n        this.options.map(option => {\n          const props = {};\n          props[this.labelProp] = getOptionProperty(option, this.labelProperty);\n          props[this.valueProp] = getOptionProperty(option, this.valueProperty);\n          return <OptionComponent attrs={props}>\n            {this.labelProp === 'text' ? props[this.labelProp] : null}\n          </OptionComponent>;\n        })\n      }\n    </InputComponent>;\n  },\n  computed: {\n    labelProp() {\n      return 'label';\n    },\n    valueProp() {\n      return 'value';\n    },\n    component() {\n      return '';\n    },\n    optionComponent() {\n      return '';\n    }\n  }\n};\n","import BaseOptionComponent from './base-option-component';\n\nexport default {\n  mixins: [BaseOptionComponent],\n  props: {\n    button: Boolean\n  },\n  computed: {\n    labelProp() {\n      return 'text';\n    },\n    valueProp() {\n      return 'label';\n    },\n    component() {\n      return 'el-checkbox-group';\n    },\n    optionComponent(this: any) {\n      if (this.button) {\n        return 'el-checkbox-button';\n      }\n      return 'el-checkbox';\n    }\n  }\n};\n","import BaseOptionComponent from './base-option-component';\n\nexport default {\n  mixins: [BaseOptionComponent],\n  props: {\n    button: Boolean\n  },\n  computed: {\n    labelProp() {\n      return 'text';\n    },\n    valueProp() {\n      return 'label';\n    },\n    component() {\n      return 'el-radio-group';\n    },\n    optionComponent(this: any) {\n      if (this.button) {\n        return 'el-radio-button';\n      }\n      return 'el-radio';\n    }\n  }\n};\n","import BaseOptionComponent from './base-option-component';\n\nexport default {\n  mixins: [BaseOptionComponent],\n  computed: {\n    component() {\n      return 'el-select';\n    },\n    optionComponent(this: any) {\n      return 'el-option';\n    }\n  }\n};\n","export default {\n  render() {\n    return <span/>;\n  }\n};\n","import InternalForm from '@/schema-form/internal/form';\nimport {Platform, SchemaFormField} from '@/types/bean';\nimport {IField} from '@/uform/types';\nimport Vue from 'vue';\nimport AntdUpload from './antd/upload.vue';\nimport PlainDisplayField from './display/plain-display-field';\nimport SelectDisplayField from './display/select-display-field';\nimport TimeDisplayField from './display/time-display-field';\nimport ElExtCheckbox from './element/checkbox-group';\nimport ElExtRadio from './element/radio-group';\nimport ElExtSelect from './element/select';\nimport Empty from './empty';\n\nexport const ASchemaForm = 'ASchemaForm';\n\nexport const enum Mode {\n  edit = 'edit',\n  display = 'display'\n}\n\nexport const enum TYPES {\n  transfer = 'transfer',\n  rate = 'rate',\n  upload = 'upload',\n  daterange = 'daterange',\n  url = 'url',\n  string = 'string',\n  datetime = 'datetime',\n  year = 'year',\n  month = 'month',\n  time = 'time',\n  select = 'select',\n  date = 'date',\n  integer = 'integer',\n  number = 'number',\n  double = 'double',\n  boolean = 'boolean',\n  expandSelect = 'expand-select',\n  range = 'range',\n  empty = 'empty',\n  text = 'text',\n  object = 'object'\n}\n\nconst store: { [key: string]: { [key: string]: any } } = {\n  display: {\n    desktop: {},\n    mobile: {}\n  },\n  edit: {\n    desktop: {},\n    mobile: {}\n  }\n};\n\nexport const DESKTOP = 'desktop';\nexport const MOBILE = 'mobile';\n\nlet formComponent = 'd-form';\nlet rowComponent = 'd-row';\nlet colComponent = 'd-col';\nlet buttonComponent = 'd-button';\nlet alertComponent = 'a-alert';\nlet confirmFunction = '$dconfirm';\n\nexport interface SchemaFormComponent {\n  platform: Platform;\n  type: string;\n  component: string | object;\n  forArray: boolean | null;\n  getProps: (field: IField) => object;\n}\n\nconst SchemaFormComponentDefinitions: SchemaFormComponent[] = [];\nconst DisplayComponentDefinitions: SchemaFormComponent[] = [];\n\nexport const registerDisplay = (component: string | object,\n                                platform: Platform | Platform[],\n                                type: string | string[],\n                                forArray: boolean = null,\n                                getProps: ((definition: IField, platform: Platform) => object) = () => ({})) => {\n  addComponent(component, platform, type, forArray, getProps, true);\n};\nexport const register = (component: string | object,\n                         platform: Platform | Platform[],\n                         types: string | string[],\n                         forArray: boolean = null,\n                         getProps: ((definition: IField, platform: Platform) => object) = () => ({})) => {\n  addComponent(component, platform, types, forArray, getProps, false);\n};\n\nconst addComponent = (component: string | object,\n                      platforms: Platform | Platform[],\n                      types: string | string[],\n                      forArray: boolean | null = null,\n                      getProps: (definition: IField, platform: Platform) => object = () => ({}),\n                      forDisplay: boolean) => {\n  if (Array.isArray(types)) {\n    types.forEach(type => {\n      addComponent(component, platforms, type, forArray, getProps, forDisplay);\n    });\n  } else if (Array.isArray(platforms)) {\n    platforms.forEach(platform => {\n      addComponent(component, platform, types, forArray, getProps, forDisplay);\n    });\n  } else {\n    const def = {\n      component,\n      platform: platforms,\n      type: types,\n      forArray,\n      getProps: (definition: IField) => {\n        const props: any = getProps(definition, platforms) || {};\n        if (definition.title && platforms === MOBILE) {\n          props.labelNumber = definition.title.length > 7 ? 7 : definition.title.length;\n        }\n        if (definition.props) {\n          Object.assign(props, definition.props);\n        }\n        return props;\n      }\n    };\n    const mode = forDisplay ? 'display' : 'edit';\n    const typeDef = store[mode][platforms];\n    if (!typeDef[types]) {\n      typeDef[types] = {};\n    }\n    if (forArray === true) {\n      typeDef[types][1] = def;\n    } else if (forArray === false) {\n      typeDef[types][2] = def;\n    } else {\n      typeDef[types][0] = def;\n    }\n    if (forDisplay) {\n      DisplayComponentDefinitions.push(def);\n    } else {\n      SchemaFormComponentDefinitions.push(def);\n    }\n  }\n};\n\nVue.component('empty', Empty);\n\nregisterDisplay(TimeDisplayField, [DESKTOP, MOBILE], [TYPES.datetime, TYPES.date]);\nregisterDisplay(PlainDisplayField, [DESKTOP, MOBILE], [TYPES.string, TYPES.text, TYPES.url, TYPES.integer, TYPES.double, TYPES.number], false);\nregisterDisplay(SelectDisplayField, [DESKTOP, MOBILE], [TYPES.select, TYPES.expandSelect], null);\nregister(InternalForm, [DESKTOP, MOBILE], TYPES.object, false, (definition, platform) => {\n  return {\n    platform,\n    definition: {fields: definition.fields}\n  };\n});\nregisterDisplay(InternalForm, [DESKTOP, MOBILE], TYPES.object, false, (definition, platform) => {\n  return {\n    platform,\n    definition: {fields: definition.fields}\n  };\n});\n\nexport function registerAntd() {\n  console.info('注册Ant Design Vue表单组件');\n  formComponent = 'd-form';\n  rowComponent = 'd-row';\n  colComponent = 'd-col';\n  buttonComponent = 'd-button';\n  alertComponent = 'a-alert';\n  confirmFunction = '$dconfirm';\n  register('d-range-picker', DESKTOP, [TYPES.daterange], false);\n  register('d-input', DESKTOP, [TYPES.string, TYPES.url], false);\n  register('d-textarea', DESKTOP, [TYPES.text], false);\n  register('d-date-picker', DESKTOP, [TYPES.date, TYPES.year, TYPES.month, TYPES.datetime], false, (definition: IField) => ({mode: definition.type.toLowerCase()}));\n  register('d-time-picker', DESKTOP, [TYPES.time], false, (definition: IField) => ({mode: definition.type.toLowerCase()}));\n  register('d-input-number', DESKTOP, [TYPES.double, TYPES.integer, TYPES.number], false);\n  register('d-switch', DESKTOP, TYPES.boolean);\n  register('d-select', DESKTOP, TYPES.select, null, definition => {\n    return {dropdownMatchSelectWidth: false, multiple: definition.array};\n  });\n  register(AntdUpload, DESKTOP, TYPES.upload, null, def => {\n    return {multiple: def.array};\n  });\n  register('d-checkbox-group', DESKTOP, TYPES.expandSelect, true);\n  register('d-radio-group', DESKTOP, TYPES.expandSelect, false);\n  register('d-color-picker', DESKTOP, 'color');\n  register('d-rate', DESKTOP, TYPES.rate);\n  register('d-transfer', DESKTOP, TYPES.transfer, false, def => {\n    const data = (def.props && def.props.dataSource) || def.enum || [];\n    const dataSource = data.map((item: any) => {\n      if (typeof item === 'string') {\n        return {key: item, title: item};\n      } else {\n        return {\n          key: (item.key || item.value).toString(),\n          title: item.title || item.label,\n          description: item.description || item.label,\n          disabled: item.disabled || false\n        };\n      }\n    });\n    return {dataSource};\n  });\n  register('d-slider', DESKTOP, TYPES.range, false, () => {\n    return {range: true};\n  });\n}\n\nexport function registerElement() {\n  console.info('注册ElementUI表单组件');\n  formComponent = 'el-form';\n  rowComponent = 'el-row';\n  colComponent = 'el-col';\n  buttonComponent = 'el-button';\n  alertComponent = 'el-alert';\n  confirmFunction = '$confirm';\n  Vue.component('el-ext-select', ElExtSelect);\n  Vue.component('el-ext-checkbox', ElExtCheckbox);\n  Vue.component('el-ext-radio', ElExtRadio);\n  register('el-input', DESKTOP, [TYPES.string, TYPES.url], false);\n  register('el-input', DESKTOP, [TYPES.text], false, () => {\n    return {type: 'textarea'};\n  });\n  register('el-date-picker', DESKTOP, [TYPES.date, TYPES.year, TYPES.month, TYPES.datetime], false,\n    (definition: IField) => ({type: definition.type.toLowerCase()}));\n  register('el-input-number', DESKTOP, [TYPES.double, TYPES.integer, TYPES.number], false);\n  register('el-switch', DESKTOP, [TYPES.boolean], false);\n  register('el-ext-select', DESKTOP, [TYPES.select], null, definition => {\n    return {multiple: definition.array};\n  });\n  register('el-ext-radio', DESKTOP, [TYPES.expandSelect], false);\n  register('el-ext-checkbox', DESKTOP, [TYPES.expandSelect], true);\n}\n\nexport function registerAntdMobile() {\n  console.info('注册Ant Design Mobile表单组件');\n\n  register('m-input', MOBILE, [TYPES.string, TYPES.url], false);\n  register('m-date-picker-item', MOBILE, [TYPES.date, TYPES.datetime, TYPES.time], false, (definition: IField) => ({mode: definition.type.toLowerCase()}));\n  register('m-input', MOBILE, [TYPES.integer, TYPES.double, TYPES.number], false,\n    (definition: IField) => {\n      return {type: definition.type.toLowerCase() === TYPES.double ? 'digit' : 'number', textAlign: 'right'};\n    });\n  register('m-textarea', MOBILE, [TYPES.text], false);\n  register('m-switch-item', MOBILE, [TYPES.boolean], false);\n  register('m-checkbox-popup-list', MOBILE, [TYPES.select], true);\n  register('m-radio-popup-list', MOBILE, [TYPES.select], false);\n  register('m-checkbox-list', MOBILE, [TYPES.expandSelect], true);\n  register('m-radio-list', MOBILE, [TYPES.expandSelect], false);\n}\n\nconst EmptyDefinition = {\n  component: 'empty',\n  getProps: (_) => ({})\n} as SchemaFormComponent;\n\nfunction searchStore(mode: Mode, platform: Platform, definition: SchemaFormField): SchemaFormComponent {\n  const typeDef = store[mode][platform][definition.type];\n  if (!typeDef) {\n    return EmptyDefinition;\n  }\n  if (definition.array) {\n    let res = EmptyDefinition;\n    if (typeDef[2]) {\n      res = typeDef[2];\n    }\n    return typeDef[1] || typeDef[0] || res;\n  } else {\n    return typeDef[2] || typeDef[0];\n  }\n}\n\nexport const getComponent = (platform: Platform, definition: SchemaFormField): SchemaFormComponent => {\n  return searchStore(Mode.edit, platform, definition);\n};\n\nexport const getDisplayComponent = (platform: Platform, definition: SchemaFormField): SchemaFormComponent => {\n  return searchStore(Mode.display, platform, definition);\n};\n\nexport const getOptions = (definition: IField) => {\n  if (definition.enum) {\n    return definition.enum;\n  }\n  if (definition.props && definition.props.options) {\n    if (typeof definition.props.options === 'function') {\n      return definition.props.options() || [];\n    } else if (typeof definition.props.options === 'object') {\n      return definition.props.options || [];\n    }\n  } else {\n    return [];\n  }\n};\n\nexport const getDefaultValue = (field: IField) => {\n  if (typeof field.destructPath.destruct !== 'string') {\n    return null;\n  }\n  if (field.type === TYPES.range) {\n    return [];\n  } else if (field.type === TYPES.object) {\n    if (field.array) {\n      return [{}];\n    } else {\n      return {};\n    }\n  } else {\n    return field.array ? [] : null;\n  }\n};\n\n\nexport const getFormComponent = (platform: Platform) => {\n  return platform === DESKTOP ? formComponent : 'm-list';\n};\n\nexport const getRowComponent = () => {\n  return rowComponent;\n};\n\nexport const getColComponent = () => {\n  return colComponent;\n};\n\nexport const getButtonComponent = () => {\n  return buttonComponent;\n};\n\nexport const getAlertComponent = () => {\n  return alertComponent;\n};\n\nexport const getOptionProperty = function getOptionProperty(option: any, property: string | ((option: any) => any)): any {\n  if (typeof option === 'string') {\n    return option;\n  } else if (typeof property === 'string') {\n    return option[property];\n  } else if (typeof property === 'function') {\n    return property(option);\n  }\n};\n\nexport function addRule(rules: any, field: SchemaFormField, rule: any) {\n  const type = field.type as any;\n  let validateType = 'string';\n  if (field.array) {\n    validateType = 'array';\n  } else if (type === 'number') {\n    validateType = 'number';\n  } else if (type === TYPES.integer) {\n    validateType = 'integer';\n  } else if (type === TYPES.double) {\n    validateType = 'string';\n  } else if (type === TYPES.object) {\n    validateType = 'object';\n  } else if (type === TYPES.date || type === TYPES.datetime || type === TYPES.year || type === TYPES.month) {\n    validateType = 'date';\n  } else if (type === TYPES.select || type === TYPES.expandSelect) {\n    const options = getOptions(field);\n    if (options.length) {\n      validateType = typeof getOptionProperty(options[0], field.props && field.props.valueProperty || 'value');\n    }\n  } else if (type === TYPES.daterange) {\n    validateType = 'array';\n  }\n  rule.type = validateType;\n  rules.push(rule);\n}\n\nexport const getConfirmFunction = (platform: Platform) => {\n  return platform === 'mobile' ? '$mconfirm' : confirmFunction;\n};\n","module.exports = Vue;","export const globalThisPolyfill =\n    self || window || global || Function('return this')();\n","import {ArrayPath, isArr, isNum, isObj, isPlainObj, isStr, Path, PathNode} from '../types';\nimport {each, every, map} from './array';\nimport {LRUMap} from './lru';\n\ninterface ITokenizerHandlers {\n  destructArrayEnd(): void;\n\n  destructArrayStart(): void;\n\n  destructKey(str: string, isColon?: boolean): void;\n\n  destructObjectEnd(): void;\n\n  destructObjectStart(): void;\n\n  name(str: string): void;\n}\n\ntype Destruct =\n    | {\n  [key: string]: string\n}\n    | Path;\n\ntype Getter = (obj: any, path: Path, value?: any) => any;\n\ntype Setter = (\n    obj: any,\n    path: Path,\n    value?: any,\n    getSchema?: (path: string[] | number[]) => any\n) => any;\n\ntype HasIn = (obj: any, path: Path) => boolean;\n\nfunction whitespace(c: string) {\n  return c === ' ' || c === '\\n' || c === '\\t' || c === '\\f' || c === '\\r';\n}\n\nfunction toString(val: Path | null) {\n  if (!val) {\n    return '';\n  }\n  if (isArr(val)) {\n    return (val as string[]).join('.');\n  }\n  return isStr(val) ? val : '';\n}\n\nconst PathCache = new LRUMap(1000);\n\nexport function getPathSegments(path: Path): ArrayPath {\n  if (isArr(path)) {\n    return path as string[];\n  }\n  if (isStr(path) && path) {\n    const cached = PathCache.get(path);\n    if (cached) {\n      return cached;\n    }\n    const pathArr = (path as string).split('.');\n    const parts = [];\n\n    for (let i = 0; i < pathArr.length; i++) {\n      let p = pathArr[i];\n\n      while (p[p.length - 1] === '\\\\' && pathArr[i + 1] !== undefined) {\n        p = p.slice(0, -1) + '.';\n        p += pathArr[++i];\n      }\n\n      parts.push(p);\n    }\n    PathCache.set(path, parts);\n    return parts;\n  }\n  if (isNum(path)) {\n    return [path as number];\n  }\n  return [];\n}\n\nclass DestructTokenizer {\n  private EOF: boolean;\n  private declareNameEnd: number;\n  private declareNameStart: number;\n  private destructKey: string;\n  private destructKeyStart: number;\n  private handlers: ITokenizerHandlers;\n  private index: number;\n  private nbraceCount: number;\n  private nbracketCount: number;\n  private state: (char: string, prev?: string) => void;\n  private text: string;\n\n  constructor(text: string, handlers: ITokenizerHandlers) {\n    this.text = text;\n    this.index = 0;\n    this.handlers = handlers;\n    this.state = this.processNameStart;\n    this.declareNameStart = 0;\n    this.declareNameEnd = 0;\n    this.nbraceCount = 0;\n    this.nbracketCount = 0;\n  }\n\n  public parse() {\n    let char = '';\n    let prev = '';\n    const l = this.text.length;\n    for (; this.index < l; this.index++) {\n      char = this.text.charAt(this.index);\n      this.EOF = l - 1 === this.index;\n      this.state(char, prev);\n      prev = char;\n    }\n  }\n\n  private getName() {\n    return this.text.substring(this.declareNameStart, this.declareNameEnd);\n  }\n\n  private processDestructKey(char: string, prev: string) {\n    if (char === '}') {\n      this.nbraceCount--;\n\n      if (this.nbraceCount || this.nbracketCount) {\n        this.state = this.processDestructStart;\n      }\n      if (!whitespace(prev)) {\n        this.destructKey = this.text.substring(\n            this.destructKeyStart,\n            this.index\n        );\n      }\n\n      this.handlers.destructKey(this.destructKey);\n      this.handlers.destructObjectEnd();\n      if (!this.nbraceCount && !this.nbracketCount) {\n        this.index = this.text.length;\n      }\n    } else if (char === ']') {\n      this.nbracketCount--;\n\n      if (this.nbraceCount || this.nbracketCount) {\n        this.state = this.processDestructStart;\n      }\n      if (!whitespace(prev)) {\n        this.destructKey = this.text.substring(\n            this.destructKeyStart,\n            this.index\n        );\n      }\n      this.handlers.destructKey(this.destructKey);\n      this.handlers.destructArrayEnd();\n      if (!this.nbraceCount && !this.nbracketCount) {\n        this.index = this.text.length;\n      }\n    } else if (whitespace(char) || char === ':' || char === ',') {\n      if (!whitespace(prev)) {\n        this.destructKey = this.text.substring(\n            this.destructKeyStart,\n            this.index\n        );\n      }\n      if (!whitespace(char)) {\n        this.state = this.processDestructStart;\n        this.handlers.destructKey(this.destructKey, char === ':');\n      }\n    }\n  }\n\n  private processDestructStart(char) {\n    if (char === '{') {\n      this.nbraceCount++;\n      this.handlers.destructObjectStart();\n    } else if (char === '[') {\n      this.nbracketCount++;\n      this.handlers.destructArrayStart();\n    } else if (!whitespace(char)) {\n      this.state = this.processDestructKey;\n      this.destructKeyStart = this.index;\n      this.index--;\n    }\n  }\n\n  private processName(char: string, prev: string) {\n    if (whitespace(char)) {\n      this.declareNameEnd = this.index;\n      this.handlers.name(this.getName());\n    } else if (this.EOF) {\n      this.declareNameEnd = this.index + 1;\n      this.handlers.name(this.getName());\n    }\n  }\n\n  private processNameStart(char: string) {\n    if (char === '{' || char === '[') {\n      this.state = this.processDestructStart;\n      this.index--;\n    } else if (!whitespace(char)) {\n      this.declareNameStart = this.index;\n      this.state = this.processName;\n    }\n  }\n}\n\nconst parseDestruct = (str: PathNode) => {\n  if (!isStr(str)) {\n    return str;\n  }\n\n  let destruct: Destruct;\n  const stack = [];\n  let token = '';\n  let realKey = '';\n  let lastDestruct: Destruct;\n  let root: Destruct;\n\n  new DestructTokenizer(str as string, {\n    name(key: string) {\n      root = key;\n    },\n    destructKey(key, readyReplace) {\n      if (!key) {\n        return;\n      }\n      token = key;\n      if (readyReplace) {\n        realKey = key;\n        lastDestruct = destruct;\n        return;\n      }\n      if (isArr(destruct)) {\n        (destruct as string[]).push(key);\n      } else if (isPlainObj(destruct)) {\n        destruct[realKey && lastDestruct === destruct ? realKey : key] = key;\n      }\n      realKey = '';\n      lastDestruct = destruct;\n    },\n    destructArrayStart() {\n      if (!destruct) {\n        root = [];\n        destruct = root;\n      } else {\n        destruct = [];\n      }\n      const tail = stack[stack.length - 1];\n      if (isPlainObj(tail)) {\n        tail[token] = destruct;\n      } else if (isArr(tail)) {\n        tail.push(destruct);\n      }\n      stack.push(destruct);\n    },\n    destructObjectStart() {\n      if (!destruct) {\n        root = {};\n        destruct = root;\n      } else {\n        destruct = {};\n      }\n      const tail = stack[stack.length - 1];\n      if (isPlainObj(tail)) {\n        tail[token] = destruct;\n      } else if (isArr(tail)) {\n        tail.push(destruct);\n      }\n      stack.push(destruct);\n    },\n    destructArrayEnd() {\n      stack.pop();\n      destruct = stack[stack.length - 1];\n    },\n    destructObjectEnd() {\n      stack.pop();\n      destruct = stack[stack.length - 1];\n    }\n  }).parse();\n  return root;\n};\n\nconst traverse = (obj: any, callback: any) => {\n  const internalTraverse = (internalObj: any, path: string[]) => {\n    if (isStr(internalObj)) {\n      return callback(internalObj, internalObj);\n    }\n    each(internalObj, (item: any, key: string) => {\n      const newPath = path.concat(key);\n      if (isArr(item) || isPlainObj(item)) {\n        internalTraverse(item, newPath);\n      } else {\n        callback(newPath, item);\n      }\n    });\n  };\n\n  return internalTraverse(obj, []);\n};\n\nconst mapReduce = (obj: any, callback: any) => {\n  const internalTraverse = (internalObj: any, path: string[]) => {\n    return map(internalObj, (item: any, key: string) => {\n      const newPath = path.concat(key);\n      if (isArr(item) || isPlainObj(item)) {\n        return internalTraverse(item, newPath);\n      } else {\n        return callback(\n            newPath,\n            newPath.slice(0, newPath.length - 1).concat(item)\n        );\n      }\n    });\n  };\n\n  return internalTraverse(obj, []);\n};\n\nconst parseDestructPath = (path: Path): any => {\n  const newPath = getPathSegments(path);\n  const lastKey = newPath[newPath.length - 1];\n  const startPath = newPath.slice(0, newPath.length - 1);\n  const destruct = parseDestruct(lastKey);\n  return {\n    path: newPath,\n    lastKey,\n    startPath,\n    destruct\n  };\n};\n\nconst parsePaths = (path: Path): any => {\n  const result = [];\n  const parsed = parseDestructPath(path);\n  if (isStr(parsed.destruct)) {\n    return path;\n  } else if (parsed.destruct) {\n    traverse(parsed.destruct, (internalPath, key) => {\n      result.push({\n        path: parsed.startPath.concat(internalPath),\n        startPath: parsed.startPath,\n        endPath: internalPath,\n        key\n      });\n    });\n    return result;\n  } else {\n    return path;\n  }\n};\n\nconst resolveGetIn = (get: Getter) => {\n  const cache = new Map();\n  return (obj: any, path: Path, value?: any): any => {\n    let ast = null;\n\n    if (!cache.get(path)) {\n      ast = parseDestructPath(path);\n      cache.set(path, ast);\n    } else {\n      ast = cache.get(path);\n    }\n    if (!isArr(ast.destruct) && !isPlainObj(ast.destruct)) {\n      return get(obj, path, value);\n    }\n    return mapReduce(ast.destruct, (mapPath, key) => {\n      return get(obj, ast.startPath.concat(key[key.length - 1]));\n    });\n  };\n};\n\nconst resolveUpdateIn = (update: Setter, internalGetIn: Getter) => {\n  const cache = new Map();\n  return (\n      obj: any,\n      path: Path,\n      value?: any,\n      getSchema?: (path: string[] | number[]) => any\n  ) => {\n    let paths: any = [];\n    if (!cache.get(path)) {\n      paths = parsePaths(path);\n      cache.set(path, paths);\n    } else {\n      paths = cache.get(path);\n    }\n    if (!isArr(paths)) {\n      return update(obj, path, value, getSchema);\n    }\n    if (paths && paths.length) {\n      each(paths, ({mapPath, key, startPath, endPath}) => {\n        update(\n            obj,\n            startPath.concat(key),\n            internalGetIn(value, endPath),\n            getSchema\n        );\n      });\n    }\n    return obj;\n  };\n};\n\nconst resolveExistIn = (has: HasIn) => {\n  const cache = new Map();\n  return (obj: any, path: Path) => {\n    let paths: any = [];\n    if (!cache.get(path)) {\n      paths = parsePaths(path);\n      cache.set(path, paths);\n    } else {\n      paths = cache.get(path);\n    }\n    if (!isArr(paths)) {\n      return has(obj, path);\n    }\n    if (paths && paths.length) {\n      return every(paths, ({startPath, key}) => {\n        return has(obj, startPath.concat(key));\n      });\n    }\n\n    return false;\n  };\n};\n\nfunction _getIn(obj: any, path: Path, value: any) {\n  if (!isObj(obj) || !path) {\n    return obj;\n  }\n\n  const copyPath = toString(path);\n\n  if (copyPath in obj) {\n    return obj[copyPath as string];\n  }\n  let copyObj = obj;\n  const pathArr = getPathSegments(copyPath);\n\n  for (let i = 0; i < pathArr.length; i++) {\n    if (!Object.prototype.propertyIsEnumerable.call(copyObj, pathArr[i])) {\n      return value;\n    }\n\n    copyObj = copyObj[pathArr[i]];\n\n    if (copyObj === undefined || copyObj === null) {\n      // `obj` is either `undefined` or `null` so we want to stop the loop, and\n      // if this is not the last bit of the path, and\n      // if it did't return `undefined`\n      // it would return `null` if `obj` is `null`\n      // but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n      if (i !== pathArr.length - 1) {\n        return value;\n      }\n\n      break;\n    }\n  }\n\n  return copyObj;\n}\n\nfunction _setIn(\n    obj: any,\n    path: Path,\n    value: any,\n    getSchema?: (path: string[] | number[]) => any\n) {\n  let copyObj = obj;\n  if (!isObj(copyObj) || !path) {\n    return;\n  }\n\n  const copyPath = toString(path);\n\n  if (copyPath in copyObj) {\n    copyObj[copyPath as string] = value;\n    return;\n  }\n\n  const pathArr = getPathSegments(copyPath);\n\n  for (let i = 0; i < pathArr.length; i++) {\n    const p = pathArr[i];\n    if (!isObj(copyObj[p])) {\n      if (copyObj[p] === undefined && value === undefined) {\n        return;\n      }\n      if (/^\\d+$/.test(pathArr[i + 1 + ''])) {\n        if (getSchema) {\n          const schema = getSchema(pathArr.slice(0, i) as string[]);\n\n          if (!schema || schema.type === 'array') {\n            copyObj[p] = [];\n          } else {\n            copyObj[p] = {};\n          }\n        } else {\n          copyObj[p] = [];\n        }\n      } else {\n        copyObj[p] = {};\n      }\n    }\n\n    if (i === pathArr.length - 1) {\n      copyObj[p] = value;\n    }\n\n    copyObj = copyObj[p];\n  }\n}\n\nfunction _deleteIn(obj: any, path: Path) {\n  let copyObj = obj;\n  if (!isObj(copyObj) || !path) {\n    return;\n  }\n\n  const copyPath = toString(path);\n\n  if (copyPath in copyObj) {\n    delete copyObj[copyPath as string];\n    return;\n  }\n\n  const pathArr = getPathSegments(copyPath);\n\n  for (let i = 0; i < pathArr.length; i++) {\n    const p = pathArr[i];\n\n    if (i === pathArr.length - 1) {\n      if (isArr(copyObj)) {\n        copyObj.splice(p as number, 1);\n      } else {\n        delete copyObj[p];\n      }\n      return;\n    }\n\n    copyObj = copyObj[p];\n\n    if (!isObj(copyObj)) {\n      return;\n    }\n  }\n}\n\nfunction _existIn(obj: any, path: Path) {\n  if (!isObj(obj) || !path) {\n    return false;\n  }\n\n  const copyPath = toString(path);\n\n  if (copyPath in obj) {\n    return true;\n  }\n  let copyObj = obj;\n  const pathArr = getPathSegments(copyPath);\n\n  for (let i = 0; i < pathArr.length; i++) {\n    if (isObj(copyObj)) {\n      if (!(pathArr[i] in copyObj)) {\n        return false;\n      }\n\n      copyObj = copyObj[pathArr[i]];\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport const getIn = resolveGetIn(_getIn);\nexport const setIn = resolveUpdateIn(_setIn, getIn);\nexport const deleteIn = resolveUpdateIn(_deleteIn, getIn);\nexport const existIn = resolveExistIn(_existIn);\nexport {parseDestructPath, parseDestruct, parsePaths};\n","import Vue from 'vue';\nimport Component from 'vue-class-component';\n\nfunction broadcast(this: any, componentName, eventName, params) {\n  this.$children.forEach(child => {\n    const name = child.$options.componentName;\n    if (name === componentName) {\n      child.$emit.apply(child, [eventName].concat(params));\n    } else {\n      broadcast.apply(child, [componentName, eventName].concat([params]) as any);\n    }\n  });\n}\n\n@Component({\n  name: 'Emitter'\n})\nexport default class Emitter extends Vue {\n\n  public dispatch(componentName: string, eventName: any, params?: any[]) {\n    let parent = this.$parent || this.$root;\n    let name = parent.$options.name;\n    while (parent && (!name || name !== componentName)) {\n      parent = parent.$parent;\n      if (parent) {\n        name = parent.$options.name;\n      }\n    }\n    if (parent) {\n      parent.$emit.apply(parent, params ? [eventName].concat(params) as any : [eventName]);\n    }\n  }\n\n  public broadcast(componentName, eventName, params) {\n    broadcast.call(this, componentName, eventName, params);\n  }\n}\n","import {getButtonComponent, getColComponent, getRowComponent} from '@/schema-form/utils';\n\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\nimport {Inject, Prop} from 'vue-property-decorator';\n\n@Component({\n  name: 'ArrayWrapper'\n})\nexport default class ArrayWrapper extends Vue {\n  @Prop({type: Number, default: 24})\n  public cellSpan: number;\n  @Prop(String)\n  public addBtnText: string;\n  @Prop(Object)\n  public addBtnProps: any;\n  @Prop({type: Number, default: 0})\n  public maxLength: number;\n  @Prop({type: Boolean, default: false})\n  public subForm: boolean;\n  @Inject('store')\n  public store: any;\n\n\n  public renderAddButton() {\n    if (this.store.mode === 'display') {\n      return null;\n    }\n    const ColComponent = getColComponent();\n    let ButtonComponent = getButtonComponent();\n    if (this.$attrs.platform === 'mobile') {\n      ButtonComponent = 'm-button';\n    }\n    const buttonStyle: any = {};\n    if (this.addBtnProps && this.addBtnProps.block) {\n      buttonStyle.width = '100%';\n    }\n    const button = <ButtonComponent onClick={this.onAddClick}\n                                    disabled={this.store && (this.store.disabled || this.store.loading)}\n                                    style={buttonStyle}\n                                    icon=\"plus\"\n                                    attrs={Object.assign({}, this.addBtnProps)}>{this.addBtnText || '添加'}</ButtonComponent>;\n    if (this.subForm) {\n      return <div style={{margin: '10px 15px'}}>{button}</div>;\n    }\n    return <ColComponent span={this.cellSpan}>{button}</ColComponent>;\n  }\n\n  public onAddClick(this: any) {\n    this.$emit('add');\n  }\n\n  public render() {\n    const RowComponent = getRowComponent();\n    const content = [\n      this.$slots.default,\n      this.renderAddButton()\n    ];\n    if (this.subForm) {\n      return <div>{content}</div>;\n    }\n    if (this.$attrs.platform === 'mobile') {\n      return content;\n    } else {\n      return <RowComponent gutter={this.$attrs.gutter || 20}\n                           type=\"flex\">{content}</RowComponent>;\n    }\n  }\n}\n","import Emitter from '@/mixins/emitter';\nimport {Platform, SchemaFormField} from '@/types/bean';\nimport {IField} from '@/uform/types';\nimport AsyncValidator from 'async-validator';\nimport {VNode} from 'vue';\nimport Component, {mixins} from 'vue-class-component';\nimport {Prop, Watch} from 'vue-property-decorator';\nimport ArrayWrapper from './array-wrapper';\nimport {\n  addRule,\n  DESKTOP,\n  getAlertComponent,\n  getColComponent,\n  getComponent,\n  getConfirmFunction,\n  getDisplayComponent,\n  getFormComponent,\n  getOptions,\n  SchemaFormComponent,\n  TYPES\n} from './utils';\n\n@Component({\n  name: 'FormField'\n})\nexport default class FormField extends mixins(Emitter) {\n\n  @Prop(Object)\n  public definition: SchemaFormField;\n  @Prop([Object, Array])\n  public formValue: { [key: string]: any } | [];\n  @Prop({type: Boolean, default: false})\n  public display: boolean;\n  @Prop({type: String, default: 'mobile'})\n  public platform: Platform;\n  @Prop()\n  public value: any;\n  public currentValue: any = null;\n  @Prop()\n  public content: any;\n  @Prop({type: Boolean, default: false})\n  public disabled: boolean;\n  @Prop(Array)\n  public path: string[];\n  @Prop({required: true})\n  public field: IField;\n\n  get componentType(): SchemaFormComponent {\n    let component: SchemaFormComponent = null;\n    if (this.display) {\n      component = getDisplayComponent(this.platform, this.definition);\n    } else {\n      component = getComponent(this.platform, this.definition);\n    }\n    if (component.component === 'empty') {\n      console.warn(`类型${this.field.type}${this.field.array ? '（数组）' : ''}没有对应的${this.display ? '展示' : '编辑'}组件`);\n    }\n    return component;\n  }\n\n  get options() {\n    return getOptions(this.field);\n  }\n\n  get props() {\n    const {field} = this;\n    const props: any = Object.assign({}, this.componentType.getProps(field));\n    const type = field.type;\n    if (type === TYPES.select || type === TYPES.expandSelect) {\n      props.options = this.options;\n    }\n    if (type === TYPES.object) {\n      props.platform = this.platform;\n      props.mode = this.display ? 'display' : 'edit';\n      props.pathPrefix = this.path;\n    }\n    if (this.display) {\n      delete props.required;\n    }\n    return props;\n  }\n\n  @Watch('currentValue')\n  public currentValueChanged(currentValue: any) {\n    this.$emit('input', currentValue);\n    this.$emit('change', currentValue);\n    if (this.field.onChange) {\n      this.field.onChange(currentValue);\n    }\n    this.$forceUpdate();\n  }\n\n  @Watch('value', {immediate: true})\n  public valueChanged(value: any) {\n    if (this.currentValue !== value) {\n      this.currentValue = value;\n    }\n  }\n\n  public created() {\n    this.dispatch('ASchemaForm', 'SchemaForm.addField', [this]);\n  }\n\n  @Watch('field', {immediate: true})\n  public fieldChanged(field: IField) {\n    this.dispatch('ASchemaForm', 'SchemaForm.addSchemaField', [field]);\n  }\n\n  public beforeDestroy() {\n    this.dispatch('ASchemaForm', 'SchemaForm.removeField', [this]);\n    this.dispatch('ASchemaForm', 'SchemaForm.removeSchemaField', [this.field]);\n  }\n\n  public renderInputComponent() {\n    const {props, currentValue, definition} = this;\n    const inputFieldDef = this.componentType;\n    const InputFieldComponent = inputFieldDef.component;\n    if (this.content) {\n      return this.content;\n    }\n    if (this.display && this.definition.displayValue) {\n      if (typeof this.definition.displayValue === 'function') {\n        return this.definition.displayValue(this.currentValue);\n      } else {\n        return this.definition.displayValue;\n      }\n    }\n    if (this.field.array && inputFieldDef.forArray === false) {\n      // @ts-ignore\n      return <ArrayWrapper\n        disabled={this.disabled}\n        subForm={this.field.type === TYPES.object}\n        addBtnText={props.addBtnText}\n        ref=\"array\"\n        platform={this.platform}\n        addBtnProps={props.addBtnProps}\n        cellSpan={props.cellSpan}\n        onAdd={() => {\n          this.addArrayItem();\n        }}>\n        {\n          this.currentValue ? this.currentValue.map((v, index) => {\n            const itemProps = Object.assign({}, props, {\n              pathPrefix: this.path.concat(index)\n            });\n            if (this.field.type === TYPES.object) {\n              itemProps.definition = Object.assign({}, itemProps.definition);\n              delete itemProps.definition.array;\n            }\n            // @ts-ignore\n            return <InputFieldComponent\n              attrs={itemProps}\n              arrayIndex={index}\n              disabled={this.disabled}\n              onRemoveArrayItem={async () => {\n                const confirmFunc = getConfirmFunction(this.platform);\n                await this[confirmFunc]('确定删除该条吗？', '提示');\n                this.currentValue.splice(index, 1);\n              }}\n              value={v}\n              title={this.platform === 'mobile' ? this.field.title : null}\n              onInput={(val) => {\n                this.onArrayItemInput(val, index);\n              }}/>;\n          }) : null\n        }\n      </ArrayWrapper>;\n    }\n    // @ts-ignore\n    return <InputFieldComponent\n      attrs={props}\n      ref=\"input\"\n      disabled={this.disabled}\n      value={currentValue}\n      title={this.platform === 'mobile' ? this.field.title : null}\n      onInput={this.onInput}/>;\n  }\n\n  get formItemComponent() {\n    return getFormComponent(this.platform) + '-item';\n  }\n\n  public render() {\n    const {props, field, definition, platform} = this;\n    if (this.display) {\n      props.definition = this.definition;\n    }\n    const component = this.renderInputComponent();\n    let item = null;\n    const FormItemComponent = this.formItemComponent;\n    const ColComponent = getColComponent();\n    if (platform === DESKTOP) {\n      const formItem = field.type === TYPES.object ? component :\n        <FormItemComponent attrs={this.getFormItemProps()}>\n          {component}\n          {this.renderNotice()}\n        </FormItemComponent>;\n      if (definition.span) {\n        item = <ColComponent span={definition.span}>{formItem}</ColComponent>;\n      } else if (definition.type === 'Extra') {\n        item = component;\n      } else {\n        item = formItem;\n      }\n    } else {\n      if (this.display) {\n        if (this.definition.type === TYPES.object) {\n          item = component;\n        } else {\n          item = <m-list-item title={definition.title} extra={component}/>;\n        }\n      } else {\n        item = component;\n      }\n    }\n    const style: any = {};\n    if (!field.visible) {\n      style.display = 'none';\n    }\n    (item as VNode).data.staticStyle = style;\n    return item;\n  }\n\n  public getRules() {\n    const field = this.definition;\n    const rules = field.rules || [];\n    if (rules.length === 0) {\n      if (field.required) {\n        addRule(rules, field, {required: true, message: `${field.title}为必填项`});\n      }\n      if (typeof field.min === 'number') {\n        addRule(rules, field, {min: field.min, message: `${field.title}不能小于${field.min}`});\n      }\n      if (typeof field.max === 'number') {\n        addRule(rules, field, {max: field.max, message: `${field.title}不能大于${field.max}`});\n      }\n    }\n    return rules;\n  }\n\n  public onInput(value) {\n    this.currentValue = value;\n  }\n\n  private renderNotice() {\n    const AlertComponent = getAlertComponent();\n    if (this.definition.notice) {\n      return <AlertComponent message={this.definition.notice}/>;\n    }\n  }\n\n  get error() {\n    return this.field.errors.join('、');\n  }\n\n  public getFormItemProps() {\n    const {definition} = this;\n    const component = this.formItemComponent;\n    const props: any = {\n      required: this.display ? null : definition.required,\n      title: definition.title,\n      label: definition.title\n    };\n    if (component === 'd-form-item' || component === 'a-form-item') {\n      props.help = this.field.errors.join('、');\n      if (props.help) {\n        props.hasFeedback = true;\n        props.validateStatus = 'error';\n      }\n    } else if (component === 'el-form-item') {\n      props.error = this.field.errors.join('、');\n    }\n    return props;\n  }\n\n  public validate() {\n    const {field} = this;\n    if (this.definition.type === TYPES.object\n      && this.$refs.array) {\n      const array = this.$refs.array as any;\n      const validateFields = array.$children.filter(it => it.validate);\n      return new Promise((resolve) => {\n        Promise.all(validateFields.map(it => {\n          return it.validate();\n        })).then((values) => {\n          if (values.some(it => !it)) {\n            resolve(false);\n          } else {\n            resolve(true);\n          }\n        }).catch(() => {\n          resolve(false);\n        });\n      });\n    }\n    const rules = this.getRules();\n    if (rules.length) {\n      const validator = new AsyncValidator({\n        [field.plainPath]: rules\n      });\n      const model = {\n        [field.plainPath]: this.currentValue\n      };\n      return new Promise((resolve) => {\n        validator.validate(model, {firstFields: true}, (errors, invalidFields) => {\n          if (errors) {\n            field.valid = false;\n            field.errors = errors.map(error => error.message);\n          } else {\n            field.valid = true;\n            field.errors = [];\n          }\n          resolve(this.field.valid);\n        });\n      });\n    }\n    return true;\n  }\n\n  private addArrayItem() {\n    if (this.currentValue) {\n      if (this.definition.type === TYPES.object) {\n        this.currentValue.push({});\n      } else {\n        this.currentValue.push(null);\n      }\n    } else {\n      if (this.definition.type === TYPES.object) {\n        this.currentValue = [{}];\n      } else {\n        this.currentValue = [null];\n      }\n    }\n  }\n\n  private onArrayItemInput(val: any, index: number) {\n    this.currentValue[index] = val;\n    this.onInput(this.currentValue);\n  }\n}\n","import {isArr, isFn} from '../types';\n\nconst isArray = isArr;\nconst keyList = Object.keys;\nconst hasProp = Object.prototype.hasOwnProperty;\n\ntype Filter = (\n    comparies: {\n      a: any;\n      b: any\n    },\n    key: string) => boolean;\n\n/* eslint-disable */\nfunction equal(a: any, b: any, filter: Filter) {\n  // fast-deep-equal index.js 2.0.1\n  if (a === b) {\n    return true;\n  }\n\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const arrA = isArray(a);\n    const arrB = isArray(b);\n    let i: number;\n    let length: number;\n    let key: string | number;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length !== b.length) {\n        return false;\n      }\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i], filter)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    if (arrA !== arrB) {\n      return false;\n    }\n\n    const dateA = a instanceof Date;\n    const dateB = b instanceof Date;\n    if (dateA !== dateB) {\n      return false;\n    }\n    if (dateA && dateB) {\n      return a.getTime() === b.getTime();\n    }\n\n    const regexpA = a instanceof RegExp;\n    const regexpB = b instanceof RegExp;\n    if (regexpA !== regexpB) {\n      return false;\n    }\n    if (regexpA && regexpB) {\n      return a.toString() === b.toString();\n    }\n    const urlA = a instanceof URL;\n    const urlB = b instanceof URL;\n    if (urlA && urlB) {\n      return a.href === b.href;\n    }\n    const keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length) {\n      return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      if (!hasProp.call(b, keys[i])) {\n        return false;\n      }\n    }\n    // end fast-deep-equal\n\n    // Custom handling for React\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of a react element\n        continue;\n      } else {\n        if (isFn(filter)) {\n          if (filter({a: a[key], b: b[key]}, key)) {\n            if (!equal(a[key], b[key], filter)) {\n              return false;\n            }\n          }\n        } else {\n          // all other properties should be traversed as usual\n          if (!equal(a[key], b[key], filter)) {\n            return false;\n          }\n        }\n      }\n    }\n\n    // fast-deep-equal index.js 2.0.1\n    return true;\n  }\n\n  if (a && b && typeof a === 'function' && typeof b === 'function') {\n    return a.toString() === b.toString();\n  }\n\n  return a !== a && b !== b;\n}\n\n// end fast-deep-equal\n\nexport const isEqual = function exportedEqual(a: any, b: any, filter?: Filter) {\n  try {\n    return equal(a, b, filter);\n  } catch (error) {\n    if (\n        (error.message && error.message.match(/stack|recursion/i)) ||\n        error.number === -2146828260\n    ) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn(\n          'Warning: react-fast-compare does not handle circular references.',\n          error.name,\n          error.message\n      );\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\n\n@Component({\n  name: 'DemoIndex'\n})\nexport default class DemoIndex extends Vue {\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=tsx&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=845d71d2&\"\nimport script from \"./index.vue?vue&type=script&lang=tsx&\"\nexport * from \"./index.vue?vue&type=script&lang=tsx&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import DemoIndex from '@/views/demo/index.vue';\nimport VueRouter, {RouteConfig} from 'vue-router';\n\nexport const demoRoutes: RouteConfig[] = [\n  {\n    path: 'element/display',\n    component: () => import('@/views/demo/element/display.vue'),\n    meta: {tag: 'Element UI', name: '详情'}\n  }, {\n    path: 'element/edit',\n    component: () => import('@/views/demo/element/edit.vue'),\n    meta: {tag: 'Element UI', name: '编辑'}\n  }, {\n    path: 'element/effects',\n    component: () => import('@/views/demo/element/effects.vue'),\n    meta: {tag: 'Element UI', name: '副作用函数'}\n  }, {\n    path: 'desktop/subform/display',\n    component: () => import('@/views/demo/subform/display.vue'),\n    meta: {tag: '子表单', name: '详情'}\n  }, {\n    path: 'desktop/subform/edit',\n    component: () => import('@/views/demo/subform/edit.vue'),\n    meta: {tag: '子表单', name: '编辑'}\n  }, {\n    path: 'desktop/simple',\n    component: () => import('@/views/demo/antd/simple.vue'),\n    meta: {tag: 'Ant Design Vue', name: '简单场景'}\n  }, {\n    path: 'desktop/display',\n    component: () => import('@/views/demo/antd/display.vue'),\n    meta: {tag: 'Ant Design Vue', name: '详情'}\n  }, {\n    path: 'desktop/edit',\n    component: () => import('@/views/demo/antd/edit.vue'),\n    meta: {tag: 'Ant Design Vue', name: '编辑'}\n  }, {\n    path: 'desktop/validate',\n    component: () => import('@/views/demo/antd/validate.vue'),\n    meta: {tag: 'Ant Design Vue', name: '表单校验'}\n  }, {\n    path: 'desktop/effects',\n    component: () => import('@/views/demo/antd/effects.vue'),\n    meta: {tag: 'Ant Design Vue', name: '副作用函数'}\n  }, {\n    path: 'desktop/destruct',\n    component: () => import('@/views/demo/antd/destruct.vue'),\n    meta: {tag: 'Ant Design Vue', name: '解构'}\n  }, {\n    path: 'mobile/display',\n    component: () => import('@/views/demo/mobile/display.vue'),\n    meta: {tag: '移动端示例', name: '详情模式'}\n  }, {\n    path: 'mobile/edit',\n    component: () => import('@/views/demo/mobile/edit.vue'),\n    meta: {tag: '移动端示例', name: '编辑模式'}\n  }\n];\nexport default new VueRouter({\n  routes: [{\n    path: '/doc',\n    component: () => import('@/views/readme.vue')\n  }, {\n    path: '/demo',\n    name: 'demo',\n    component: DemoIndex,\n    children: demoRoutes\n  }]\n});\n","import Vue from 'vue';\nimport Vuex from 'vuex';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n\n  },\n  mutations: {\n\n  },\n  actions: {\n\n  },\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ae-layout',{attrs:{\"theme\":\"light\"}},[_c('ae-layout-header'),_c('ae-layout',[_c('ae-layout-sider',{staticStyle:{\"margin\":\"10px\",\"overflow\":\"auto\"},attrs:{\"width\":\"200px\"}},[_c('a-menu',[_c('a-menu-item',[_vm._v(\"安装\")]),_c('a-menu-item',{on:{\"click\":function($event){return _vm.to('/doc')}}},[_vm._v(\"使用\")]),_vm._l((_vm.groups),function(items,key){return _c('a-menu-item-group',{key:key,attrs:{\"title\":key}},_vm._l((items),function(item){return _c('a-menu-item',{key:item.path,on:{\"click\":function($event){return _vm.to(item.path)}}},[_vm._v(_vm._s(item.meta && item.meta.name)+\"\\n          \")])}),1)})],2)],1),_c('ae-layout-content',{staticStyle:{\"margin\":\"10px 10px 10px 0\"}},[_c('router-view')],1)],1),_c('ae-layout-footer')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {demoRoutes} from '@/router';\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\n\nconst options = [{\n  label: '选项1',\n  value: 1\n}, {\n  label: '选项2',\n  value: 2\n}, {\n  label: '选项3',\n  value: 3\n}];\n@Component({\n  name: 'App',\n})\nexport default class App extends Vue {\n  private groups: object = {};\n\n  public created() {\n    const groups = {};\n    demoRoutes.forEach(route => {\n      const key = route.meta && route.meta.tag || '其他';\n      groups[key] = groups[key] || [];\n      groups[key].push(route);\n    });\n    this.groups = groups;\n  }\n\n  public to(path: string) {\n    return this.$router.push('/demo/' + path);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b95c1b8a&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {DForm} from 'aegis-ui-desktop';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport Vue from 'vue';\nimport SchemaForm from './index';\nimport router from './router';\nimport store from './store';\nimport './styles/index.less';\nimport App from './views/index.vue';\n\nVue.use(DForm);\nSchemaForm.registerAntdMobile();\n\nnew Vue({\n  store,\n  router,\n  render: h => h(App)\n}).$mount('#app');\n","const has = Object.prototype.hasOwnProperty;\n\nconst toString = Object.prototype.toString;\n\nexport function isEmpty(val: any): boolean {\n  // Null and Undefined...\n  if (val == null) {\n    return true;\n  }\n\n  // Booleans...\n  if (typeof val === 'boolean') {\n    return false;\n  }\n\n  // Numbers...\n  if (typeof val === 'number') {\n    return false;\n  }\n\n  // Strings...\n  if (typeof val === 'string') {\n    return val.length === 0;\n  }\n\n  // Functions...\n  if (typeof val === 'function') {\n    return val.length === 0;\n  }\n\n  // Arrays...\n  if (Array.isArray(val)) {\n    if (val.length === 0) {\n      return true;\n    }\n    for (let i = 0; i < val.length; i++) {\n      if (\n          val[i] !== undefined &&\n          val[i] !== null &&\n          val[i] !== '' &&\n          val[i] !== 0\n      ) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  // Errors...\n  if (val instanceof Error) {\n    return val.message === '';\n  }\n\n  // Objects...\n  if (val.toString === toString) {\n    switch (val.toString()) {\n        // Maps, Sets, Files and Errors...\n      case '[object File]':\n      case '[object Map]':\n      case '[object Set]': {\n        return val.size === 0;\n      }\n\n        // Plain objects...\n      case '[object Object]': {\n        for (const key in val) {\n          if (has.call(val, key)) {\n            return false;\n          }\n        }\n\n        return true;\n      }\n    }\n  }\n\n  // Anything else...\n  return false;\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"","export * from './schema';\nexport * from './types';\nexport * from './validator';\nexport * from './effects';\nexport * from './path';\nexport * from './field';\nexport * from './form';\nexport * from './rule';\n","const isType = <T>(type: string) => (obj: unknown): obj is T =>\n    obj != null && Object.prototype.toString.call(obj) === `[object ${type}]`;\n// FIXME: isFn, isArr is incorrect\nexport const isFn = isType<(...args: any[]) => any>('Function');\nexport const isArr = Array.isArray || isType<unknown[]>('Array');\nexport const isPlainObj = isType<object>('Object');\nexport const isStr = isType<string>('String');\nexport const isBool = isType<boolean>('Boolean');\nexport const isNum = isType<number>('Number');\nexport const isObj = (val: unknown): val is object => typeof val === 'object';\nexport const isRegExp = isType<RegExp>('RegExp');\n","import BaseForm from '@/schema-form/internal/base-form';\nimport {\n  ASchemaForm,\n  register,\n  registerAntd,\n  registerAntdMobile,\n  registerDisplay,\n  registerElement\n} from '@/schema-form/utils';\nimport {EffectsContext, EffectsHandlers} from '@/types/form';\nimport {IField} from '@/uform/types';\nimport Component, {mixins} from 'vue-class-component';\nimport {Prop, Provide, Watch} from 'vue-property-decorator';\n\n\n@Component({\n  name: ASchemaForm\n})\nexport default class SchemaForm extends mixins(BaseForm) {\n\n  public static Field: any;\n  public static install: (Vue) => void;\n  public static registerAntd = registerAntd;\n  public static registerAntdMobile = registerAntdMobile;\n  public static registerElement = registerElement;\n  public static registerComponent = register;\n  public static registerDisplayComponent = registerDisplay;\n  @Prop({type: Boolean, default: false})\n  public disabled: boolean;\n  @Prop({type: Boolean, default: false})\n  public readonly: boolean;\n  @Prop({type: Boolean, default: false})\n  public loading: boolean;\n  public context: EffectsContext;\n\n  @Provide()\n  public store = {\n    fields: {},\n    disabled: false,\n    loading: false,\n    readonly: false,\n    mode: 'edit'\n  };\n\n  @Watch('mode', {immediate: true})\n  public modeChanged(mode: string) {\n    this.store.mode = mode;\n    this.$forceUpdate();\n  }\n\n  @Watch('readonly', {immediate: true})\n  public readonlyChanged(readonly: boolean) {\n    this.store.readonly = readonly;\n  }\n\n  @Watch('disabled', {immediate: true})\n  public disabledChanged(disabled: boolean) {\n    this.store.disabled = disabled;\n  }\n\n  @Watch('loading', {immediate: true})\n  public loadingChanged(loading: boolean) {\n    this.store.loading = loading;\n  }\n\n\n  public mounted() {\n    if (this.effects) {\n      this.effects(this.context);\n    }\n  }\n\n  public createContext(): EffectsContext {\n    return (paths: string | string[]) => {\n      let fields: IField[] = [];\n      if (typeof paths === 'string') {\n        fields.push(this['store'].fields[paths]);\n      } else if (Array.isArray(paths)) {\n        fields = paths.map(path => this['store'].fields[path]);\n      }\n      fields = fields.filter(it => !!it);\n      return {\n        hide: () => {\n          fields.forEach(field => {\n            field.visible = false;\n          });\n        },\n        show: () => {\n          fields.forEach(field => {\n            field.visible = true;\n          });\n        },\n        setEnum: (options: any) => {\n          fields.forEach(field => {\n            field.props = Object.assign(field.props, {options});\n          });\n        },\n        setFieldProps: (props) => {\n          fields.forEach(field => {\n            field.props = Object.assign(field.props, props);\n          });\n        },\n        onFieldChange: (callback) => {\n          fields.forEach(field => {\n            field.onChange = callback;\n          });\n        },\n        subscribe: (event: string, callback) => {\n          fields.forEach(field => {\n            if (event === 'fieldChange') {\n              field.onChange = callback;\n            }\n          });\n        }\n      } as EffectsHandlers;\n    };\n  }\n\n  public created() {\n    this.context = this.createContext();\n    this.$on('SchemaForm.addField', (field) => {\n      if (field) {\n        this.fields.push(field);\n      }\n    });\n    this.$on('SchemaForm.addSchemaField', (field) => {\n      if (field) {\n        this.store.fields[field.plainPath] = field;\n      }\n    });\n    this.$on('SchemaForm.removeField', (field) => {\n      if (field.prop) {\n        this.fields.splice(this.fields.indexOf(field), 1);\n      }\n    });\n    this.$on('SchemaForm.removeSchemaField', (field) => {\n      if (field) {\n        delete this.store.fields[field.plainPath];\n      }\n    });\n  }\n\n}\n","import SchemaFormField from '@/schema-form/field';\nimport SchemaForm from '@/schema-form/form';\nimport './style.less';\n\nSchemaForm.Field = SchemaFormField;\n\nSchemaForm.install = (Vue) => {\n  Vue.component('ASchemaForm', SchemaForm);\n  Vue.component('ASchemaFormField', SchemaForm.Field);\n};\n\nexport default SchemaForm;\n","import SchemaForm from '@/schema-form';\n\nif (window.Vue) {\n  window.Vue.use(SchemaForm);\n}\n\nexport default SchemaForm;\n"],"sourceRoot":""}