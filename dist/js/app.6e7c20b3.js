(function(t){function e(e){for(var r,i,s=e[0],u=e[1],c=e[2],l=0,d=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);f&&f(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},i={app:0},a={app:0},o=[];function s(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-09c05534":"ed184db4","chunk-1801a433":"16e38e76","chunk-19d65525":"7d1690e4","chunk-1a51fca5":"5940b622","chunk-1fa84cfa":"87b889ad","chunk-29365920":"d8a231d3","chunk-507ead8f":"065557c2","chunk-571fa56d":"7c14602f","chunk-6e540f64":"72217c0f","chunk-7052c576":"d7c2e78c","chunk-7fae8c5a":"e4ffc198","chunk-d419d388":"071a6081","chunk-f3c15ee2":"f7f07b52","chunk-fa9ee09c":"41104d2c"}[t]+".js"}function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={"chunk-571fa56d":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise(function(e,n){for(var r="css/"+({}[t]||t)+"."+{"chunk-09c05534":"31d6cfe0","chunk-1801a433":"31d6cfe0","chunk-19d65525":"31d6cfe0","chunk-1a51fca5":"31d6cfe0","chunk-1fa84cfa":"31d6cfe0","chunk-29365920":"31d6cfe0","chunk-507ead8f":"31d6cfe0","chunk-571fa56d":"cb0e1eb6","chunk-6e540f64":"31d6cfe0","chunk-7052c576":"31d6cfe0","chunk-7fae8c5a":"31d6cfe0","chunk-d419d388":"31d6cfe0","chunk-f3c15ee2":"31d6cfe0","chunk-fa9ee09c":"31d6cfe0"}[t]+".css",a=u.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var c=o[s],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===a))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],l=c.getAttribute("data-href");if(l===r||l===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||a,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete i[t],f.parentNode.removeChild(f),n(o)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){i[t]=0}));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise(function(e,n){r=a[t]=[e,n]});e.push(r[2]=o);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=s(t);var d=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",d.name="ChunkLoadError",d.type=r,d.request=i,n[1](d)}a[t]=void 0}};var f=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0d62":function(t,e){},"34cb":function(t,e,n){"use strict";n("a481"),n("3b2b")},3603:function(t,e,n){"use strict";var r=n("eddd"),i=n.n(r);i.a},"38de":function(t,e,n){"use strict";n("d5ac"),n("af6b"),n("4ed9"),n("cf71")},"3a8d":function(t,e){},"43df":function(t,e,n){"use strict";var r=n("af6b");n.d(e,"parseDestructPath",function(){return r["b"]});n("4ed9"),n("bc9f"),n("4c3f"),n("d5ac"),n("944d"),n("38de"),n("6696"),n("cf71"),n("46a7"),n("ef06"),n("34cb"),n("a20a")},"46a7":function(t,e,n){"use strict";n("8590")},"4aac":function(t,e,n){"use strict";n("456d");var r=n("7618"),i=(n("5df3"),n("c5f6"),n("7cdf"),n("2638")),a=n.n(i),o=(n("6b54"),n("96cf"),n("6762"),n("2fdb"),n("7f7f"),n("ac6a"),n("28a5"),n("d225")),s=n("b0b4"),u=n("308d"),c=n("6bb5"),l=n("4e2b"),d=n("9ab4"),f=n("b893"),p=n("787b");function h(t,e){if(Array.isArray(e))return e.map(function(e){return h(t,e)});if("string"===typeof e)return t&&t[e];if("object"===Object(r["a"])(e)){var n={};return Object.keys(e).forEach(function(r){var i=e[r];n[r]="string"===typeof i?t&&t[i]:h(t,i)}),n}}function b(t,e,n){"string"===typeof e?t[e]=n:Array.isArray(e)?e.forEach(function(e,r){t[e]=n[r]}):Object.keys(e).forEach(function(r){var i=e[r];"string"===typeof i?t[i]=n[r]:b(t,i,n[r])})}var m=function(t,e,n){e.processor?e.processor.setValue(t,e,n):b(t,e.destructPath.destruct||e.name,n)},y=function(t,e){return e.processor?e.processor.getValue(t,e):h(t,e.destructPath.destruct||e.name)},v=n("43df"),g=n("618f"),j=n.n(g),O=n("65de"),k=n.n(O),x=n("c832"),S=n.n(x),P=n("8bbf"),w=n.n(P),A=n("2fe1"),F=n("60a3");function $(t,e){return S()(e,t)}var C=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.currentValue=null,t.fields=[],t}return Object(l["a"])(e,t),Object(s["a"])(e,[{key:"currentValueChanged",value:function(t){this.$emit("input",t),this.$emit("change",t)}},{key:"definitionsChanged",value:function(){var t=this.currentValue,e=this.value;this.definition.array?j()(t,e).concat(j()(e,t)).length>0&&this.buildExtraProperties():k()(t,e)||this.buildExtraProperties()}},{key:"platformChanged",value:function(){this.$forceUpdate()}},{key:"valueChanged",value:function(t){if(t!==this.currentValue){var e=this.currentValue;this.definition.array?j()(e,t).concat(j()(t,e)).length>0&&(this.currentValue=t||[],this.buildExtraProperties()):k()(e,t)||(this.currentValue=t||{},this.buildExtraProperties())}else t||(this.currentValue={},this.buildExtraProperties())}},{key:"created",value:function(){this.value?this.definition.array?this.value.length?this.currentValue=this.value:this.currentValue=[{}]:this.currentValue=this.value:this.currentValue=this.definition.array?[{}]:{},this.buildExtraProperties()}},{key:"setDefaultValue",value:function(t,e,n){var r=this,i=e,a=t.split(".");a.forEach(function(t,e){e<a.length-1?(i[t]||r.$set(i,t,{}),i=i[t]):i[t]=Object(p["k"])(r.createField(n))})}},{key:"buildExtraProperties",value:function(){var t=this,e=this.value,n=this.currentValue;this.realFields.forEach(function(r){var i=t.createField(r);if("string"===typeof i.destructPath.destruct){var a=r.property;if(t.definition.array)n&&Array.isArray(n)||(n=[]),n.forEach(function(n){a.includes(".")?t.setDefaultValue(a,n,r):n&&void 0!==n[a]?e&&e.length&&t.$set(n,a,e[0][r.property]):t.$set(n,a,Object(p["k"])(i))});else{var o=n;a.includes(".")?t.setDefaultValue(a,o,r):o&&void 0!==o[a]?e&&t.$set(o,a,e[r.property]):t.$set(o,a,Object(p["k"])(i))}}})}},{key:"render",value:function(){var t=arguments[0];return t("div",{class:"schema-form"},[this.$slots.header,this.definition.array?this.renderTitle():null,this.renderFields(),this.renderAddFormButton(),this.renderButtons(),this.$slots.footer])}},{key:"renderButtons",value:function(){var t=this,e=this.$createElement,n=this.props,r=Object(p["g"])();if(n&&"edit"===this.mode)return this.$slots.btns?this.$slots.btns:"mobile"===this.platform?e("div",{class:"action-btns"},[this.hasListener("ok")?e("m-white-space"):null,this.hasListener("ok")?e("m-button",a()([{attrs:{type:"primary",disabled:this.isDisabled,loading:this.isLoading}},{attrs:n&&n.okProps},{on:{click:function(){t.onOk()}}}]),[n&&n.okText||"保存"]):null,this.hasListener("cancel")?e("m-white-space"):null,this.hasListener("cancel")?e("m-button",a()([{attrs:{disabled:this.isDisabled||this.isDisabled},on:{click:function(){t.$emit("cancel")}}},{attrs:n&&n.cancelProps}]),[n&&n.cancelText||"取消"]):null,this.hasListener("reset")?e("m-white-space"):null,this.hasListener("reset")?e("m-button",a()([{attrs:{disabled:this.isDisabled||this.isLoading,type:"error"},on:{click:function(){t.$emit("reset")}}},{attrs:n&&n.resetProps}]),[n&&n.resetText||"重置"]):null]):e("div",{class:"action-btns"},[this.hasListener("cancel")?e(r,a()([{attrs:{disabled:this.isDisabled||this.isLoading},on:{click:function(){t.$emit("cancel")}},class:"cancel-btn"},{attrs:n&&n.cancelProps}]),[n&&n.cancelText||"取消"]):null,this.hasListener("ok")?e(r,a()([{attrs:{type:"primary",disabled:this.isDisabled,loading:this.isLoading},class:"confirm-btn"},{attrs:n&&n.okProps},{on:{click:function(){t.onOk()}}}]),[n&&n.okText||"保存"]):null,this.hasListener("reset")?e(r,a()([{attrs:{type:"danger",disabled:this.isDisabled||this.isLoading},class:"reset-btn"},{attrs:n&&n.resetProps},{on:{click:function(){t.$emit("reset",t.currentValue)}}}]),[n&&n.resetText||"重置"]):null])}},{key:"renderTitle",value:function(){var t=this.$createElement;return this.$slots.title?this.$slots.title:this.props&&this.title?t("h2",{class:"form-title"},[this.title]):void 0}},{key:"onOk",value:function(){return d["a"](this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.hasListener("ok")){t.next=9;break}if(!this.form||!this.form.validate){t.next=8;break}return t.next=4,this.validate();case 4:e=t.sent,e.some(function(t){return!t})?this.$message.error("表单数据有误，请检查"):this.$emit("ok",this.currentValue),t.next=9;break;case 8:this.$emit("ok",this.currentValue);case 9:case"end":return t.stop()}},t,this)}))}},{key:"getGroups",value:function(t){var e=this,n=[],r=[],i=!1;return this.realFields.forEach(function(a,o){var s=e.renderField(a,t,o);a.span?(i?(r[r.length-1].push(a.span),n[n.length-1].push(s)):(r.push([a.span]),n.push([s])),i=!0):(i=!1,r.push([]),n.push([s]))}),n}},{key:"calcShowState",value:function(t){var e=this;return t.depends?"function"===typeof t.depends?t.depends(this.currentValue):!t.depends.map(function(t){return e.matchCondition(t)}).some(function(t){return!t}):t.visible||null===t.visible||void 0===t.visible}},{key:"matchCondition",value:function(t){if(!this.currentValue)return!1;var e=this.currentValue[t.property],n=t.value;if(null===e||void 0===e){switch(t.operator){case"in":return n.includes(e);case"notIn":return!n.includes(e)}return!1}switch(t.operator){case"=":return n.toString()===e.toString();case"<":return parseFloat(e)<parseFloat(n);case">":return parseFloat(e)>parseFloat(n);case">=":return parseFloat(e)>=parseFloat(n);case"<=":return parseFloat(e)<=parseFloat(n);case"in":return n.includes(e);case"notIn":return!n.includes(e)}return!0}},{key:"renderField",value:function(t,e,n){var r=this.$createElement,i=this.platform,a=null;a=t.property.includes(".")?$(t.property.substr(0,t.property.lastIndexOf(".")),e):e,t.type===p["d"].object&&(t.props?t.props.props=this.props:t.props={props:this.props},t.props.effects=this.effects);var o=this.createField(t);return r(f["a"],{attrs:{value:y(a,o),field:o,path:this.buildFieldPath(t),display:"display"===this.mode,disabled:this.isDisabled,content:this.$slots[t.slot],definition:t,formValue:e,platform:i},on:{input:function(t){m(a,o,t)}},key:"field-"+t.property+"-"+n})}},{key:"renderFields",value:function(){return this.renderSingleFields(this.currentValue)}},{key:"renderSingleFields",value:function(t){var e=this,n=this.$createElement,r=this.props,i=Object(p["m"])(this.platform),o=this.getGroups(t),s=this.getFormProps();return n(i,a()([{},{attrs:s},{ref:"form"},{on:this.$listeners}]),[this.$slots.prepend,!this.definition.array&&this.isDesktop?this.renderTitle():null,r&&r.inline?o.reduce(function(t,e){return t.concat(e)}):o.map(function(t){return e.wrapGroup(t)}),this.renderDeleteSubFormButton(),this.$slots.append])}},{key:"renderAddFormButton",value:function(){var t=this,e=this.$createElement,n=Object(p["g"])();if(this.definition.array&&"edit"===this.mode)return e(n,a()([{},{attrs:{block:!0,icon:"plus",disabled:this.isDisabled}},{class:"m-b",on:{click:function(){t.addSubItem()}}}]),["新增一条"])}},{key:"addSubItem",value:function(){this.currentValue.push({})}},{key:"renderDeleteSubFormButton",value:function(){var t=this,e=this.$createElement,n=Object(p["g"])();return Number.isInteger(this.arrayIndex)&&"display"!==this.mode&&"desktop"===this.platform?e("div",{class:"delete-item-butn-wrapper",style:{textAlign:"right"}},[e(n,{attrs:{disabled:this.isDisabled,text:!0,icon:"delete",type:"danger"},on:{click:function(){t.$emit("removeArrayItem")}}},["删除该条"])]):null}},{key:"wrapGroup",value:function(t){var e=this.$createElement,n=Object(p["p"])(),r=this.props;return this.isMobile||1===t.length?t:e(n,{attrs:{gutter:r&&r.gutter||0}},[t])}},{key:"createField",value:function(t){var e=this.buildFieldPath(t).join("."),n=this["store"].fields[e];return n?(n.display="display"===this.mode,n.editable=!this.isDisabled&&!this.isReadonly,n):w.a.observable({title:t.title,array:t.array,type:t.type,enum:t.enum,processor:t.processor,display:"display"===this.mode,editable:!this.isDisabled&&!this.isReadonly,name:t.property,path:this.buildArrayPath(t),plainPath:this.buildFieldPath(t).join("."),destructPath:Object(v["parseDestructPath"])(t.property),props:Object.assign({},t.props),visible:this.calcShowState(t),required:t.required,fields:t.fields,effectErrors:[],errors:[],hiddenFromParent:!1,initialValue:null,initialize:function(){},invalid:!1,value:null})}},{key:"hasListener",value:function(t){return!!this.$listeners[t]}},{key:"getFormProps",value:function(){var t=this,e=this.$createElement,n=Object.assign({},this.props);if(this.isMobile){var r=this.$slots.title||this.title;null!==this.arrayIndex&&void 0!==this.arrayIndex?n.title=e("div",{style:{display:"flex",justifyContent:"space-between"}},[e("span",[r+" ("+(this.arrayIndex+1)+")"]),this.arrayIndex>0?e("a",{style:{color:"#e94721",cursor:"pointer"},on:{click:function(){t.$emit("removeArrayItem",t.arrayIndex)}}},[e("ae-icon",{attrs:{type:"delete"}}),"删除"]):null]):n.title=r}return n.inline=this.inline,n.disabled=this.isFormDisabled,n}},{key:"validate",value:function(){var t=this.fields;return t.length?Promise.all(t.map(function(t){return t.validate()})):null}},{key:"buildArrayPath",value:function(t){return this.pathPrefix?this.pathPrefix.concat(t.property):t.property.split(".")}},{key:"buildFieldPath",value:function(t){return this.pathPrefix?this.pathPrefix.concat(t.property):[t.property]}},{key:"realFields",get:function(){var t=this.definition.fields;return"object"===Object(r["a"])(t)?Object.keys(t).filter(function(e){return t[e]}).map(function(e){return Object.assign({property:e},t[e])}):t.filter(function(t){return null!==t&&void 0!==t})}},{key:"form",get:function(){return this.$refs.form}},{key:"isMobile",get:function(){return this.platform===p["c"]}},{key:"isDesktop",get:function(){return this.platform===p["b"]}},{key:"isFormDisabled",get:function(){return this.isDisabled||this.isLoading}},{key:"isDisabled",get:function(){return this["store"].disabled}},{key:"isLoading",get:function(){return this["store"].loading}},{key:"isReadonly",get:function(){return this["store"].readonly}}]),e}(w.a);d["b"]([Object(F["d"])(Object)],C.prototype,"definition",void 0),d["b"]([Object(F["d"])({type:String,default:"desktop"})],C.prototype,"platform",void 0),d["b"]([Object(F["d"])({type:Object,default:function(){return{}}})],C.prototype,"props",void 0),d["b"]([Object(F["d"])([Array,Object])],C.prototype,"value",void 0),d["b"]([Object(F["d"])({type:String,default:"edit"})],C.prototype,"mode",void 0),d["b"]([Object(F["d"])({type:Boolean,default:!1})],C.prototype,"inline",void 0),d["b"]([Object(F["d"])(Object)],C.prototype,"rules",void 0),d["b"]([Object(F["d"])()],C.prototype,"title",void 0),d["b"]([Object(F["d"])({type:Number})],C.prototype,"arrayIndex",void 0),d["b"]([Object(F["d"])(Array)],C.prototype,"pathPrefix",void 0),d["b"]([Object(F["d"])()],C.prototype,"effects",void 0),d["b"]([Object(F["f"])("currentValue",{deep:!0})],C.prototype,"currentValueChanged",null),d["b"]([Object(F["f"])("definitions")],C.prototype,"definitionsChanged",null),d["b"]([Object(F["f"])("platform")],C.prototype,"platformChanged",null),d["b"]([Object(F["f"])("value",{immediate:!0,deep:!0})],C.prototype,"valueChanged",null),C=d["b"]([Object(A["a"])({name:"BaseForm"})],C);e["a"]=C},"4c3f":function(t,e,n){"use strict";n("ac6a"),n("d225"),n("b0b4"),n("d5ac"),n("4ed9")},"4ed9":function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s});var r=n("d5ac"),i=function(t){return Object(r["isArr"])(t)?t:t?[t]:[]};function a(t,e,n){if(Object(r["isArr"])(t)||Object(r["isStr"])(t)){if(n){for(var i=t.length-1;i>=0;i--)if(!1===e(t[i],i))return}else for(var a=0,o=t.length;a<o;a++)if(!1===e(t[a],a))return}else if(Object(r["isObj"])(t)){var s;for(s in t)if(Object.hasOwnProperty.call(t,s)&&!1===e(t[s],s))return}}function o(t,e,n){var i=Object(r["isArr"])(t)||Object(r["isStr"])(t)?[]:{};return a(t,function(t,n){var a=e(t,n);Object(r["isArr"])(i)?i.push(a):i[n]=a},n),i}function s(t,e,n){var r=!0;return a(t,function(t,n){if(!e(t,n))return r=!1,!1},n),r}},"5a0c":function(t,e){},6696:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7618"),i=(n("c5f6"),n("ac6a"),n("5df3"),n("f400"),n("ac4d"),n("8a81"),Symbol("newer")),a=Symbol("older");function o(t,e){var n=e,r=t;"number"!==typeof r&&(n=r,r=0),this.size=0,this.limit=r,this.oldest=this.newest=void 0,this._keymap=new Map,n&&(this.assign(n),r<1&&(this.limit=this.size))}function s(t,e){this.key=t,this.value=e,this[i]=void 0,this[a]=void 0}function u(t){this.entry=t}function c(t){this.entry=t}function l(t){this.entry=t}o.prototype._markEntryAsUsed=function(t){t!==this.newest&&(t[i]&&(t===this.oldest&&(this.oldest=t[i]),t[i][a]=t[a]),t[a]&&(t[a][i]=t[i]),t[i]=void 0,t[a]=this.newest,this.newest&&(this.newest[i]=t),this.newest=t)},o.prototype.assign=function(t){var e,n=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var r=t[Symbol.iterator](),o=r.next();!o.done;o=r.next()){var u=new s(o.value[0],o.value[1]);if(this._keymap.set(u.key,u),e?(e[i]=u,u[a]=e):this.oldest=u,e=u,0===n--)throw new Error("overflow")}this.newest=e,this.size=this._keymap.size},o.prototype.get=function(t){var e=this._keymap.get(t);if(e)return this._markEntryAsUsed(e),e.value},o.prototype.set=function(t,e){var n=this._keymap.get(t);return n?(n.value=e,this._markEntryAsUsed(n),this):(this._keymap.set(t,n=new s(t,e)),this.newest?(this.newest[i]=n,n[a]=this.newest):this.oldest=n,this.newest=n,++this.size,this.size>this.limit&&this.shift(),this)},o.prototype.shift=function(){var t=this.oldest;if(t)return this.oldest[i]?(this.oldest=this.oldest[i],this.oldest[a]=void 0):(this.oldest=void 0,this.newest=void 0),t[i]=t[a]=void 0,this._keymap.delete(t.key),--this.size,[t.key,t.value]},o.prototype.find=function(t){var e=this._keymap.get(t);return e?e.value:void 0},o.prototype.has=function(t){return this._keymap.has(t)},o.prototype.delete=function(t){var e=this._keymap.get(t);if(e)return this._keymap.delete(e.key),e[i]&&e[a]?(e[a][i]=e[i],e[i][a]=e[a]):e[i]?(e[i][a]=void 0,this.oldest=e[i]):e[a]?(e[a][i]=void 0,this.newest=e[a]):this.oldest=this.newest=void 0,this.size--,e.value},o.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},u.prototype[Symbol.iterator]=function(){return this},u.prototype.next=function(){var t=this.entry;return t?(this.entry=t[i],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}},c.prototype[Symbol.iterator]=function(){return this},c.prototype.next=function(){var t=this.entry;return t?(this.entry=t[i],{done:!1,value:t.key}):{done:!0,value:void 0}},l.prototype[Symbol.iterator]=function(){return this},l.prototype.next=function(){var t=this.entry;return t?(this.entry=t[i],{done:!1,value:t.value}):{done:!0,value:void 0}},o.prototype.keys=function(){return new c(this.oldest)},o.prototype.values=function(){return new l(this.oldest)},o.prototype.entries=function(){return this},o.prototype[Symbol.iterator]=function(){return new u(this.oldest)},o.prototype.forEach=function(t,e){var n=e;"object"!==Object(r["a"])(n)&&(n=this);var a=this.oldest;while(a)t.call(n,a.value,a.key,this),a=a[i]},o.prototype.toJSON=function(){var t=new Array(this.size),e=0,n=this.oldest;while(n)t[e++]={key:n.key,value:n.value},n=n[i];return t},o.prototype.toString=function(){var t="",e=this.oldest;while(e)t+=String(e.key)+":"+e.value,e=e[i],e&&(t+=" < ");return t}},"787b":function(t,e,n){"use strict";var r=n("7618"),i=(n("6b54"),n("ac6a"),n("d225")),a=n("308d"),o=n("6bb5"),s=n("4e2b"),u=n("9ab4"),c=n("4aac"),l=n("2fe1"),d=n("60a3"),f=function(t){function e(){return Object(i["a"])(this,e),Object(a["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(s["a"])(e,t),e}(Object(l["b"])(c["a"]));u["b"]([Object(d["b"])()],f.prototype,"store",void 0),f=u["b"]([Object(l["a"])({name:"InternalForm"})],f);var p=f,h=n("8bbf"),b=n.n(h),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"dragger"!==t.listType?n("d-upload",t._g(t._b({attrs:{"file-list":t.fileList}},"d-upload",t.props,!1),t.$listeners),["card"===t.listType?n("div",{staticClass:"ant-upload-select-btn"},[n("ae-icon",{attrs:{size:"lg",type:"plus"}}),n("div",{staticClass:"ant-upload-text"},[t._v("选择文件")])],1):"text"===t.listType?n("d-button",{attrs:{disabled:t.$attrs.disabled}},[t._v("选择文件\n  ")]):t._e(),t._t("default")],2):n("a-upload-dragger",t._g(t._b({},"a-upload-dragger",t.props,!1),t.$listeners),[n("div",{class:{disabled:t.$attrs.disabled}},[n("p",{staticClass:"ant-upload-drag-icon"},[n("a-icon",{attrs:{type:"upload"}})],1),n("p",{staticClass:"ant-upload-text"},[t._v("点击或者拖动文件到虚线框内上传")]),n("p",{staticClass:"ant-upload-hint",domProps:{textContent:t._s(t.hint)}})])])},y=[],v=b.a.extend({name:"AntdUpload",props:{value:{type:[String,Array]},multiple:{type:Boolean,default:!1},listType:String,hint:String},data:function(){return{fileList:[]}},computed:{props:function(){var t=Object.assign({},this.$attrs);return"card"===this.listType?t.listType="picture-card":"dragger"===this.listType&&delete t.listType,t}}}),g=v,j=(n("3603"),n("2877")),O=Object(j["a"])(g,m,y,!1,null,null,null),k=O.exports,x=n("b0b4"),S=function(t){function e(){return Object(i["a"])(this,e),Object(a["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(s["a"])(e,t),Object(x["a"])(e,[{key:"render",value:function(){var t=arguments[0],e=this.value;return t("span",[e])}}]),e}(b.a);u["b"]([Object(d["d"])()],S.prototype,"value",void 0),S=u["b"]([Object(l["a"])({name:"DisplayField"})],S);var P=S,w=(n("6762"),n("2fdb"),function(t){function e(){return Object(i["a"])(this,e),Object(a["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(s["a"])(e,t),Object(x["a"])(e,[{key:"render",value:function(){var t=this,e=arguments[0],n=this.definition,r=this.value,i=st(n);if(r){var a=[];return a=this.definition.array?i.filter(function(e){return r.includes(e[t.valueProperty])}):i.filter(function(e){return r===e[t.valueProperty]}),e("span",[a.map(function(e){return e[t.LabelProperty]}).join("、")])}return e("span")}},{key:"valueProperty",get:function(){return this.definition.props.valueProperty||"value"}},{key:"LabelProperty",get:function(){return this.definition.props.labelProperty||"label"}}]),e}(b.a));u["b"]([Object(d["d"])()],w.prototype,"value",void 0),u["b"]([Object(d["d"])(Object)],w.prototype,"definition",void 0),w=u["b"]([Object(l["a"])({name:"SelectDisplayField"})],w);var A=w,F=function(t){function e(){return Object(i["a"])(this,e),Object(a["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(s["a"])(e,t),Object(x["a"])(e,[{key:"render",value:function(){var t=arguments[0],e=this.value;if("time"===this.definition.type)return t("span",[this.value]);var n="YYYY-MM-DD HH:mm:ss";return"date"===this.definition.type&&(n="YYYY-MM-DD"),t("span",{directives:[{name:"time",value:e}],attrs:{format:n}})}}]),e}(b.a);u["b"]([Object(d["d"])()],F.prototype,"value",void 0),u["b"]([Object(d["d"])(Object)],F.prototype,"definition",void 0),F=u["b"]([Object(l["a"])({name:"TimeDisplayField"})],F);var $=F,C=n("2638"),E=n.n(C),V={name:"BaseOptionComponent",props:{options:Array,labelProperty:{type:String,default:"label"},valueProperty:{type:String,default:"value"}},render:function(){var t=this,e=arguments[0],n=this.component,r=this.optionComponent;return e(n,E()([{},{attrs:this.$attrs},{},{on:this.$listeners}]),[this.options.map(function(n){var i={};return i[t.labelProp]=ht(n,t.labelProperty),i[t.valueProp]=ht(n,t.valueProperty),e(r,E()([{},{attrs:i}]),["text"===t.labelProp?i[t.labelProp]:null])})])},computed:{labelProp:function(){return"label"},valueProp:function(){return"value"},component:function(){return""},optionComponent:function(){return""}}},D={mixins:[V],props:{button:Boolean},computed:{labelProp:function(){return"text"},valueProp:function(){return"label"},component:function(){return"el-checkbox-group"},optionComponent:function(){return this.button?"el-checkbox-button":"el-checkbox"}}},_={mixins:[V],props:{button:Boolean},computed:{labelProp:function(){return"text"},valueProp:function(){return"label"},component:function(){return"el-radio-group"},optionComponent:function(){return this.button?"el-radio-button":"el-radio"}}},I={mixins:[V],computed:{component:function(){return"el-select"},optionComponent:function(){return"el-option"}}},N={render:function(){var t=arguments[0];return t("span")}};n.d(e,"a",function(){return T}),n.d(e,"d",function(){return L}),n.d(e,"b",function(){return K}),n.d(e,"c",function(){return z}),n.d(e,"t",function(){return X}),n.d(e,"q",function(){return Q}),n.d(e,"r",function(){return tt}),n.d(e,"u",function(){return et}),n.d(e,"s",function(){return nt}),n.d(e,"i",function(){return at}),n.d(e,"l",function(){return ot}),n.d(e,"o",function(){return st}),n.d(e,"k",function(){return ut}),n.d(e,"m",function(){return ct}),n.d(e,"p",function(){return lt}),n.d(e,"h",function(){return dt}),n.d(e,"g",function(){return ft}),n.d(e,"f",function(){return pt}),n.d(e,"n",function(){return ht}),n.d(e,"e",function(){return bt}),n.d(e,"j",function(){return mt});var B,L,T="ASchemaForm";(function(t){t["edit"]="edit",t["display"]="display"})(B||(B={})),function(t){t["transfer"]="transfer",t["rate"]="rate",t["upload"]="upload",t["daterange"]="daterange",t["url"]="url",t["string"]="string",t["datetime"]="datetime",t["year"]="year",t["month"]="month",t["time"]="time",t["select"]="select",t["date"]="date",t["integer"]="integer",t["number"]="number",t["double"]="double",t["boolean"]="boolean",t["expandSelect"]="expand-select",t["range"]="range",t["empty"]="empty",t["text"]="text",t["object"]="object"}(L||(L={}));var M={display:{desktop:{},mobile:{}},edit:{desktop:{},mobile:{}}},K="desktop",z="mobile",U="d-form",q="d-row",R="d-col",Y="d-button",G="a-alert",H="$dconfirm",J=[],W=[],X=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return{}};Z(t,e,n,r,i,!0)},Q=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return{}};Z(t,e,n,r,i,!1)},Z=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return{}},o=arguments.length>5?arguments[5]:void 0;if(Array.isArray(r))r.forEach(function(r){t(e,n,r,i,a,o)});else if(Array.isArray(n))n.forEach(function(n){t(e,n,r,i,a,o)});else{var s={component:e,platform:n,type:r,forArray:i,getProps:function(t){var e=a(t,n)||{};return t.title&&n===z&&(e.labelNumber=t.title.length>7?7:t.title.length),t.props&&Object.assign(e,t.props),e}},u=o?"display":"edit",c=M[u][n];c[r]||(c[r]={}),!0===i?c[r][1]=s:!1===i?c[r][2]=s:c[r][0]=s,o?W.push(s):J.push(s)}};function tt(){console.info("注册Ant Design Vue表单组件"),U="d-form",q="d-row",R="d-col",Y="d-button",G="a-alert",H="$dconfirm",Q("d-range-picker",K,[L.daterange],!1),Q("d-input",K,[L.string,L.url],!1),Q("d-textarea",K,[L.text],!1),Q("d-date-picker",K,[L.date,L.year,L.month,L.datetime],!1,function(t){return{mode:t.type.toLowerCase()}}),Q("d-time-picker",K,[L.time],!1,function(t){return{mode:t.type.toLowerCase()}}),Q("d-input-number",K,[L.double,L.integer,L.number],!1),Q("d-switch",K,L.boolean),Q("d-select",K,L.select,null,function(t){return{dropdownMatchSelectWidth:!1,multiple:t.array}}),Q(k,K,L.upload,null,function(t){return{multiple:t.array}}),Q("d-checkbox-group",K,L.expandSelect,!0),Q("d-radio-group",K,L.expandSelect,!1),Q("d-color-picker",K,"color"),Q("d-rate",K,L.rate),Q("d-transfer",K,L.transfer,!1,function(t){var e=t.props&&t.props.dataSource||t.enum||[],n=e.map(function(t){return"string"===typeof t?{key:t,title:t}:{key:(t.key||t.value).toString(),title:t.title||t.label,description:t.description||t.label,disabled:t.disabled||!1}});return{dataSource:n}}),Q("d-slider",K,L.range,!1,function(){return{range:!0}})}function et(){console.info("注册ElementUI表单组件"),U="el-form",q="el-row",R="el-col",Y="el-button",G="el-alert",H="$confirm",b.a.component("el-ext-select",I),b.a.component("el-ext-checkbox",D),b.a.component("el-ext-radio",_),Q("el-input",K,[L.string,L.url],!1),Q("el-input",K,[L.text],!1,function(){return{type:"textarea"}}),Q("el-date-picker",K,[L.date,L.year,L.month,L.datetime],!1,function(t){return{type:t.type.toLowerCase()}}),Q("el-input-number",K,[L.double,L.integer,L.number],!1),Q("el-switch",K,[L.boolean],!1),Q("el-ext-select",K,[L.select],null,function(t){return{multiple:t.array}}),Q("el-ext-radio",K,[L.expandSelect],!1),Q("el-ext-checkbox",K,[L.expandSelect],!0)}function nt(){console.info("注册Ant Design Mobile表单组件"),Q("m-input",z,[L.string,L.url],!1),Q("m-date-picker-item",z,[L.date,L.datetime,L.time],!1,function(t){return{mode:t.type.toLowerCase()}}),Q("m-input",z,[L.integer,L.double,L.number],!1,function(t){return{type:t.type.toLowerCase()===L.double?"digit":"number",textAlign:"right"}}),Q("m-textarea",z,[L.text],!1),Q("m-switch-item",z,[L.boolean],!1),Q("m-checkbox-popup-list",z,[L.select],!0),Q("m-radio-popup-list",z,[L.select],!1),Q("m-checkbox-list",z,[L.expandSelect],!0),Q("m-radio-list",z,[L.expandSelect],!1)}b.a.component("empty",N),X($,[K,z],[L.datetime,L.date]),X(P,[K,z],[L.string,L.text,L.url,L.integer,L.double,L.number],!1),X(A,[K,z],[L.select,L.expandSelect],null),Q(p,[K,z],L.object,!1,function(t,e){return{platform:e,definition:{fields:t.fields}}}),X(p,[K,z],L.object,!1,function(t,e){return{platform:e,definition:{fields:t.fields}}});var rt={component:"empty",getProps:function(t){return{}}};function it(t,e,n){var r=M[t][e][n.type];if(!r)return rt;if(n.array){var i=rt;return r[2]&&(i=r[2]),r[1]||r[0]||i}return r[2]||r[0]}var at=function(t,e){return it(B.edit,t,e)},ot=function(t,e){return it(B.display,t,e)},st=function(t){return t.enum?t.enum:t.props&&t.props.options?"function"===typeof t.props.options?t.props.options()||[]:"object"===Object(r["a"])(t.props.options)?t.props.options||[]:void 0:[]},ut=function(t){return"string"!==typeof t.destructPath.destruct?null:t.type===L.range?[]:t.type===L.object?t.array?[{}]:{}:t.array?[]:null},ct=function(t){return t===K?U:"m-list"},lt=function(){return q},dt=function(){return R},ft=function(){return Y},pt=function(){return G},ht=function(t,e){return"string"===typeof t?t:"string"===typeof e?t[e]:"function"===typeof e?e(t):void 0};function bt(t,e,n){var i=e.type,a="string";if(e.array)a="array";else if("number"===i)a="number";else if(i===L.integer)a="integer";else if(i===L.double)a="string";else if(i===L.object)a="object";else if(i===L.date||i===L.datetime||i===L.year||i===L.month)a="date";else if(i===L.select||i===L.expandSelect){var o=st(e);o.length&&(a=Object(r["a"])(ht(o[0],e.props&&e.props.valueProperty||"value")))}else i===L.daterange&&(a="array");n.type=a,t.push(n)}var mt=function(t){return"mobile"===t?"$mconfirm":H}},8932:function(t,e){},"8bbf":function(t,e){t.exports=Vue},"8dc5":function(t,e){},"944d":function(t,e,n){"use strict";n("7618"),n("4f7f"),n("c02b"),n("10ad"),n("ac6a"),n("5df3"),n("f400"),n("d5ac"),n("a20a")},a20a:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return r});var r=self||window||t||Function("return this")()}).call(this,n("c8ba"))},a4b1:function(t,e,n){},af6b:function(t,e,n){"use strict";n.d(e,"a",function(){return P}),n.d(e,"c",function(){return w}),n.d(e,"b",function(){return m});n("ac6a"),n("5df3"),n("f400"),n("7f7f");var r=n("d225"),i=n("b0b4"),a=(n("28a5"),n("d5ac")),o=n("4ed9"),s=n("6696");function u(t){return" "===t||"\n"===t||"\t"===t||"\f"===t||"\r"===t}function c(t){return t?Object(a["isArr"])(t)?t.join("."):Object(a["isStr"])(t)?t:"":""}var l=new s["a"](1e3);function d(t){if(Object(a["isArr"])(t))return t;if(Object(a["isStr"])(t)&&t){var e=l.get(t);if(e)return e;for(var n=t.split("."),r=[],i=0;i<n.length;i++){var o=n[i];while("\\"===o[o.length-1]&&void 0!==n[i+1])o=o.slice(0,-1)+".",o+=n[++i];r.push(o)}return l.set(t,r),r}return Object(a["isNum"])(t)?[t]:[]}var f=function(){function t(e,n){Object(r["a"])(this,t),this.text=e,this.index=0,this.handlers=n,this.state=this.processNameStart,this.declareNameStart=0,this.declareNameEnd=0,this.nbraceCount=0,this.nbracketCount=0}return Object(i["a"])(t,[{key:"parse",value:function(){for(var t="",e="",n=this.text.length;this.index<n;this.index++)t=this.text.charAt(this.index),this.EOF=n-1===this.index,this.state(t,e),e=t}},{key:"getName",value:function(){return this.text.substring(this.declareNameStart,this.declareNameEnd)}},{key:"processDestructKey",value:function(t,e){"}"===t?(this.nbraceCount--,(this.nbraceCount||this.nbracketCount)&&(this.state=this.processDestructStart),u(e)||(this.destructKey=this.text.substring(this.destructKeyStart,this.index)),this.handlers.destructKey(this.destructKey),this.handlers.destructObjectEnd(),this.nbraceCount||this.nbracketCount||(this.index=this.text.length)):"]"===t?(this.nbracketCount--,(this.nbraceCount||this.nbracketCount)&&(this.state=this.processDestructStart),u(e)||(this.destructKey=this.text.substring(this.destructKeyStart,this.index)),this.handlers.destructKey(this.destructKey),this.handlers.destructArrayEnd(),this.nbraceCount||this.nbracketCount||(this.index=this.text.length)):(u(t)||":"===t||","===t)&&(u(e)||(this.destructKey=this.text.substring(this.destructKeyStart,this.index)),u(t)||(this.state=this.processDestructStart,this.handlers.destructKey(this.destructKey,":"===t)))}},{key:"processDestructStart",value:function(t){"{"===t?(this.nbraceCount++,this.handlers.destructObjectStart()):"["===t?(this.nbracketCount++,this.handlers.destructArrayStart()):u(t)||(this.state=this.processDestructKey,this.destructKeyStart=this.index,this.index--)}},{key:"processName",value:function(t,e){u(t)?(this.declareNameEnd=this.index,this.handlers.name(this.getName())):this.EOF&&(this.declareNameEnd=this.index+1,this.handlers.name(this.getName()))}},{key:"processNameStart",value:function(t){"{"===t||"["===t?(this.state=this.processDestructStart,this.index--):u(t)||(this.declareNameStart=this.index,this.state=this.processName)}}]),t}(),p=function(t){if(!Object(a["isStr"])(t))return t;var e,n,r,i=[],o="",s="";return new f(t,{name:function(t){r=t},destructKey:function(t,r){if(t){if(o=t,r)return s=t,void(n=e);Object(a["isArr"])(e)?e.push(t):Object(a["isPlainObj"])(e)&&(e[s&&n===e?s:t]=t),s="",n=e}},destructArrayStart:function(){e?e=[]:(r=[],e=r);var t=i[i.length-1];Object(a["isPlainObj"])(t)?t[o]=e:Object(a["isArr"])(t)&&t.push(e),i.push(e)},destructObjectStart:function(){e?e={}:(r={},e=r);var t=i[i.length-1];Object(a["isPlainObj"])(t)?t[o]=e:Object(a["isArr"])(t)&&t.push(e),i.push(e)},destructArrayEnd:function(){i.pop(),e=i[i.length-1]},destructObjectEnd:function(){i.pop(),e=i[i.length-1]}}).parse(),r},h=function(t,e){var n=function t(n,r){if(Object(a["isStr"])(n))return e(n,n);Object(o["a"])(n,function(n,i){var o=r.concat(i);Object(a["isArr"])(n)||Object(a["isPlainObj"])(n)?t(n,o):e(o,n)})};return n(t,[])},b=function(t,e){var n=function t(n,r){return Object(o["c"])(n,function(n,i){var o=r.concat(i);return Object(a["isArr"])(n)||Object(a["isPlainObj"])(n)?t(n,o):e(o,o.slice(0,o.length-1).concat(n))})};return n(t,[])},m=function(t){var e=d(t),n=e[e.length-1],r=e.slice(0,e.length-1),i=p(n);return{path:e,lastKey:n,startPath:r,destruct:i}},y=function(t){var e=[],n=m(t);return Object(a["isStr"])(n.destruct)?t:n.destruct?(h(n.destruct,function(t,r){e.push({path:n.startPath.concat(t),startPath:n.startPath,endPath:t,key:r})}),e):t},v=function(t){var e=new Map;return function(n,r,i){var o=null;return e.get(r)?o=e.get(r):(o=m(r),e.set(r,o)),Object(a["isArr"])(o.destruct)||Object(a["isPlainObj"])(o.destruct)?b(o.destruct,function(e,r){return t(n,o.startPath.concat(r[r.length-1]))}):t(n,r,i)}},g=function(t,e){var n=new Map;return function(r,i,s,u){var c=[];return n.get(i)?c=n.get(i):(c=y(i),n.set(i,c)),Object(a["isArr"])(c)?(c&&c.length&&Object(o["a"])(c,function(n){n.mapPath;var i=n.key,a=n.startPath,o=n.endPath;t(r,a.concat(i),e(s,o),u)}),r):t(r,i,s,u)}},j=function(t){var e=new Map;return function(n,r){var i=[];return e.get(r)?i=e.get(r):(i=y(r),e.set(r,i)),Object(a["isArr"])(i)?!(!i||!i.length)&&Object(o["b"])(i,function(e){var r=e.startPath,i=e.key;return t(n,r.concat(i))}):t(n,r)}};function O(t,e,n){if(!Object(a["isObj"])(t)||!e)return t;var r=c(e);if(r in t)return t[r];for(var i=t,o=d(r),s=0;s<o.length;s++){if(!Object.prototype.propertyIsEnumerable.call(i,o[s]))return n;if(i=i[o[s]],void 0===i||null===i){if(s!==o.length-1)return n;break}}return i}function k(t,e,n,r){var i=t;if(Object(a["isObj"])(i)&&e){var o=c(e);if(o in i)i[o]=n;else for(var s=d(o),u=0;u<s.length;u++){var l=s[u];if(!Object(a["isObj"])(i[l])){if(void 0===i[l]&&void 0===n)return;if(/^\d+$/.test(s[u+1+""]))if(r){var f=r(s.slice(0,u));f&&"array"!==f.type?i[l]={}:i[l]=[]}else i[l]=[];else i[l]={}}u===s.length-1&&(i[l]=n),i=i[l]}}}function x(t,e){var n=t;if(Object(a["isObj"])(n)&&e){var r=c(e);if(r in n)delete n[r];else for(var i=d(r),o=0;o<i.length;o++){var s=i[o];if(o===i.length-1)return void(Object(a["isArr"])(n)?n.splice(s,1):delete n[s]);if(n=n[s],!Object(a["isObj"])(n))return}}}function S(t,e){if(!Object(a["isObj"])(t)||!e)return!1;var n=c(e);if(n in t)return!0;for(var r=t,i=d(n),o=0;o<i.length;o++){if(!Object(a["isObj"])(r))return!1;if(!(i[o]in r))return!1;r=r[i[o]]}return!0}var P=v(O),w=g(k,P);g(x,P),j(S)},b71c:function(t,e,n){},b893:function(t,e,n){"use strict";var r=n("bd86"),i=(n("ac6a"),n("5df3"),n("2638")),a=n.n(i),o=(n("96cf"),n("d225")),s=n("b0b4"),u=n("308d"),c=n("6bb5"),l=n("4e2b"),d=n("9ab4"),f=(n("7f7f"),n("8bbf")),p=n.n(f),h=n("2fe1");function b(t,e,n){this.$children.forEach(function(r){var i=r.$options.componentName;i===t?r.$emit.apply(r,[e].concat(n)):b.apply(r,[t,e].concat([n]))})}var m=function(t){function e(){return Object(o["a"])(this,e),Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(s["a"])(e,[{key:"dispatch",value:function(t,e,n){var r=this.$parent||this.$root,i=r.$options.name;while(r&&(!i||i!==t))r=r.$parent,r&&(i=r.$options.name);r&&r.$emit.apply(r,n?[e].concat(n):[e])}},{key:"broadcast",value:function(t,e,n){b.call(this,t,e,n)}}]),e}(p.a);m=d["b"]([Object(h["a"])({name:"Emitter"})],m);var y=m,v=n("a15e"),g=n.n(v),j=n("60a3"),O=(n("c5f6"),n("787b")),k=function(t){function e(){return Object(o["a"])(this,e),Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(s["a"])(e,[{key:"renderAddButton",value:function(){var t=this.$createElement;if("display"===this.store.mode)return null;var e=Object(O["h"])(),n=Object(O["g"])();"mobile"===this.$attrs.platform&&(n="m-button");var r={};this.addBtnProps&&this.addBtnProps.block&&(r.width="100%");var i=t(n,a()([{on:{click:this.onAddClick},attrs:{disabled:this.store&&(this.store.disabled||this.store.loading),icon:"plus"},style:r},{attrs:Object.assign({},this.addBtnProps)}]),[this.addBtnText||"添加"]);return this.subForm?t("div",{style:{margin:"10px 15px"}},[i]):t(e,{attrs:{span:this.cellSpan}},[i])}},{key:"onAddClick",value:function(){this.$emit("add")}},{key:"render",value:function(){var t=arguments[0],e=Object(O["p"])(),n=[this.$slots.default,this.renderAddButton()];return this.subForm?t("div",[n]):"mobile"===this.$attrs.platform?n:t(e,{attrs:{gutter:this.$attrs.gutter||20,type:"flex"}},[n])}}]),e}(p.a);d["b"]([Object(j["d"])({type:Number,default:24})],k.prototype,"cellSpan",void 0),d["b"]([Object(j["d"])(String)],k.prototype,"addBtnText",void 0),d["b"]([Object(j["d"])(Object)],k.prototype,"addBtnProps",void 0),d["b"]([Object(j["d"])({type:Number,default:0})],k.prototype,"maxLength",void 0),d["b"]([Object(j["d"])({type:Boolean,default:!1})],k.prototype,"subForm",void 0),d["b"]([Object(j["b"])("store")],k.prototype,"store",void 0),k=d["b"]([Object(h["a"])({name:"ArrayWrapper"})],k);var x=k,S=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.currentValue=null,t}return Object(l["a"])(e,t),Object(s["a"])(e,[{key:"currentValueChanged",value:function(t){this.$emit("input",t),this.$emit("change",t),this.field.onChange&&this.field.onChange(t),this.$forceUpdate()}},{key:"valueChanged",value:function(t){this.currentValue!==t&&(this.currentValue=t)}},{key:"created",value:function(){this.dispatch("ASchemaForm","SchemaForm.addField",[this])}},{key:"fieldChanged",value:function(t){this.dispatch("ASchemaForm","SchemaForm.addSchemaField",[t])}},{key:"beforeDestroy",value:function(){this.dispatch("ASchemaForm","SchemaForm.removeField",[this]),this.dispatch("ASchemaForm","SchemaForm.removeSchemaField",[this.field])}},{key:"renderInputComponent",value:function(){var t=this,e=this.$createElement,n=this.props,r=this.currentValue,i=(this.definition,this.componentType),o=i.component;return this.content?this.content:this.display&&this.definition.displayValue?"function"===typeof this.definition.displayValue?this.definition.displayValue(this.currentValue):this.definition.displayValue:this.field.array&&!1===i.forArray?e(x,{attrs:{disabled:this.disabled,subForm:this.field.type===O["d"].object,addBtnText:n.addBtnText,platform:this.platform,addBtnProps:n.addBtnProps,cellSpan:n.cellSpan},ref:"array",on:{add:function(){t.addArrayItem()}}},[this.currentValue?this.currentValue.map(function(r,i){var s=Object.assign({},n,{pathPrefix:t.path.concat(i)});return t.field.type===O["d"].object&&(s.definition=Object.assign({},s.definition),delete s.definition.array),e(o,a()([{},{attrs:s},{attrs:{arrayIndex:i,disabled:t.disabled,value:r,title:"mobile"===t.platform?t.field.title:null},on:{removeArrayItem:function(){return d["a"](t,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(O["j"])(this.platform),t.next=3,this[e]("确定删除该条吗？","提示");case 3:this.currentValue.splice(i,1);case 4:case"end":return t.stop()}},t,this)}))},input:function(e){t.onArrayItemInput(e,i)}}}]))}):null]):e(o,a()([{},{attrs:n},{ref:"input",attrs:{disabled:this.disabled,value:r,title:"mobile"===this.platform?this.field.title:null},on:{input:this.onInput}}]))}},{key:"render",value:function(){var t=arguments[0],e=this.props,n=this.field,r=this.definition,i=this.platform;this.display&&(e.definition=this.definition);var o=this.renderInputComponent(),s=null,u=this.formItemComponent,c=Object(O["h"])();if(i===O["b"]){var l=n.type===O["d"].object?o:t(u,a()([{},{attrs:this.getFormItemProps()}]),[o,this.renderNotice()]);s=r.span?t(c,{attrs:{span:r.span}},[l]):"Extra"===r.type?o:l}else s=this.display?this.definition.type===O["d"].object?o:t("m-list-item",{attrs:{title:r.title,extra:o}}):o;var d={};return n.visible||(d.display="none"),s.data.staticStyle=d,s}},{key:"getRules",value:function(){var t=this.definition,e=t.rules||[];return 0===e.length&&(t.required&&Object(O["e"])(e,t,{required:!0,message:"".concat(t.title,"为必填项")}),"number"===typeof t.min&&Object(O["e"])(e,t,{min:t.min,message:"".concat(t.title,"不能小于").concat(t.min)}),"number"===typeof t.max&&Object(O["e"])(e,t,{max:t.max,message:"".concat(t.title,"不能大于").concat(t.max)})),e}},{key:"onInput",value:function(t){this.currentValue=t}},{key:"renderNotice",value:function(){var t=this.$createElement,e=Object(O["f"])();if(this.definition.notice)return t(e,{attrs:{message:this.definition.notice}})}},{key:"getFormItemProps",value:function(){var t=this.definition,e=this.formItemComponent,n={required:this.display?null:t.required,title:t.title,label:t.title};return"d-form-item"===e||"a-form-item"===e?(n.help=this.field.errors.join("、"),n.help&&(n.hasFeedback=!0,n.validateStatus="error")):"el-form-item"===e&&(n.error=this.field.errors.join("、")),n}},{key:"validate",value:function(){var t=this,e=this.field;if(this.definition.type===O["d"].object&&this.$refs.array){var n=this.$refs.array,i=n.$children.filter(function(t){return t.validate});return new Promise(function(t){Promise.all(i.map(function(t){return t.validate()})).then(function(e){e.some(function(t){return!t})?t(!1):t(!0)}).catch(function(){t(!1)})})}var a=this.getRules();if(a.length){var o=new g.a(Object(r["a"])({},e.plainPath,a)),s=Object(r["a"])({},e.plainPath,this.currentValue);return new Promise(function(n){o.validate(s,{firstFields:!0},function(r,i){r?(e.valid=!1,e.errors=r.map(function(t){return t.message})):(e.valid=!0,e.errors=[]),n(t.field.valid)})})}return!0}},{key:"addArrayItem",value:function(){this.currentValue?this.definition.type===O["d"].object?this.currentValue.push({}):this.currentValue.push(null):this.definition.type===O["d"].object?this.currentValue=[{}]:this.currentValue=[null]}},{key:"onArrayItemInput",value:function(t,e){this.currentValue[e]=t,this.onInput(this.currentValue)}},{key:"componentType",get:function(){var t=null;return t=this.display?Object(O["l"])(this.platform,this.definition):Object(O["i"])(this.platform,this.definition),"empty"===t.component&&console.warn("类型".concat(this.field.type).concat(this.field.array?"（数组）":"","没有对应的").concat(this.display?"展示":"编辑","组件")),t}},{key:"options",get:function(){return Object(O["o"])(this.field)}},{key:"props",get:function(){var t=this.field,e=Object.assign({},this.componentType.getProps(t)),n=t.type;return n!==O["d"].select&&n!==O["d"].expandSelect||(e.options=this.options),n===O["d"].object&&(e.platform=this.platform,e.mode=this.display?"display":"edit",e.pathPrefix=this.path),this.display&&delete e.required,e}},{key:"formItemComponent",get:function(){return Object(O["m"])(this.platform)+"-item"}},{key:"error",get:function(){return this.field.errors.join("、")}}]),e}(Object(h["b"])(y));d["b"]([Object(j["d"])(Object)],S.prototype,"definition",void 0),d["b"]([Object(j["d"])([Object,Array])],S.prototype,"formValue",void 0),d["b"]([Object(j["d"])({type:Boolean,default:!1})],S.prototype,"display",void 0),d["b"]([Object(j["d"])({type:String,default:"mobile"})],S.prototype,"platform",void 0),d["b"]([Object(j["d"])()],S.prototype,"value",void 0),d["b"]([Object(j["d"])()],S.prototype,"content",void 0),d["b"]([Object(j["d"])({type:Boolean,default:!1})],S.prototype,"disabled",void 0),d["b"]([Object(j["d"])(Array)],S.prototype,"path",void 0),d["b"]([Object(j["d"])({required:!0})],S.prototype,"field",void 0),d["b"]([Object(j["f"])("currentValue")],S.prototype,"currentValueChanged",null),d["b"]([Object(j["f"])("value",{immediate:!0})],S.prototype,"valueChanged",null),d["b"]([Object(j["f"])("field",{immediate:!0})],S.prototype,"fieldChanged",null),S=d["b"]([Object(h["a"])({name:"FormField"})],S);e["a"]=S},bc9f:function(t,e,n){"use strict";n("7f7f"),n("4917"),n("6b54"),n("3b2b"),n("7618"),n("ac6a"),n("456d");var r=n("d5ac");r["isArr"],Object.keys,Object.prototype.hasOwnProperty},bcfe:function(t,e){},beda:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("4328"),i=(n("0fae"),n("8bbf")),a=n.n(i),o=n("ffb4"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},u=[],c=n("d225"),l=n("308d"),d=n("6bb5"),f=n("4e2b"),p=n("9ab4"),h=n("2fe1"),b=function(t){function e(){return Object(c["a"])(this,e),Object(l["a"])(this,Object(d["a"])(e).apply(this,arguments))}return Object(f["a"])(e,t),e}(a.a);b=p["b"]([Object(h["a"])({name:"DemoIndex"})],b);var m=b,y=m,v=n("2877"),g=Object(v["a"])(y,s,u,!1,null,null,null),j=g.exports,O=n("8c4f"),k=[{path:"element/display",component:function(){return n.e("chunk-19d65525").then(n.bind(null,"2f78"))},meta:{tag:"Element UI",name:"详情"}},{path:"element/edit",component:function(){return n.e("chunk-09c05534").then(n.bind(null,"3180"))},meta:{tag:"Element UI",name:"编辑"}},{path:"element/effects",component:function(){return n.e("chunk-7fae8c5a").then(n.bind(null,"4da8"))},meta:{tag:"Element UI",name:"副作用函数"}},{path:"desktop/subform/display",component:function(){return n.e("chunk-d419d388").then(n.bind(null,"4027"))},meta:{tag:"子表单",name:"详情"}},{path:"desktop/subform/edit",component:function(){return n.e("chunk-507ead8f").then(n.bind(null,"68f2"))},meta:{tag:"子表单",name:"编辑"}},{path:"desktop/simple",component:function(){return n.e("chunk-1fa84cfa").then(n.bind(null,"35d5"))},meta:{tag:"Ant Design Vue",name:"简单场景"}},{path:"desktop/display",component:function(){return n.e("chunk-6e540f64").then(n.bind(null,"dab9"))},meta:{tag:"Ant Design Vue",name:"详情"}},{path:"desktop/edit",component:function(){return n.e("chunk-7052c576").then(n.bind(null,"d08a"))},meta:{tag:"Ant Design Vue",name:"编辑"}},{path:"desktop/validate",component:function(){return n.e("chunk-29365920").then(n.bind(null,"1485"))},meta:{tag:"Ant Design Vue",name:"表单校验"}},{path:"desktop/effects",component:function(){return n.e("chunk-fa9ee09c").then(n.bind(null,"a40e"))},meta:{tag:"Ant Design Vue",name:"副作用函数"}},{path:"desktop/destruct",component:function(){return n.e("chunk-1801a433").then(n.bind(null,"f9e9"))},meta:{tag:"Ant Design Vue",name:"解构"}},{path:"mobile/display",component:function(){return n.e("chunk-1a51fca5").then(n.bind(null,"0b14"))},meta:{tag:"移动端示例",name:"详情模式"}},{path:"mobile/edit",component:function(){return n.e("chunk-f3c15ee2").then(n.bind(null,"0384"))},meta:{tag:"移动端示例",name:"编辑模式"}}],x=new O["a"]({routes:[{path:"/doc",component:function(){return n.e("chunk-571fa56d").then(n.bind(null,"1028"))}},{path:"/demo",name:"demo",component:j,children:k}]}),S=n("2f62");a.a.use(S["a"]);var P=new S["a"].Store({state:{},mutations:{},actions:{}}),w=(n("a4b1"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ae-layout",{attrs:{theme:"light"}},[n("ae-layout-header"),n("ae-layout",[n("ae-layout-sider",{staticStyle:{margin:"10px",overflow:"auto"},attrs:{width:"200px"}},[n("a-menu",[n("a-menu-item",[t._v("安装")]),n("a-menu-item",{on:{click:function(e){return t.to("/doc")}}},[t._v("使用")]),t._l(t.groups,function(e,r){return n("a-menu-item-group",{key:r,attrs:{title:r}},t._l(e,function(e){return n("a-menu-item",{key:e.path,on:{click:function(n){return t.to(e.path)}}},[t._v(t._s(e.meta&&e.meta.name)+"\n          ")])}),1)})],2)],1),n("ae-layout-content",{staticStyle:{margin:"10px 10px 10px 0"}},[n("router-view")],1)],1),n("ae-layout-footer")],1)}),A=[],F=(n("ac6a"),n("b0b4")),$=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.groups={},t}return Object(f["a"])(e,t),Object(F["a"])(e,[{key:"created",value:function(){var t={};k.forEach(function(e){var n=e.meta&&e.meta.tag||"其他";t[n]=t[n]||[],t[n].push(e)}),this.groups=t}},{key:"to",value:function(t){return this.$router.push("/demo/"+t)}}]),e}(a.a);$=p["b"]([Object(h["a"])({name:"App"})],$);var C=$,E=C,V=(n("d44d"),Object(v["a"])(E,w,A,!1,null,null,null)),D=V.exports;a.a.use(r["a"]),o["a"].registerAntdMobile(),new a.a({store:P,router:x,render:function(t){return t(D)}}).$mount("#app")},cf71:function(t,e,n){"use strict";n.d(e,"a",function(){return a});n("6b54");var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString;function a(t){if(null==t)return!0;if("boolean"===typeof t)return!1;if("number"===typeof t)return!1;if("string"===typeof t)return 0===t.length;if("function"===typeof t)return 0===t.length;if(Array.isArray(t)){if(0===t.length)return!0;for(var e=0;e<t.length;e++)if(void 0!==t[e]&&null!==t[e]&&""!==t[e]&&0!==t[e])return!1;return!0}if(t instanceof Error)return""===t.message;if(t.toString===i)switch(t.toString()){case"[object File]":case"[object Map]":case"[object Set]":return 0===t.size;case"[object Object]":for(var n in t)if(r.call(t,n))return!1;return!0}return!1}},d44d:function(t,e,n){"use strict";var r=n("beda"),i=n.n(r);i.a},d5ac:function(t,e,n){"use strict";var r=n("8932");n.o(r,"isArr")&&n.d(e,"isArr",function(){return r["isArr"]}),n.o(r,"isFn")&&n.d(e,"isFn",function(){return r["isFn"]}),n.o(r,"isNum")&&n.d(e,"isNum",function(){return r["isNum"]}),n.o(r,"isObj")&&n.d(e,"isObj",function(){return r["isObj"]}),n.o(r,"isPlainObj")&&n.d(e,"isPlainObj",function(){return r["isPlainObj"]}),n.o(r,"isStr")&&n.d(e,"isStr",function(){return r["isStr"]});var i=n("e85a");n.d(e,"isArr",function(){return i["a"]}),n.d(e,"isFn",function(){return i["b"]}),n.d(e,"isNum",function(){return i["c"]}),n.d(e,"isObj",function(){return i["d"]}),n.d(e,"isPlainObj",function(){return i["e"]}),n.d(e,"isStr",function(){return i["f"]});n("0d62"),n("8dc5"),n("3a8d"),n("5a0c"),n("f421"),n("bcfe")},e85a:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"f",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return l});var r=n("7618"),i=(n("6b54"),function(t){return function(e){return null!=e&&Object.prototype.toString.call(e)==="[object ".concat(t,"]")}}),a=i("Function"),o=Array.isArray||i("Array"),s=i("Object"),u=i("String"),c=(i("Boolean"),i("Number")),l=function(t){return"object"===Object(r["a"])(t)};i("RegExp")},eddd:function(t,e,n){},ef06:function(t,e,n){"use strict"},f421:function(t,e){},ffb4:function(t,e,n){"use strict";var r=n("b893"),i=(n("ac6a"),n("d225")),a=n("b0b4"),o=n("308d"),s=n("6bb5"),u=n("4e2b"),c=n("9ab4"),l=n("4aac"),d=n("787b"),f=n("2fe1"),p=n("60a3"),h=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.store={fields:{},disabled:!1,loading:!1,readonly:!1,mode:"edit"},t}return Object(u["a"])(e,t),Object(a["a"])(e,[{key:"modeChanged",value:function(t){this.store.mode=t,this.$forceUpdate()}},{key:"readonlyChanged",value:function(t){this.store.readonly=t}},{key:"disabledChanged",value:function(t){this.store.disabled=t}},{key:"loadingChanged",value:function(t){this.store.loading=t}},{key:"mounted",value:function(){this.effects&&this.effects(this.context)}},{key:"createContext",value:function(){var t=this;return function(e){var n=[];return"string"===typeof e?n.push(t["store"].fields[e]):Array.isArray(e)&&(n=e.map(function(e){return t["store"].fields[e]})),n=n.filter(function(t){return!!t}),{hide:function(){n.forEach(function(t){t.visible=!1})},show:function(){n.forEach(function(t){t.visible=!0})},setEnum:function(t){n.forEach(function(e){e.props=Object.assign(e.props,{options:t})})},setFieldProps:function(t){n.forEach(function(e){e.props=Object.assign(e.props,t)})},onFieldChange:function(t){n.forEach(function(e){e.onChange=t})},subscribe:function(t,e){n.forEach(function(n){"fieldChange"===t&&(n.onChange=e)})}}}}},{key:"created",value:function(){var t=this;this.context=this.createContext(),this.$on("SchemaForm.addField",function(e){e&&t.fields.push(e)}),this.$on("SchemaForm.addSchemaField",function(e){e&&(t.store.fields[e.plainPath]=e)}),this.$on("SchemaForm.removeField",function(e){e.prop&&t.fields.splice(t.fields.indexOf(e),1)}),this.$on("SchemaForm.removeSchemaField",function(e){e&&delete t.store.fields[e.plainPath]})}}]),e}(Object(f["b"])(l["a"]));h.registerAntd=d["r"],h.registerAntdMobile=d["s"],h.registerElement=d["u"],h.registerComponent=d["q"],h.registerDisplayComponent=d["t"],c["b"]([Object(p["d"])({type:Boolean,default:!1})],h.prototype,"disabled",void 0),c["b"]([Object(p["d"])({type:Boolean,default:!1})],h.prototype,"readonly",void 0),c["b"]([Object(p["d"])({type:Boolean,default:!1})],h.prototype,"loading",void 0),c["b"]([Object(p["e"])()],h.prototype,"store",void 0),c["b"]([Object(p["f"])("mode",{immediate:!0})],h.prototype,"modeChanged",null),c["b"]([Object(p["f"])("readonly",{immediate:!0})],h.prototype,"readonlyChanged",null),c["b"]([Object(p["f"])("disabled",{immediate:!0})],h.prototype,"disabledChanged",null),c["b"]([Object(p["f"])("loading",{immediate:!0})],h.prototype,"loadingChanged",null),h=c["b"]([Object(f["a"])({name:d["a"]})],h);var b=h;n("b71c");b.Field=r["a"],b.install=function(t){t.component("ASchemaForm",b),t.component("ASchemaFormField",b.Field)};var m=b;window.Vue&&window.Vue.use(m);e["a"]=m}});
//# sourceMappingURL=app.6e7c20b3.js.map